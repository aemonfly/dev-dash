"use strict";var HitApi=function(e){function t(){d.$inputForm=e("#input-form")}function n(){d.$inputForm.submit(r)}function a(e){return{type:e.type,date:e.created_at,actor:e.actor.display_login,avatar:e.actor.avatar_url,payload:e.payload}}function r(t,n){var a="https://api.github.com/repos",r=a+"/"+t+"/"+n+"/events";e.getJSON(r).then(o)}function o(e){var t=["PushEvent","CommitCommentEvent"],n=["IssuesEvent","IssueCommentEvent","ProjectEvent","ProjectCardEvent","ProjectColumnEvent"],r=["CreateEvent","PullRequestEvent","PullRequestReviewEvent","PullRequestReviewCommentEvent"],o=e.filter(function(e){return t.indexOf(e.type)!==-1}).map(a),l=e.filter(function(e){return n.indexOf(e.type)!==-1}).map(a),d=e.filter(function(e){return r.indexOf(e.type)!==-1}).map(a);RenderTable.render(o,l,d),RenderChart.render(e.map(a))}function l(){t(),n()}var d={};return{init:l,getEvents:r}}(jQuery),Greet=function(e){function t(){m.$greeting=e(".greeting"),m.$overlay=e('<div id="overlay"></div>'),m.$modalPrompt=e(document.createElement("div")),m.$modalError=e(document.createElement("p")),m.$modalPrompt.attr("id","user-modal").addClass("user-modal").html(f),m.$modalError.addClass("user-modal-error").html("GitHub Username Not Found"),e("body").append(m.$modalPrompt)}function n(){e("#user-modal-form").submit(a)}function a(e){e.preventDefault(),s=e.currentTarget[0].value.trim(),u=e.currentTarget[1].value.trim(),r(u).then(function(t){t.login===u&&(LS.setData("dev-dash-user",{name:e.currentTarget[0].value,githubName:e.currentTarget[1].value}),d(),i())}).catch(function(e){m.$modalPrompt.append(m.$modalError)})}function r(t){return e.getJSON("https://api.github.com/users/"+t)}function o(){var e,t=new Date,n=t.getHours();return e=n<12?"morning":n>=12&&n<17?"afternoon":"evening","Good "+e+", "+s+"."}function l(){m.$overlay.show(),m.$modalPrompt.addClass("user-modal-show")}function d(){m.$overlay.hide(),m.$modalPrompt.removeClass("user-modal-show")}function p(){var e=LS.getData("dev-dash-user");e&&e.name?(s=e.name,u=e.githubName,i()):l()}function i(){m.$greeting.text(o()),RepoSelect.getRepos(u)}function c(){t(),m.$overlay.hide(),e("body").append(m.$overlay),n(),p()}var s,u,m={},f='<form id="user-modal-form" class="Grid Grid--gutters Grid--full" action="submit">\n                    <div class="Grid-cell InputAddOn">\n                      <span class="InputAddOn-item">Your Name:</span>\n                      <input id="user-modal-name" class="InputAddOn-field" type="text" required>\n                    </div>\n                    <div class="Grid-cell InputAddOn">\n                      <span class="InputAddOn-item">GitHub User Name:</span>\n                      <input id="user-modal-username"  class="InputAddOn-field" type="text" required>\n                    </div>\n                      <div class="Grid-cell InputAddOn">\n                      <button class="InputAddOn-item" id="user-modal-button">Go!</button>\n                    </div>\n                    </form>';return{init:c}}(jQuery),LS=function(){function e(e,t){r&&r.setItem(e,JSON.stringify(t))}function t(e){if(r)return JSON.parse(r.getItem(e))}function n(){if(r)return r.clear()}function a(e){if(r)return r.removeItem(e)}var r=function(){var e,t,n=(new Date).toString();try{return e=window.localStorage,e.setItem(n,n),t=e.getItem(n)===n,e.removeItem(n),t&&e}catch(e){console.log("Problemz!")}}();return{setData:e,getData:t,deleteData:a,clearData:n}}(),RenderTable=function(e){function t(){p.$tableContainer=e(".table-container")}function n(e){return new Date(e).toDateString().slice(0,15).replace(/ 0/g," ")}function a(e,t,n){p.$tableContainer.empty(),e.length>0&&r(e),t.length>0&&o(t),n.length>0&&l(n)}function r(t){var a=e(document.createElement("div")),r=e(document.createElement("div")),o=e(document.createElement("ul"));t.forEach(function(t){var a=e(document.createElement("li")),r=e(document.createElement("img")),l=e(document.createElement("p")),d=e(document.createElement("span")),p=e(document.createElement("a"));p.attr("target","_blank"),"PushEvent"===t.type?t.payload.commits.forEach(function(e){var n=e.url.replace(/\/\/api./,"//").replace(/\/repos\//,"/").replace(/commits/,"commit");r.attr("src",t.avatar).appendTo(a),p.attr("href",n).html('<span class="bolder">'+e.sha.slice(0,6)+"</span>"),d.text('"'+e.message+'"'),l.append('<span class="bolder">'+t.actor+"</span> committed ")}):(r.attr("src",t.avatar).appendTo(a),p.attr("href",t.payload.comment.html_url).html('<span class="bolder">'+t.payload.comment.commit_id.slice(0,6)+"</span>"),d.text('"'+t.payload.comment.body+'"'),l.append('<span class="bolder">'+t.actor+"</span> commented on ")),l.append(p).append(" on "+n(t.date)+": ").append(d).appendTo(a),a.appendTo(o)}),o.addClass("col-list").appendTo(a),r.addClass("table-col").append("<h3>"+t.length+" Commit-Related Events</h3>").append(a).appendTo(p.$tableContainer)}function o(t){var a=e(document.createElement("div")),r=e(document.createElement("ul"));t.forEach(function(t){var a=e(document.createElement("li")),o=e(document.createElement("img")),l=e(document.createElement("p")),d=e(document.createElement("a"));o.attr("src",t.avatar).appendTo(a),d.attr("target","_blank"),"IssuesEvent"===t.type?(d.attr("href",t.payload.issue.html_url).html('<span class="bolder">issue '+t.payload.issue.number+"</span>"),l.append('<span class="bolder">'+t.actor+"</span> "+t.payload.action+" ").append(d).append(" on "+n(t.date)+': "'+t.payload.issue.title+'"')):"IssueCommentEvent"===t.type&&(d.attr("href",t.payload.comment.html_url).html('<span class="bolder">issue '+t.payload.issue.number+"</span>"),l.append('<span class="bolder">'+t.actor+"</span> commented on ").append(d).append(" on "+n(t.date)+': "'+t.payload.comment.body+'"')),a.append(l).appendTo(r)}),r.addClass("col-list"),a.addClass("table-col").append("<h3>"+t.length+" Todo-Related Events</h3>").append(r).appendTo(p.$tableContainer)}function l(t){var a,r=e(document.createElement("div")),o=e(document.createElement("ul"));t.forEach(function(t){var r=e(document.createElement("li")),l=e(document.createElement("img")),d=e(document.createElement("p")),p=e(document.createElement("a"));l.attr("src",t.avatar),p.attr("target","_blank"),"CreateEvent"===t.type?d.append(['<span class="bolder">'+t.actor+"</span>","created",t.payload.ref_type,'<span class="bolder">'+t.payload.ref+"</span>","on",n(t.date)].join(" ")):"PullRequestEvent"===t.type?(a=t.payload.pull_request.url.replace(/\/\/api./,"//").replace(/\/repos\//,"/").replace(/pulls/,"pull"),p.attr("href",a).html('<span class="bolder">pull request '+t.payload.pull_request.number+"</span>"),d.append('<span class="bolder">'+t.actor+"</span>").append(" "+t.payload.action+" ").append(p).append(" on "+n(t.date))):"PullRequestReviewEvent"===t.type?(p.attr("href",t.payload.pull_request.html_url).text(t.payload.pull_request.title),d.append([t.actor,t.payload.action,"review of "].join(" ")).append(p).append(" on"+n(t.date))):"PullRequestReviewCommentEvent"===t.type&&(p.attr("href",t.payload.comment.html_url).text(t.payload.comment.body),d.append(['<span class="bolder">'+t.actor+"</span>",t.payload.action,"pull request comment "].join(" ")).append(p).append(" on"+n(t.date))),r.append(l).append(d).appendTo(o)}),o.addClass("col-list"),r.addClass("table-col").append("<h3>"+t.length+" Merge-Related Events</h3>").append(o).appendTo(p.$tableContainer)}function d(){t()}var p={};return{init:d,render:a}}(jQuery),RenderChart=function(e){function t(){m.$container=e(".chart-container"),m.$svgElem=e(document.createElementNS(f,"svg"))}function n(e){return new Date(e).toDateString().slice(0,15).replace(/ 0/g," ")}function a(e){for(var t=e.map(function(e){return n(e.date)}),a=new Date(t[0]),r=new Date(t[t.length-1]),o=[],l=a;l<=r;)o.push(n(l)),l=l.addDays(1);return o}function r(e){var t,n;return t=e.reduce(function(e,t){return Math.max(e,t[1])},e[0][1]),n=Math.floor(t/4),4*(n+1)}function o(e){var t,r,o=[],l=[];return e.forEach(function(e){"PushEvent"===e.type?e.payload.commits.forEach(function(t){o.push({actor:e.actor,avatar:e.avatar,date:e.date,payload:t,type:"Commit"})}):o.push(e)}),t=o.sort(function(e,t){return new Date(e.date)-new Date(t.date)}),r=a(t),l=r.map(function(e){return[e.slice(3,10),t.filter(function(t){return n(t.date)===e}).length]})}function l(e){return 1===e.length}function d(e,t,n){return e.map(function(e,a){return[a*t+g,h-e[1]*n-E]})}function p(t){var n=e(document.createElementNS(f,"g")),a=t.length-1,o=r(t),l=(v-g-y)/a,p=(h-E-y)/o,i=d(t,l,p);return i.forEach(function(a,r){var o=e(document.createElementNS(f,"circle")),l=e(document.createElementNS(f,"title")),d=a[0],p=a[1],i=4;o.attr("cx",d).attr("cy",p).attr("r",i),l.text(t[r][0]+" ("+t[r][1]+" events)"),o.append(l),n.addClass("chart-circle").append(o)}),n}function i(t){var n,a,o=e(document.createElementNS(f,"g")),l=t.length-1,p=r(t),i=(v-g-y)/l,c=(h-E-y)/p,s=d(t,i,c);for(n=0;n<s.length-1;n+=1)a=e(document.createElementNS(f,"line")),a.attr("x1",s[n][0]).attr("y1",s[n][1]).attr("x2",s[n+1][0]).attr("y2",s[n+1][1]),o.addClass("chart-line").append(a);return o}function c(t,n){var a,o,l,d,p,i,c,s,u,m,$=e(document.createElementNS(f,"g")),b=r(t);if("y"===n){for($.addClass("labels y-labels"),l=b>12?b/4:b,u=(h-E-y)/l,m=0;m<l+1;m+=1)s=m*b/l,c=h-E-u*m,a=e(document.createElementNS(f,"line")),a.addClass("horiz-rule").attr("x1",g).attr("y1",c).attr("x2",v-y+5).attr("y2",c),o=e(document.createElementNS(f,"text")),o.attr("x",g-20).attr("y",c+4).html(s),$.append(a).append(o);return $}if("x"===n||!n||null===n){for($.addClass("labels x-labels"),l=t.length-1,i=(v-g-y)/l,m=0;m<t.length;m+=1)o=e(document.createElementNS(f,"text")),p=t[m][0],d=m*i,o.attr("x",d+g).attr("y",h-5).text(p),t.length>20?0!==m&&m%10!==0&&m!==t.length-1||o.appendTo($):o.appendTo($),console.log(p);return $}}function s(e){var t;if(m.$svgElem.empty(),m.$svgElem.addClass("chart--content").attr("id","svg").attr("xmlns",f).attr("height","100%").attr("viewBox","0 0 "+v+" "+h).attr("xml:space","preserve"),e.length>0){if(t=o(e),l(t))return;m.$svgElem.append(c(t,"y")).append(c(t,"x")),m.$svgElem.append(i(t)),m.$svgElem.append(p(t)),m.$container.append(m.$svgElem)}}function u(){t()}var m={},f="http://www.w3.org/2000/svg",v=1e3,h=400,g=80,E=40,y=40;return Date.prototype.addDays=function(e){var t=new Date(this.valueOf());return t.setDate(t.getDate()+e),t},{init:u,render:s}}(jQuery),RepoSelect=function(e){function t(){f.$selectContainer=e(".repo-select"),f.$p=e(document.createElement("p")),f.$listContainer=e(document.createElement("div")),f.$ul=e(document.createElement("ul")),f.$newRepoForm=e(document.createElement("form")),f.$newRepoUser=e(document.createElement("input")),f.$newRepoRepo=e(document.createElement("input")),f.$newRepoBtn=e(document.createElement("button"))}function n(){f.$selectContainer.on("click",".repo-select-highlight",a),f.$ul.on("click","div.li-descriptions",r),f.$ul.on("click","span.li-remove",o),f.$newRepoForm.on("submit",l)}function a(e){e.stopPropagation(),f.$listContainer.toggleClass("hidden")}function r(e){e.stopPropagation();var t=e.currentTarget.children[0].innerHTML.split(" / ");m=t[1],i(v),HitApi.getEvents(t[0],t[1]),f.$listContainer.addClass("hidden")}function o(t){t.stopPropagation();var n=(t.target.previousElementSibling.dataset.repo,e(t.target).parent()),a=n.attr("id");v.splice(a,1),n.remove(),LS.setData("dev-dash-repos",v)}function l(t){t.preventDefault(),t.stopPropagation();var n="https://api.github.com/repos",a=t.currentTarget[0].value,r=t.currentTarget[1].value;e.getJSON(n+"/"+a+"/"+r).then(function(e){return v.unshift(e),f.$newRepoUser[0].value="",f.$newRepoRepo[0].value="",v}).then(p).then(i).catch(function(e){console.warn("Error fetching repo.")})}function d(e){if(e&&e.length){e.forEach(function(e){v.push(e)});var t=v[0].full_name.split("/");return m=t[1],HitApi.getEvents(t[0],t[1]),e}}function p(e){return LS.setData("dev-dash-repos",v),e}function i(t){t&&t.length?(f.$ul.html(""),t.forEach(function(t,n){var a=e(document.createElement("li"));a.attr("id",n).html('<div class="li-descriptions" data-repo="'+t.name+'">\n                             <p>'+t.owner.login+" / "+t.name+"</p>\n                             <p>"+t.description+'</p>\n                           </div>\n                           <span class="li-remove">&#10060</span>'),f.$ul.append(a)}),c()):(console.log("no repos, holmes"),c(),f.$listContainer.removeClass("hidden"))}function c(){f.$newRepoBtn.html("+"),f.$newRepoUser.attr("required","true").attr("placeholder","author"),f.$newRepoRepo.attr("required","true").attr("placeholder","repo"),f.$newRepoForm.addClass("new-repo-form").append(f.$newRepoUser).append(f.$newRepoRepo).append(f.$newRepoBtn),f.$listContainer.addClass("repo-list").append(f.$ul).append(f.$newRepoForm),f.$p.html('You are currently viewing the <span class="repo-select-highlight">'+m+"&#x25BC;</span> repository."),f.$selectContainer.append(f.$p).append(f.$listContainer)}function s(t){h?(d(LS.getData("dev-dash-repos")),i(v)):e.getJSON("https://api.github.com/users/"+t+"/repos?sort=updated").then(function(e){return e.slice(0,3)}).then(d).then(p).then(i)}function u(){t(),n(),f.$listContainer.addClass("hidden")}var m,f={},v=[],h=function(){return!!LS.getData("dev-dash-repos")}();return{init:u,getRepos:s}}(jQuery),Backgrounds=function(e){function t(){d.$body=e("body")}function n(){return(new Date).toDateString().slice(4,15)}function a(){var e=LS.getData("dev-dash-bg"),t=Math.floor(Math.random()*p.length),a={imgName:p[t],date:n()};return e?e:a}function r(){var e,t,n=p.indexOf(c.imgName);new Date(i)>new Date(c.date)?(e=7===n?0:n+1,t=p[e],LS.setData("dev-dash-bg",{imgName:t,date:i}),o(t)):(o(c.imgName),LS.setData("dev-dash-bg",{imgName:c.imgName,date:i}))}function o(e){d.$body.css("background-image","url(dist/assets/"+e+".jpg)")}function l(){t(),r()}var d={},p=["001","002","003","004","005","006","007","008"],i=n(),c=a();return{init:l}}(jQuery);$(document).ready(function(){Backgrounds.init(),RepoSelect.init(),Greet.init(),HitApi.init(),RenderTable.init(),RenderChart.init()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdldC1ldmVudHMuanMiLCJncmVldC5qcyIsImxvY2FsX3N0b3JhZ2UuanMiLCJyZW5kZXItdGFibGUuanMiLCJyZW5kZXItY2hhcnQuanMiLCJyZXBvLXNlbGVjdC5qcyIsImJhY2tncm91bmRzLmpzIiwiYXBwLmpzIl0sIm5hbWVzIjpbIkhpdEFwaSIsIiQiLCJjYWNoZURvbSIsIkRPTSIsIiRpbnB1dEZvcm0iLCJiaW5kRXZlbnRzIiwic3VibWl0IiwiZ2V0RXZlbnRzIiwicHJlcGFyZUV2ZW50cyIsImUiLCJ0eXBlIiwiZGF0ZSIsImNyZWF0ZWRfYXQiLCJhY3RvciIsImRpc3BsYXlfbG9naW4iLCJhdmF0YXIiLCJhdmF0YXJfdXJsIiwicGF5bG9hZCIsImF1dGhvciIsInJlcG8iLCJ1cmwiLCJyZXBvRXZlbnRzIiwiZ2V0SlNPTiIsInRoZW4iLCJoYW5kbGVSZXNwb25zZSIsInJlc3BvbnNlIiwiY29tbWl0VHlwZXMiLCJ0b2RvVHlwZXMiLCJtZXJnZVR5cGVzIiwiY29tbWl0RXZlbnRzIiwiZmlsdGVyIiwiaW5kZXhPZiIsIm1hcCIsInRvZG9FdmVudHMiLCJtZXJnZUV2ZW50cyIsIlJlbmRlclRhYmxlIiwicmVuZGVyIiwiUmVuZGVyQ2hhcnQiLCJpbml0IiwialF1ZXJ5IiwiR3JlZXQiLCIkZ3JlZXRpbmciLCIkb3ZlcmxheSIsIiRtb2RhbFByb21wdCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsIiRtb2RhbEVycm9yIiwiYXR0ciIsImFkZENsYXNzIiwiaHRtbCIsIm1vZGFsRm9ybSIsImFwcGVuZCIsImhhbmRsZVN1Ym1pdCIsInByZXZlbnREZWZhdWx0IiwibmFtZSIsImN1cnJlbnRUYXJnZXQiLCJ2YWx1ZSIsInRyaW0iLCJnaXRodWJOYW1lIiwiY2hlY2tVc2VyIiwicmVzIiwibG9naW4iLCJMUyIsInNldERhdGEiLCJoaWRlTW9kYWwiLCJkaXNwbGF5TWVzc2FnZSIsImNhdGNoIiwiZXJyIiwidSIsIm1ha2VNZXNzYWdlIiwidGltZU9mRGF5IiwidGVoRGF0ZSIsIkRhdGUiLCJpbml0aWFsSG91ciIsImdldEhvdXJzIiwic2hvd01vZGFsIiwic2hvdyIsImhpZGUiLCJyZW1vdmVDbGFzcyIsImNoZWNrU3RvcmFnZSIsInN0b3JhZ2UiLCJnZXREYXRhIiwidGV4dCIsIlJlcG9TZWxlY3QiLCJnZXRSZXBvcyIsImxvYyIsInZhbCIsInNldEl0ZW0iLCJKU09OIiwic3RyaW5naWZ5IiwicGFyc2UiLCJnZXRJdGVtIiwiY2xlYXJEYXRhIiwiY2xlYXIiLCJkZWxldGVEYXRhIiwicmVtb3ZlSXRlbSIsInJlc3VsdCIsInVpZCIsInRvU3RyaW5nIiwid2luZG93IiwibG9jYWxTdG9yYWdlIiwiZXhjZXB0aW9uIiwiY29uc29sZSIsImxvZyIsIiR0YWJsZUNvbnRhaW5lciIsImZvcm1hdERhdGUiLCJ0b0RhdGVTdHJpbmciLCJzbGljZSIsInJlcGxhY2UiLCJlbXB0eSIsImxlbmd0aCIsInJlbmRlckNvbW1pdEV2ZW50cyIsInJlbmRlclRvZG9FdmVudHMiLCJyZW5kZXJNZXJnZUV2ZW50cyIsImVzIiwiJGxpc3RDb250YWluZXIiLCIkY29sdW1uIiwiJGxpc3QiLCJmb3JFYWNoIiwiZXZ0IiwiJGxpc3RJdGVtIiwiJGltZyIsIiRwYXJhZ3JhcGgiLCIkcGFyYVNwYW4iLCIkYSIsImNvbW1pdHMiLCJjb21taXQiLCJjbGVhblVybCIsImFwcGVuZFRvIiwic2hhIiwibWVzc2FnZSIsImNvbW1lbnQiLCJodG1sX3VybCIsImNvbW1pdF9pZCIsImJvZHkiLCJpc3N1ZSIsIm51bWJlciIsImFjdGlvbiIsInRpdGxlIiwicmVmX3R5cGUiLCJyZWYiLCJqb2luIiwicHVsbF9yZXF1ZXN0IiwiJGNvbnRhaW5lciIsIiRzdmdFbGVtIiwiY3JlYXRlRWxlbWVudE5TIiwibnMiLCJmb3JtYXREYXRlcyIsImJ1aWxkRGF0ZVJhbmdlIiwiZXZlbnRzIiwibm9ybURhdGVzIiwic3RhcnREYXRlIiwic3RvcERhdGUiLCJkYXRlQXJyYXkiLCJjdXJyZW50RGF0ZSIsInB1c2giLCJhZGREYXlzIiwiZ2V0Q2hhcnRZTWF4IiwicG9pbnRzIiwibWF4TnVtRXZ0cyIsInF1b3RpZW50IiwicmVkdWNlIiwiYSIsImIiLCJNYXRoIiwibWF4IiwiZmxvb3IiLCJwcmVwYXJlRGF0ZUV2ZW50cyIsInNvcnRlZEV2ZW50cyIsImNoYXJ0RGF0YSIsInNvcnQiLCJ4Iiwic2FtZURhbW5EYXkiLCJwb2ludHNBcnIiLCJnZW5Gb3JtYXR0ZWRQb2ludHMiLCJ4TXVsdGlwbGUiLCJ5TXVsdGlwbGUiLCJwb2ludCIsImluZCIsInhNYXJnaW4iLCJoZWlnaHQiLCJ5TWFyZ2luIiwiZ2VuZXJhdGVDaXJjbGVzIiwiZ3JvdXAiLCJudW1Qb2ludHMiLCJjaGFydFlNYXgiLCJ3aWR0aCIsInNwYWNlciIsImZvcm1hdHRlZFBvaW50cyIsImNpcmNsZSIsImN4IiwiY3kiLCJyIiwiZ2VuZXJhdGVMaW5lcyIsImkiLCJsaW5lIiwiZ2VuQXhpc0xhYmVscyIsImF4aXMiLCJudW1BeGlzVGlja3MiLCJ4UG9zIiwieFZhbHVlIiwieVBvcyIsInlWYWx1ZSIsInlTcGFjaW5nIiwicHJvdG90eXBlIiwiZGF5cyIsImRhdCIsInRoaXMiLCJ2YWx1ZU9mIiwic2V0RGF0ZSIsImdldERhdGUiLCIkc2VsZWN0Q29udGFpbmVyIiwiJHAiLCIkdWwiLCIkbmV3UmVwb0Zvcm0iLCIkbmV3UmVwb1VzZXIiLCIkbmV3UmVwb1JlcG8iLCIkbmV3UmVwb0J0biIsIm9uIiwic2hvd1JlcG9MaXN0Iiwic2VsZWN0UmVwbyIsImRlbGV0ZVJlcG8iLCJhZGRSZXBvIiwic3RvcFByb3BhZ2F0aW9uIiwidG9nZ2xlQ2xhc3MiLCJwaWNrZWQiLCJjaGlsZHJlbiIsImlubmVySFRNTCIsInNwbGl0Iiwic2VsZWN0ZWRSZXBvIiwicG9wdWxhdGVNZW51IiwicmVwb3MiLCJzZWxlY3RlZEVsZW1lbnQiLCJ0YXJnZXQiLCJwcmV2aW91c0VsZW1lbnRTaWJsaW5nIiwiZGF0YXNldCIsInBhcmVudCIsInNlbGVjdGVkRWxlbUlkIiwic3BsaWNlIiwicmVtb3ZlIiwiYXBpVXJsIiwibmV3QXV0aG9yIiwibmV3UmVwbyIsInVuc2hpZnQiLCJzYXZlUmVwb3MiLCJ3YXJuIiwicG9wdWxhdGVSZXBvcyIsImRhdGEiLCJyZXBvWmVybyIsImZ1bGxfbmFtZSIsIiRsaSIsIm93bmVyIiwiZGVzY3JpcHRpb24iLCJ1c2VyTmFtZSIsIkJhY2tncm91bmRzIiwiJGJvZHkiLCJtYWtlRGF0ZSIsImxvYWRTdGF0ZSIsInN0b3JlZFN0YXRlIiwiaW1nSW5keCIsInJhbmRvbSIsImJnQXJyIiwibmV3U3RhdGUiLCJpbWdOYW1lIiwicGlja0JhY2tncm91bmQiLCJuZXdJbWdJbmRleCIsIm5ld0ltZ05hbWUiLCJjdXJudEltZ0luZHgiLCJzdGF0ZSIsInRvZGF5IiwiaW1hZ2VOYW1lIiwiY3NzIiwicmVhZHkiXSwibWFwcGluZ3MiOiJZQUdBLElBQUFBLFFBQUEsU0FBQUMsR0FNQSxRQUFBQyxLQUNBQyxFQUFBQyxXQUFBSCxFQUFBLGVBS0EsUUFBQUksS0FDQUYsRUFBQUMsV0FBQUUsT0FBQUMsR0FLQSxRQUFBQyxHQUFBQyxHQUNBLE9BQ0FDLEtBQUFELEVBQUFDLEtBQ0FDLEtBQUFGLEVBQUFHLFdBQ0FDLE1BQUFKLEVBQUFJLE1BQUFDLGNBQ0FDLE9BQUFOLEVBQUFJLE1BQUFHLFdBQ0FDLFFBQUFSLEVBQUFRLFNBTUEsUUFBQVYsR0FBQVcsRUFBQUMsR0FFQSxHQUFBQyxHQUFBLCtCQUNBQyxFQUFBRCxFQUFBLElBQUFGLEVBQUEsSUFBQUMsRUFBQSxTQUVBbEIsR0FBQXFCLFFBQUFELEdBQUFFLEtBQUFDLEdBS0EsUUFBQUEsR0FBQUMsR0FHQSxHQUFBQyxJQUFBLFlBQ0Esc0JBR0FDLEdBQUEsY0FDQSxvQkFDQSxlQUNBLG1CQUNBLHNCQUdBQyxHQUFBLGNBQ0EsbUJBQ0EseUJBQ0EsaUNBSUFDLEVBQUFKLEVBQ0FLLE9BQUEsU0FBQXJCLEdBQUEsTUFBQWlCLEdBQUFLLFFBQUF0QixFQUFBQyxTQUFBLElBQ0FzQixJQUFBeEIsR0FHQXlCLEVB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QixRQUFBLGVBQ0FrTCxFQUFBL0YsS0FBQUUsTUFBQUYsS0FBQWdHLFNBQUFDLEVBQUF2SixRQUNBd0osR0FDQUMsUUFBQUYsRUFBQUYsR0FDQXhQLEtBQUFxUCxJQUtBLE9BQUFFLEdBQUFBLEVBQUFJLEVBUUEsUUFBQUUsS0FLQSxHQUNBQyxHQUNBQyxFQUZBQyxFQUFBTixFQUFBdE8sUUFBQTZPLEVBQUFMLFFBSUEsSUFBQS9MLE1BQUFxTSxHQUFBLEdBQUFyTSxNQUFBb00sRUFBQWpRLE9BR0E4UCxFQUFBLElBQUFFLEVBQUEsRUFBQUEsRUFBQSxFQUdBRCxFQUFBTCxFQUFBSSxHQUdBM00sR0FBQUMsUUFBQSxlQUNBd00sUUFBQUcsRUFDQS9QLEtBQUFrUSxJQUlBek8sRUFBQXNPLEtBR0F0TyxFQUFBd08sRUFBQUwsU0FFQXpNLEdBQUFDLFFBQUEsZUFDQXdNLFFBQUFLLEVBQUFMLFFBQ0E1UCxLQUFBa1EsS0FRQSxRQUFBek8sR0FBQTBPLEdBQ0EzUSxFQUFBNFAsTUFDQWdCLElBQUEsbUJBQUEsbUJBQUFELEVBQUEsU0FLQSxRQUFBeE8sS0FDQXBDLElBQ0FzUSxJQXZGQSxHQUFBclEsTUFDQWtRLEdBQUEsTUFBQSxNQUFBLE1BQUEsTUFBQSxNQUFBLE1BQUEsTUFBQSxPQUNBUSxFQUFBYixJQUNBWSxFQUFBWCxHQXlGQSxRQUNBM04sS0FBQUEsSUFHQUMsT0NsR0F0QyxHQUFBMkMsVUFBQW9PLE1BQUEsV0FFQWxCLFlBQUF4TixPQUVBNkMsV0FBQTdDLE9BRUFFLE1BQUFGLE9BRUF0QyxPQUFBc0MsT0FFQUgsWUFBQUcsT0FFQUQsWUFBQUMiLCJmaWxlIjoiZGV2LWRhc2guanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBqc2hpbnQgZXN2ZXJzaW9uOjYgKi9cbi8qIGdsb2JhbHMgalF1ZXJ5LCBkb2N1bWVudCwgY29uc29sZSwgUmVuZGVyVGFibGUsIFJlbmRlckNoYXJ0ICovXG5cbnZhciBIaXRBcGkgPSAoZnVuY3Rpb24gKCQpIHtcblxuICAgIHZhciBET00gPSB7fTtcbiAgICBcbiAgICBcbiAgICAvLyBjYWNoZSBET00gZWxlbWVudHNcbiAgICBmdW5jdGlvbiBjYWNoZURvbSgpIHtcbiAgICAgICAgRE9NLiRpbnB1dEZvcm0gPSAkKCcjaW5wdXQtZm9ybScpO1xuICAgIH1cbiAgICBcblxuICAgIC8vIGJpbmQgZXZlbnRzXG4gICAgZnVuY3Rpb24gYmluZEV2ZW50cygpIHtcbiAgICAgICAgRE9NLiRpbnB1dEZvcm0uc3VibWl0KGdldEV2ZW50cyk7XG4gICAgfVxuXG5cbiAgICAvLyBwcmVwYXJlIGV2ZW50cyBwcmlvciB0byBjYWxsaW5nIHJlbmRlcmVyc1xuICAgIGZ1bmN0aW9uIHByZXBhcmVFdmVudHMoZSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZSAgICA6IGUudHlwZSxcbiAgICAgICAgICAgIGRhdGUgICAgOiBlLmNyZWF0ZWRfYXQsXG4gICAgICAgICAgICBhY3RvciAgIDogZS5hY3Rvci5kaXNwbGF5X2xvZ2luLFxuICAgICAgICAgICAgYXZhdGFyICA6IGUuYWN0b3IuYXZhdGFyX3VybCxcbiAgICAgICAgICAgIHBheWxvYWQgOiBlLnBheWxvYWRcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBcbiAgICAvLyBnZXQgZ2l0aHViIGV2ZW50c1xuICAgIGZ1bmN0aW9uIGdldEV2ZW50cyhhdXRob3IsIHJlcG8pIHtcbiAgICAgICAgXG4gICAgICAgIHZhciB1cmw9ICdodHRwczovL2FwaS5naXRodWIuY29tL3JlcG9zJyxcbiAgICAgICAgICAgIHJlcG9FdmVudHMgPSBgJHt1cmx9LyR7YXV0aG9yfS8ke3JlcG99L2V2ZW50c2A7XG5cbiAgICAgICAgJC5nZXRKU09OKHJlcG9FdmVudHMpLnRoZW4oaGFuZGxlUmVzcG9uc2UpO1xuICAgIH1cblxuXG4gICAgLy8gaGFuZGxlIEdIIEpTT04gcmVzcG9uc2UgZGF0YVxuICAgIGZ1bmN0aW9uIGhhbmRsZVJlc3BvbnNlKHJlc3BvbnNlKSB7XG4gICAgICAgIFxuICAgICAgICAvLyB3ZSdyZSBzcGxpdHRpbmcgZXZlbnRzIGludG8gMyBjYXRlZ29yaWVzLCBiYXNlZCBvbiBldmVudCB0eXBlXG4gICAgICAgIHZhciBjb21taXRUeXBlcyA9IFsnUHVzaEV2ZW50JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICdDb21taXRDb21tZW50RXZlbnQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRvZG9UeXBlcyA9IFsnSXNzdWVzRXZlbnQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICdJc3N1ZUNvbW1lbnRFdmVudCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgJ1Byb2plY3RFdmVudCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgJ1Byb2plY3RDYXJkRXZlbnQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICdQcm9qZWN0Q29sdW1uRXZlbnQnXG4gICAgICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBtZXJnZVR5cGVzID0gWydDcmVhdGVFdmVudCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICdQdWxsUmVxdWVzdEV2ZW50JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJ1B1bGxSZXF1ZXN0UmV2aWV3RXZlbnQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAnUHVsbFJlcXVlc3RSZXZpZXdDb21tZW50RXZlbnQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gY3JlYXRlIGFycmF5IG9mIGNvbW1pdC1yZWxhdGVkIGV2ZW50c1xuICAgICAgICAgICAgY29tbWl0RXZlbnRzID0gcmVzcG9uc2VcbiAgICAgICAgICAgICAgICAuZmlsdGVyKChlKSA9PiBjb21taXRUeXBlcy5pbmRleE9mKGUudHlwZSkgIT09IC0xKVxuICAgICAgICAgICAgICAgIC5tYXAocHJlcGFyZUV2ZW50cyksXG5cbiAgICAgICAgICAgIC8vIGNyZWF0ZSBhcnJheSBvZiB0b2RvLXJlbGF0ZWQgZXZlbnRzXG4gICAgICAgICAgICB0b2RvRXZlbnRzID0gcmVzcG9uc2VcbiAgICAgICAgICAgICAgICAuZmlsdGVyKChlKSA9PiB0b2RvVHlwZXMuaW5kZXhPZihlLnR5cGUpICE9PSAtMSlcbiAgICAgICAgICAgICAgICAubWFwKHByZXBhcmVFdmVudHMpLFxuXG4gICAgICAgICAgICAvLyBjcmVhdGUgYnVpbGQgYXJyYXkgb2YgbWVyZ2UtcmVsYXRlZCBldmVudHNcbiAgICAgICAgICAgIG1lcmdlRXZlbnRzID0gcmVzcG9uc2VcbiAgICAgICAgICAgICAgICAuZmlsdGVyKChlKSA9PiBtZXJnZVR5cGVzLmluZGV4T2YoZS50eXBlKSAhPT0gLTEpXG4gICAgICAgICAgICAgICAgLm1hcChwcmVwYXJlRXZlbnRzKTtcbiAgICAgICAgXG4gICAgICAgIC8vIGNhbGwgcmVuZGVyZXJzXG4gICAgICAgIFJlbmRlclRhYmxlLnJlbmRlcihjb21taXRFdmVudHMsIHRvZG9FdmVudHMsIG1lcmdlRXZlbnRzKTtcbiAgICAgICAgUmVuZGVyQ2hhcnQucmVuZGVyKHJlc3BvbnNlLm1hcChwcmVwYXJlRXZlbnRzKSk7XG4gICAgfVxuICAgIFxuICAgIFxuICAgIC8vIHB1YmxpYyBpbml0IG1ldGhvZFxuICAgIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICAgIGNhY2hlRG9tKCk7XG4gICAgICAgIGJpbmRFdmVudHMoKTtcbiAgICB9XG4gICAgXG4gICAgXG4gICAgLy8gcmV0dXJuIHB1YmxpYyBtZXRob2RzXG4gICAgcmV0dXJuIHtcbiAgICAgICAgaW5pdDogaW5pdCxcbiAgICAgICAgZ2V0RXZlbnRzOiBnZXRFdmVudHNcbiAgICB9O1xuXG59KGpRdWVyeSkpO1xuIiwiLyoganNoaW50IGVzdmVyc2lvbjo2ICovXG4vKiBnbG9iYWxzIGpRdWVyeSwgZG9jdW1lbnQsIGNvbnNvbGUsIExTLCBSZXBvU2VsZWN0ICovXG5cbnZhciBHcmVldCA9IChmdW5jdGlvbigkKSB7XG4gICAgXG4gICAgdmFyIG5hbWUsXG4gICAgICAgIGdpdGh1Yk5hbWUsXG4gICAgICAgIERPTSA9IHt9LFxuICAgICAgICBcbiAgICAgICAgLy8gbW9kYWwgcHJvbXB0IHRlbXBsYXRlXG4gICAgICAgIG1vZGFsRm9ybSA9IGA8Zm9ybSBpZD1cInVzZXItbW9kYWwtZm9ybVwiIGNsYXNzPVwiR3JpZCBHcmlkLS1ndXR0ZXJzIEdyaWQtLWZ1bGxcIiBhY3Rpb249XCJzdWJtaXRcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIkdyaWQtY2VsbCBJbnB1dEFkZE9uXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJJbnB1dEFkZE9uLWl0ZW1cIj5Zb3VyIE5hbWU6PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBpZD1cInVzZXItbW9kYWwtbmFtZVwiIGNsYXNzPVwiSW5wdXRBZGRPbi1maWVsZFwiIHR5cGU9XCJ0ZXh0XCIgcmVxdWlyZWQ+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiR3JpZC1jZWxsIElucHV0QWRkT25cIj5cbiAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIklucHV0QWRkT24taXRlbVwiPkdpdEh1YiBVc2VyIE5hbWU6PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBpZD1cInVzZXItbW9kYWwtdXNlcm5hbWVcIiAgY2xhc3M9XCJJbnB1dEFkZE9uLWZpZWxkXCIgdHlwZT1cInRleHRcIiByZXF1aXJlZD5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIkdyaWQtY2VsbCBJbnB1dEFkZE9uXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cIklucHV0QWRkT24taXRlbVwiIGlkPVwidXNlci1tb2RhbC1idXR0b25cIj5HbyE8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZm9ybT5gO1xuICAgIFxuICAgIFxuICAgIC8vIGNhY2hlIERPTSBlbGVtZW50c1xuICAgIGZ1bmN0aW9uIGNhY2hlRG9tKCkge1xuICAgICAgICBET00uJGdyZWV0aW5nICAgID0gJCgnLmdyZWV0aW5nJyk7XG4gICAgICAgIERPTS4kb3ZlcmxheSAgICAgPSAkKCc8ZGl2IGlkPVwib3ZlcmxheVwiPjwvZGl2PicpO1xuICAgICAgICBET00uJG1vZGFsUHJvbXB0ID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSk7XG4gICAgICAgIERPTS4kbW9kYWxFcnJvciAgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKSk7XG5cbiAgICAgICAgRE9NLiRtb2RhbFByb21wdFxuICAgICAgICAgICAgLmF0dHIoJ2lkJywgJ3VzZXItbW9kYWwnKVxuICAgICAgICAgICAgLmFkZENsYXNzKCd1c2VyLW1vZGFsJylcbiAgICAgICAgICAgIC5odG1sKG1vZGFsRm9ybSk7XG4gICAgICAgIFxuICAgICAgICBET00uJG1vZGFsRXJyb3JcbiAgICAgICAgICAgIC5hZGRDbGFzcygndXNlci1tb2RhbC1lcnJvcicpXG4gICAgICAgICAgICAuaHRtbCgnR2l0SHViIFVzZXJuYW1lIE5vdCBGb3VuZCcpO1xuICAgICAgICBcbiAgICAgICAgJCgnYm9keScpXG4gICAgICAgICAgICAuYXBwZW5kKERPTS4kbW9kYWxQcm9tcHQpO1xuICAgIH1cbiAgICBcbiAgICBcbiAgICAvLyBiaW5kIGV2ZW50c1xuICAgIGZ1bmN0aW9uIGJpbmRFdmVudHMoKSB7XG4gICAgICAgICQoJyN1c2VyLW1vZGFsLWZvcm0nKS5zdWJtaXQoaGFuZGxlU3VibWl0KTtcbiAgICB9XG4gICAgXG4gICAgXG4gICAgLy8gaGFuZGxlIG1vZGFsIHN1Ym1pdFxuICAgIGZ1bmN0aW9uIGhhbmRsZVN1Ym1pdChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIHNldCBtb2R1bGUgc2NvcGUgbmFtZXMgdG8gaW5wdXQgbmFtZXNcbiAgICAgICAgbmFtZSA9IGUuY3VycmVudFRhcmdldFswXS52YWx1ZS50cmltKCk7XG4gICAgICAgIGdpdGh1Yk5hbWUgPSBlLmN1cnJlbnRUYXJnZXRbMV0udmFsdWUudHJpbSgpO1xuICAgICAgICBcbiAgICAgICAgY2hlY2tVc2VyKGdpdGh1Yk5hbWUpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlcy5sb2dpbiA9PT0gZ2l0aHViTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gc2F2ZSB1c2VyIGRldGFpbHMgdG8gbG9jYWwgc3RvcmFnZVxuICAgICAgICAgICAgICAgICAgICBMUy5zZXREYXRhKCdkZXYtZGFzaC11c2VyJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSAgICAgOiBlLmN1cnJlbnRUYXJnZXRbMF0udmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBnaXRodWJOYW1lIDogZS5jdXJyZW50VGFyZ2V0WzFdLnZhbHVlXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIHJldHJhY3QgdGhlIG1vZGFsIHBhbmVsXG4gICAgICAgICAgICAgICAgICAgIGhpZGVNb2RhbCgpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIGNhbGwgZGlzcGxheSBtZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXlNZXNzYWdlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyB3YXJuIHVzZXJcbiAgICAgICAgICAgICAgICBET00uJG1vZGFsUHJvbXB0XG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoRE9NLiRtb2RhbEVycm9yKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIFxuICAgIC8vIGNoZWNrIEdpdGh1YiB1c2VybmFtZVxuICAgIGZ1bmN0aW9uIGNoZWNrVXNlcih1KSB7XG4gICAgICAgIHJldHVybiAkLmdldEpTT04oJ2h0dHBzOi8vYXBpLmdpdGh1Yi5jb20vdXNlcnMvJyArIHUpO1xuICAgIH1cbiAgICBcbiAgICBcbiAgICAvLyBhc3NlbWJsZSB0aW1lLWJhc2VkIG1lc3NhZ2UgdG8gZ3JlZXQgdXNlclxuICAgIGZ1bmN0aW9uIG1ha2VNZXNzYWdlKCkge1xuICAgICAgICB2YXIgdGltZU9mRGF5LFxuICAgICAgICAgICAgdGVoRGF0ZSA9IG5ldyBEYXRlKCksXG4gICAgICAgICAgICBpbml0aWFsSG91ciA9IHRlaERhdGUuZ2V0SG91cnMoKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChpbml0aWFsSG91ciA8IDEyKSB7XG4gICAgICAgICAgICB0aW1lT2ZEYXkgPSBcIm1vcm5pbmdcIjtcbiAgICAgICAgfSBlbHNlIGlmIChpbml0aWFsSG91ciA+PSAxMiAmJiBpbml0aWFsSG91ciA8IDE3KSB7XG4gICAgICAgICAgICB0aW1lT2ZEYXkgPSBcImFmdGVybm9vblwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGltZU9mRGF5ID0gXCJldmVuaW5nXCI7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYEdvb2QgJHt0aW1lT2ZEYXl9LCAke25hbWV9LmA7XG4gICAgfVxuICAgIFxuICAgIFxuICAgIC8vIHNob3cgbW9kYWwgcGFuZWwuIFNsaWRlcyBkb3duIGZyb20gdG9wXG4gICAgZnVuY3Rpb24gc2hvd01vZGFsKCkge1xuICAgICAgICBcbiAgICAgICAgLy8gc2hvdyBvdmVybGF5XG4gICAgICAgIERPTS4kb3ZlcmxheS5zaG93KCk7XG4gICAgICAgIFxuICAgICAgICAvLyBzaG93IG1vZGFsXG4gICAgICAgIERPTS4kbW9kYWxQcm9tcHRcbiAgICAgICAgICAgIC5hZGRDbGFzcygndXNlci1tb2RhbC1zaG93Jyk7XG4gICAgfVxuICAgIFxuICAgIFxuICAgIC8vIHJldHJhY3QgbW9kYWwgcGFuZWxcbiAgICBmdW5jdGlvbiBoaWRlTW9kYWwoKSB7XG4gICAgICAgIFxuICAgICAgICAvLyBzaG93IG92ZXJsYXlcbiAgICAgICAgRE9NLiRvdmVybGF5LmhpZGUoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIGhpZGUgbW9kYWxcbiAgICAgICAgRE9NLiRtb2RhbFByb21wdFxuICAgICAgICAgICAgLnJlbW92ZUNsYXNzKCd1c2VyLW1vZGFsLXNob3cnKTtcbiAgICB9XG4gICAgXG4gICAgXG4gICAgLy8gY2hlY2sgbG9jYWwgc3RvcmFnZSBmb3IgdXNlclxuICAgIGZ1bmN0aW9uIGNoZWNrU3RvcmFnZSgpIHtcbiAgICAgICAgXG4gICAgICAgIHZhciBzdG9yYWdlID0gTFMuZ2V0RGF0YSgnZGV2LWRhc2gtdXNlcicpO1xuICAgICAgICBcbiAgICAgICAgLy8gaWYgdXNlciBmb3VuZCBpbiBsb2NhbCBzdG9yYWdlLCBnbyBzdHJhaWdodCB0byBncmVldGluZy5cbiAgICAgICAgLy8gb3RoZXJ3aXNlLCBzaG93IG1vZGFsICYgcHJvbXB0IHVzZXIgZm9yIGRldGFpbHNcbiAgICAgICAgaWYgKHN0b3JhZ2UgJiYgc3RvcmFnZS5uYW1lKSB7XG4gICAgICAgICAgICBuYW1lID0gc3RvcmFnZS5uYW1lO1xuICAgICAgICAgICAgZ2l0aHViTmFtZSA9IHN0b3JhZ2UuZ2l0aHViTmFtZTtcbiAgICAgICAgICAgIGRpc3BsYXlNZXNzYWdlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzaG93TW9kYWwoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcblxuICAgIC8vIHJlbmRlciBET00gYW5kIGNhbGwgUmVwb1NlbGVjdC5nZXRSZXBvcygpXG4gICAgZnVuY3Rpb24gZGlzcGxheU1lc3NhZ2UoKSB7XG4gICAgICAgIERPTS4kZ3JlZXRpbmcudGV4dChtYWtlTWVzc2FnZSgpKTtcbiAgICAgICAgUmVwb1NlbGVjdC5nZXRSZXBvcyhnaXRodWJOYW1lKTtcbiAgICB9XG4gICAgXG4gICAgXG4gICAgLy8gcHVibGljIGluaXQgbWV0aG9kXG4gICAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgICAgY2FjaGVEb20oKTtcbiAgICAgICAgXG4gICAgICAgIERPTS4kb3ZlcmxheS5oaWRlKCk7XG4gICAgICAgICQoJ2JvZHknKS5hcHBlbmQoRE9NLiRvdmVybGF5KTsgLy8gdGhlbiBhcHBlbmQgaXQgdG8gRE9NXG4gICAgICAgIFxuICAgICAgICBiaW5kRXZlbnRzKCk7XG4gICAgICAgIFxuICAgICAgICBjaGVja1N0b3JhZ2UoKTtcbiAgICB9XG4gICAgXG4gICAgXG4gICAgLy8gZXhwb3J0IHB1YmxpYyBtZXRob2RzXG4gICAgcmV0dXJuIHtcbiAgICAgICAgaW5pdDogaW5pdFxuICAgIH07XG4gICAgXG59KGpRdWVyeSkpO1xuIiwiLyoganNoaW50IGVzdmVyc2lvbjo2ICovXG4vKiBnbG9iYWxzIHdpbmRvdyAqL1xuXG52YXIgTFMgPSAoZnVuY3Rpb24oKSB7XG5cbiAgIC8qKiBcbiAgICAqIGxvY2FsU3RvcmFnZSBmZWF0dXJlIGRldGVjdCAmIHJldHVybiBsb2NhbCByZWZlcmVuY2VcbiAgICAqIEBwYXJhbSAgICAgICBbbm9uZV1cbiAgICAqIEByZXR1cm5zICAgICBbQk9PTEVBTl0gICBbcmV0dXJucyB0cnVlIGlmIHN0b3JlZCBzdHJpbmcgPT09IHVpZF1cbiAgICAqL1xuICAgdmFyIHN0b3JhZ2UgPSAoZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgdWlkID0gbmV3IERhdGUoKS50b1N0cmluZygpLCAvLyBkYXRlIG11c3QgYmUgYSBzdHJpbmdcbiAgICAgICAgIHN0b3JhZ2UsXG4gICAgICAgICByZXN1bHQ7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgICBzdG9yYWdlID0gd2luZG93LmxvY2FsU3RvcmFnZTtcbiAgICAgICAgIHN0b3JhZ2Uuc2V0SXRlbSh1aWQsIHVpZCk7XG4gICAgICAgICByZXN1bHQgPSBzdG9yYWdlLmdldEl0ZW0odWlkKSA9PT0gdWlkO1xuICAgICAgICAgc3RvcmFnZS5yZW1vdmVJdGVtKHVpZCk7XG4gICAgICAgICByZXR1cm4gcmVzdWx0ICYmIHN0b3JhZ2U7XG4gICAgICB9IGNhdGNoIChleGNlcHRpb24pIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnUHJvYmxlbXohJyk7XG4gICAgICB9XG4gICB9KCkpO1xuXG4gICAvKiogXG4gICAgKiBTdG9yZSBpdGVtIGluIGxvY2FsIHN0b3JhZ2UgaWYgc3RvcmFnZSBleGlzdHNcbiAgICAqIEBwYXJhbSAgICAgICBbc3RyaW5nXSAgICBsb2MgICAgICAgICBbbG9jYWwgc3RvcmFnZSBzdWItbG9jYXRpb25dXG4gICAgKiBAcGFyYW0gICAgICAgW3N0cmluZ10gICAgdmFsICAgICAgICAgW3N0cmluZyB0byBiZSBzdG9yZWRdXG4gICAgKiBAcGFyYW0gICAgICAgW2Z1bmN0aW9uXSAgc3RvcmFnZSAgICAgW2xvY2FsU3RvcmFnZSBmZWF0dXJlIGRldGVjdCAmIGxvY2FsIHJlZl1cbiAgICAqL1xuICAgZnVuY3Rpb24gc2V0RGF0YShsb2MsIHZhbCkge1xuICAgICAgaWYgKHN0b3JhZ2UpIHtcbiAgICAgICAgIHN0b3JhZ2Uuc2V0SXRlbShsb2MsIEpTT04uc3RyaW5naWZ5KHZhbCkpO1xuICAgICAgfVxuICAgfVxuXG4gICAvKiogXG4gICAgKiBHZXQgbG9jYWwgc3RvcmFnZSBpZiBzdG9yYWdlIGV4aXN0c1xuICAgICogQHBhcmFtICAgICAgIFtzdHJpbmddICAgIGxvYyAgICAgICAgIFtsb2NhbCBzdG9yYWdlIHN1Yi1sb2NhdGlvbl1cbiAgICAqIEBwYXJhbSAgICAgICBbZnVuY3Rpb25dICBzdG9yYWdlICAgICBbbG9jYWxTdG9yYWdlIGZlYXR1cmUgZGV0ZWN0ICYgbG9jYWwgcmVmXVxuICAgICogQHJldHVybnMgICAgIFtKU09OIHN0cmluZ10gICAgICAgICAgIFtmZXRjaCBzdG9yZWQgc3RyaW5nLCByZXR1cm4gSlNPTl1cbiAgICAqL1xuICAgZnVuY3Rpb24gZ2V0RGF0YShsb2MpIHtcbiAgICAgIGlmIChzdG9yYWdlKSB7XG4gICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShzdG9yYWdlLmdldEl0ZW0obG9jKSk7XG4gICAgICB9XG4gICB9XG5cbiAgIC8qKiBcbiAgICAqIERlbGV0ZSBBTEwga2V5cyBmcm9tIGxvY2FsIHN0b3JhZ2UgaWYgcGFzc1xuICAgICogQHBhcmFtICAgICAgIFtmdW5jdGlvbl0gIHN0b3JhZ2UgICAgIFtsb2NhbFN0b3JhZ2UgZmVhdHVyZSBkZXRlY3QgJiBsb2NhbCByZWZdXG4gICAgKiBAcmV0dXJucyAgICAgW2Z1bmN0aW9uXSAgLmNsZWFyICAgICAgW3dpcGVzIGxvY2FsIHN0b3JhZ2VdXG4gICAgKi9cbiAgIGZ1bmN0aW9uIGNsZWFyRGF0YSgpIHtcbiAgICAgIGlmIChzdG9yYWdlKSB7XG4gICAgICAgICByZXR1cm4gc3RvcmFnZS5jbGVhcigpO1xuICAgICAgfVxuICAgfVxuXG4gICAvKiogXG4gICAgKiBEZWxldGUgT05FIGtleSBmcm9tIGxvY2FsIHN0b3JhZ2UgaWYgcGFzc1xuICAgICogQHBhcmFtICAgICAgIFtzdHJpbmddICAgIGxvYyAgICAgICAgIFt0aGUga2V5IHRvIGRlbGV0ZSBmcm9tIGxvY2FsU3RvcmFnZV1cbiAgICAqIEBwYXJhbSAgICAgICBbZnVuY3Rpb25dICBzdG9yYWdlICAgICBbbG9jYWxTdG9yYWdlIGZlYXR1cmUgZGV0ZWN0ICYgbG9jYWwgcmVmXVxuICAgICogQHJldHVybnMgICAgIFtmdW5jdGlvbl0gIC5jbGVhciAgICAgIFt3aXBlcyBsb2NhbCBzdG9yYWdlXVxuICAgICovXG4gICBmdW5jdGlvbiBkZWxldGVEYXRhKGxvYykge1xuICAgICAgaWYgKHN0b3JhZ2UpIHtcbiAgICAgICAgIHJldHVybiBzdG9yYWdlLnJlbW92ZUl0ZW0obG9jKTtcbiAgICAgIH1cbiAgIH1cblxuICAgcmV0dXJuIHtcbiAgICAgIHNldERhdGE6IHNldERhdGEsXG4gICAgICBnZXREYXRhOiBnZXREYXRhLFxuICAgICAgZGVsZXRlRGF0YTogZGVsZXRlRGF0YSxcbiAgICAgIGNsZWFyRGF0YTogY2xlYXJEYXRhXG4gICB9O1xuXG59KCkpO1xuIiwiLyoganNoaW50IGVzdmVyc2lvbjo2ICovXG4vKiBnbG9iYWxzIGpRdWVyeSwgZG9jdW1lbnQgKi9cblxudmFyIFJlbmRlclRhYmxlID0gKGZ1bmN0aW9uICgkKSB7XG5cbiAgICB2YXIgRE9NID0ge307XG4gICAgXG4gICAgXG4gICAgLy8gY2FjaGUgRE9NIGVsZW1lbnRzXG4gICAgZnVuY3Rpb24gY2FjaGVEb20oKSB7XG4gICAgICAgIERPTS4kdGFibGVDb250YWluZXIgPSAkKCcudGFibGUtY29udGFpbmVyJyk7XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICAvLyBmb3JtYXQgZGF0ZXNcbiAgICBmdW5jdGlvbiBmb3JtYXREYXRlKGRhdGUpIHtcblxuICAgICAgICByZXR1cm4gbmV3IERhdGUoZGF0ZSkgICAgIC8vIG1ha2UgZGF0ZSBvYmplY3QgZm9yIGRheSAmIG1vbnRoIGFiYnJldlxuICAgICAgICAgICAgLnRvRGF0ZVN0cmluZygpICAgICAgIC8vIGNvbnZlcnQgb2JqZWN0IHRvIGEgc3RyaW5nXG4gICAgICAgICAgICAuc2xpY2UoMCwgMTUpICAgICAgICAgLy8gcmVtb3ZlIGV2ZXJ5dGhpbmcgYWZ0ZXIgdGhlIFlZWVlcbiAgICAgICAgICAgIC5yZXBsYWNlKC8gMC9nLCAnICcpOyAvLyByZW1vdmUgbGVhZGluZyB6ZXJvcyAoZXguICcwNCcgPT4gJzQnKVxuICAgIH1cblxuXG4gICAgLy8gcHVibGljIHJlbmRlciBtZXRob2QgY2FsbHMgY2F0ZWdvcnkgcmVuZGVyZXJzIGlmIGNhdGVnb3J5IGhhcyBldmVudHNcbiAgICBmdW5jdGlvbiByZW5kZXIoY29tbWl0RXZlbnRzLCB0b2RvRXZlbnRzLCBtZXJnZUV2ZW50cykge1xuXG4gICAgICAgIC8vIGNsZWFyIHByZXZpb3VzIHJlc3VsdHNcbiAgICAgICAgRE9NLiR0YWJsZUNvbnRhaW5lclxuICAgICAgICAgICAgLmVtcHR5KCk7XG4gICAgICAgIFxuICAgICAgICBpZiAoY29tbWl0RXZlbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHJlbmRlckNvbW1pdEV2ZW50cyhjb21taXRFdmVudHMpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRvZG9FdmVudHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmVuZGVyVG9kb0V2ZW50cyh0b2RvRXZlbnRzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChtZXJnZUV2ZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZW5kZXJNZXJnZUV2ZW50cyhtZXJnZUV2ZW50cyk7XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIC8vIHJlbmRlciBjb21taXQgZXZlbnRzXG4gICAgZnVuY3Rpb24gcmVuZGVyQ29tbWl0RXZlbnRzKGVzKSB7XG5cbiAgICAgICAgLy8gcmVjZWl2ZXMgUHVzaEV2ZW50ICYgQ29tbWl0Q29tbWVudEV2ZW50IGV2ZW50IHR5cGVzXG5cbiAgICAgICAgdmFyICRsaXN0Q29udGFpbmVyID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSksXG4gICAgICAgICAgICAkY29sdW1uICAgICAgID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSksXG4gICAgICAgICAgICAkbGlzdCAgICAgICAgID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpKTtcblxuICAgICAgICBlcy5mb3JFYWNoKGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZXZ0KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyICRsaXN0SXRlbSAgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJykpLFxuICAgICAgICAgICAgICAgICRpbWcgICAgICAgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpKSxcbiAgICAgICAgICAgICAgICAkcGFyYWdyYXBoID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJykpLFxuICAgICAgICAgICAgICAgICRwYXJhU3BhbiAgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKSksXG4gICAgICAgICAgICAgICAgJGEgICAgICAgICA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgJGFcbiAgICAgICAgICAgICAgICAuYXR0cigndGFyZ2V0JywgJ19ibGFuaycpO1xuXG4gICAgICAgICAgICBpZiAoZXZ0LnR5cGUgPT09ICdQdXNoRXZlbnQnKSB7XG5cbiAgICAgICAgICAgICAgICAvLyB3aGVuIGl0J3MgYSBwdXNoIGV2ZW50LCBleHRyYWN0IHRoZSBjb21taXRzXG4gICAgICAgICAgICAgICAgZXZ0LnBheWxvYWQuY29tbWl0cy5mb3JFYWNoKGZ1bmN0aW9uIChjb21taXQpIHtcblxuICAgICAgICAgICAgICAgICAgICAvLyBjb252ZXJ0IGNvbW1pdCBVUkwgaW50byByZWd1bGFyIGdpdGh1Yi5jb20gVVJMXG4gICAgICAgICAgICAgICAgICAgIC8vIGZyb206IGh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3Mve3VzZXJ9L3tyZXBvfS9jb21taXRzL3tzaGF9XG4gICAgICAgICAgICAgICAgICAgIC8vICAgdG86IGh0dHBzOi8vZ2l0aHViLmNvbS97dXNlcn0ve3JlcG99L2NvbW1pdC97c2hhfVxuICAgICAgICAgICAgICAgICAgICB2YXIgY2xlYW5VcmwgPSAoY29tbWl0LnVybClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXC9cXC9hcGkuLywgJ1xcL1xcLycpICAgIC8vIHJlbW92ZSAnYXBpLidcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXC9yZXBvc1xcLy8sICdcXC8nKSAgICAgLy8gcmVtb3ZlICdyZXBvcy8nXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvY29tbWl0cy8sICdjb21taXQnKTsgIC8vIHNpbmd1bGFyICdjb21taXQnXG5cbiAgICAgICAgICAgICAgICAgICAgJGltZ1xuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3NyYycsIGV2dC5hdmF0YXIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kVG8oJGxpc3RJdGVtKTtcblxuICAgICAgICAgICAgICAgICAgICAkYVxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2hyZWYnLCBjbGVhblVybClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5odG1sKGA8c3BhbiBjbGFzcz1cImJvbGRlclwiPiR7KGNvbW1pdC5zaGEpLnNsaWNlKDAsNil9PC9zcGFuPmApO1xuXG4gICAgICAgICAgICAgICAgICAgICRwYXJhU3BhblxuICAgICAgICAgICAgICAgICAgICAgICAgLnRleHQoYFwiJHtjb21taXQubWVzc2FnZX1cImApO1xuXG4gICAgICAgICAgICAgICAgICAgICRwYXJhZ3JhcGhcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoYDxzcGFuIGNsYXNzPVwiYm9sZGVyXCI+JHtldnQuYWN0b3J9PC9zcGFuPiBjb21taXR0ZWQgYCk7XG5cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgfSBlbHNlIHsgLy8gZWxzZSBpdCdzIGEgY29tbWVudFxuXG4gICAgICAgICAgICAgICAgJGltZ1xuICAgICAgICAgICAgICAgICAgICAuYXR0cignc3JjJywgZXZ0LmF2YXRhcilcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZFRvKCRsaXN0SXRlbSk7XG5cbiAgICAgICAgICAgICAgICAkYVxuICAgICAgICAgICAgICAgICAgICAuYXR0cignaHJlZicsIGV2dC5wYXlsb2FkLmNvbW1lbnQuaHRtbF91cmwpXG4gICAgICAgICAgICAgICAgICAgIC5odG1sKGA8c3BhbiBjbGFzcz1cImJvbGRlclwiPiR7KGV2dC5wYXlsb2FkLmNvbW1lbnQuY29tbWl0X2lkKS5zbGljZSgwLDYpfTwvc3Bhbj5gKTtcblxuICAgICAgICAgICAgICAgICRwYXJhU3BhblxuICAgICAgICAgICAgICAgICAgICAudGV4dChgXCIke2V2dC5wYXlsb2FkLmNvbW1lbnQuYm9keX1cImApO1xuXG4gICAgICAgICAgICAgICAgJHBhcmFncmFwaFxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKGA8c3BhbiBjbGFzcz1cImJvbGRlclwiPiR7ZXZ0LmFjdG9yfTwvc3Bhbj4gY29tbWVudGVkIG9uIGApO1xuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICRwYXJhZ3JhcGhcbiAgICAgICAgICAgICAgICAuYXBwZW5kKCRhKVxuICAgICAgICAgICAgICAgIC5hcHBlbmQoYCBvbiAke2Zvcm1hdERhdGUoZXZ0LmRhdGUpfTogYClcbiAgICAgICAgICAgICAgICAuYXBwZW5kKCRwYXJhU3BhbilcbiAgICAgICAgICAgICAgICAuYXBwZW5kVG8oJGxpc3RJdGVtKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgJGxpc3RJdGVtXG4gICAgICAgICAgICAgICAgLmFwcGVuZFRvKCRsaXN0KTtcblxuICAgICAgICB9KTtcblxuICAgICAgICAkbGlzdFxuICAgICAgICAgICAgLmFkZENsYXNzKCdjb2wtbGlzdCcpXG4gICAgICAgICAgICAuYXBwZW5kVG8oJGxpc3RDb250YWluZXIpO1xuICAgICAgICBcbiAgICAgICAgJGNvbHVtblxuICAgICAgICAgICAgLmFkZENsYXNzKCd0YWJsZS1jb2wnKVxuICAgICAgICAgICAgLmFwcGVuZChgPGgzPiR7ZXMubGVuZ3RofSBDb21taXQtUmVsYXRlZCBFdmVudHM8L2gzPmApXG4gICAgICAgICAgICAuYXBwZW5kKCRsaXN0Q29udGFpbmVyKVxuICAgICAgICAgICAgLmFwcGVuZFRvKERPTS4kdGFibGVDb250YWluZXIpO1xuICAgICAgICBcbiAgICB9XG5cblxuICAgIC8vIHJlbmRlciB0b2RvIGV2ZW50c1xuICAgIGZ1bmN0aW9uIHJlbmRlclRvZG9FdmVudHMoZXMpIHtcblxuICAgICAgICAvLyBnZXRzIElzc3Vlc0V2ZW50cywgSXNzdWVDb21tZW50RXZlbnRzLCBQcm9qZWN0RXZlbnRzLFxuICAgICAgICAvLyAgIFByb2plY3RDYXJkRXZlbnRzLCBhbmQgUHJvamVjdENvbHVtbkV2ZW50c1xuXG4gICAgICAgIHZhciAkY29sdW1uID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSksXG4gICAgICAgICAgICAkbGlzdCAgID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpKTtcblxuICAgICAgICBlcy5mb3JFYWNoKGZ1bmN0aW9uIChldnQpIHtcblxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZXZ0KTtcblxuICAgICAgICAgICAgdmFyICRsaXN0SXRlbSAgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJykpLFxuICAgICAgICAgICAgICAgICRpbWcgICAgICAgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpKSxcbiAgICAgICAgICAgICAgICAkcGFyYWdyYXBoID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJykpLFxuICAgICAgICAgICAgICAgICRhICAgICAgICAgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKSk7XG5cbiAgICAgICAgICAgICRpbWdcbiAgICAgICAgICAgICAgICAuYXR0cignc3JjJywgZXZ0LmF2YXRhcilcbiAgICAgICAgICAgICAgICAuYXBwZW5kVG8oJGxpc3RJdGVtKTtcblxuICAgICAgICAgICAgJGEuYXR0cigndGFyZ2V0JywgJ19ibGFuaycpO1xuXG4gICAgICAgICAgICBpZiAoZXZ0LnR5cGUgPT09ICdJc3N1ZXNFdmVudCcpIHtcblxuICAgICAgICAgICAgICAgICRhXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdocmVmJywgZXZ0LnBheWxvYWQuaXNzdWUuaHRtbF91cmwpXG4gICAgICAgICAgICAgICAgICAgIC5odG1sKGA8c3BhbiBjbGFzcz1cImJvbGRlclwiPmlzc3VlICR7ZXZ0LnBheWxvYWQuaXNzdWUubnVtYmVyfTwvc3Bhbj5gKTtcblxuICAgICAgICAgICAgICAgICRwYXJhZ3JhcGhcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChgPHNwYW4gY2xhc3M9XCJib2xkZXJcIj4ke2V2dC5hY3Rvcn08L3NwYW4+ICR7ZXZ0LnBheWxvYWQuYWN0aW9ufSBgKVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCRhKVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKGAgb24gJHtmb3JtYXREYXRlKGV2dC5kYXRlKX06IFwiJHtldnQucGF5bG9hZC5pc3N1ZS50aXRsZX1cImApO1xuXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2dC50eXBlID09PSAnSXNzdWVDb21tZW50RXZlbnQnKSB7XG5cbiAgICAgICAgICAgICAgICAkYVxuICAgICAgICAgICAgICAgICAgICAuYXR0cignaHJlZicsIGV2dC5wYXlsb2FkLmNvbW1lbnQuaHRtbF91cmwpXG4gICAgICAgICAgICAgICAgICAgIC5odG1sKGA8c3BhbiBjbGFzcz1cImJvbGRlclwiPmlzc3VlICR7ZXZ0LnBheWxvYWQuaXNzdWUubnVtYmVyfTwvc3Bhbj5gKTtcblxuICAgICAgICAgICAgICAgICRwYXJhZ3JhcGhcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChgPHNwYW4gY2xhc3M9XCJib2xkZXJcIj4ke2V2dC5hY3Rvcn08L3NwYW4+IGNvbW1lbnRlZCBvbiBgKVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCRhKVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKGAgb24gJHtmb3JtYXREYXRlKGV2dC5kYXRlKX06IFwiJHtldnQucGF5bG9hZC5jb21tZW50LmJvZHl9XCJgKTtcblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAkbGlzdEl0ZW1cbiAgICAgICAgICAgICAgICAuYXBwZW5kKCRwYXJhZ3JhcGgpXG4gICAgICAgICAgICAgICAgLmFwcGVuZFRvKCRsaXN0KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJGxpc3RcbiAgICAgICAgICAgIC5hZGRDbGFzcygnY29sLWxpc3QnKTtcblxuICAgICAgICAkY29sdW1uXG4gICAgICAgICAgICAuYWRkQ2xhc3MoJ3RhYmxlLWNvbCcpXG4gICAgICAgICAgICAuYXBwZW5kKGA8aDM+JHtlcy5sZW5ndGh9IFRvZG8tUmVsYXRlZCBFdmVudHM8L2gzPmApXG4gICAgICAgICAgICAuYXBwZW5kKCRsaXN0KVxuICAgICAgICAgICAgLmFwcGVuZFRvKERPTS4kdGFibGVDb250YWluZXIpO1xuXG4gICAgfVxuXG5cbiAgICAvLyByZW5kZXIgbWVyZ2UgZXZlbnRzXG4gICAgZnVuY3Rpb24gcmVuZGVyTWVyZ2VFdmVudHMoZXMpIHtcblxuICAgICAgICAvLyByZWNlaXZlcyBDcmVhdGVFdmVudCwgUHVsbFJlcXVlc3RFdmVudCwgUHVsbFJlcXVlc3RSZXZpZXdFdmVudFxuICAgICAgICAvLyAgIGFuZCBQdWxsUmVxdWVzdFJldmlld0NvbW1lbnRFdmVudCBldmVudCB0eXBlc1xuXG4gICAgICAgIHZhciAkY29sdW1uID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSksXG4gICAgICAgICAgICAkbGlzdCAgID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpKSxcbiAgICAgICAgICAgIGNsZWFuVXJsO1xuXG4gICAgICAgIGVzLmZvckVhY2goZnVuY3Rpb24gKGV2dCkge1xuXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhldnQpO1xuXG4gICAgICAgICAgICB2YXIgJGxpc3RJdGVtICA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKSksXG4gICAgICAgICAgICAgICAgJGltZyAgICAgICA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJykpLFxuICAgICAgICAgICAgICAgICRwYXJhZ3JhcGggPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKSksXG4gICAgICAgICAgICAgICAgJGEgICAgICAgICA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpKTtcblxuICAgICAgICAgICAgJGltZy5hdHRyKCdzcmMnLCBldnQuYXZhdGFyKTtcblxuICAgICAgICAgICAgJGEuYXR0cigndGFyZ2V0JywgJ19ibGFuaycpO1xuXG4gICAgICAgICAgICBpZiAoZXZ0LnR5cGUgPT09ICdDcmVhdGVFdmVudCcpIHtcblxuICAgICAgICAgICAgICAgICRwYXJhZ3JhcGhcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChbXG4gICAgICAgICAgICAgICAgICAgICAgICBgPHNwYW4gY2xhc3M9XCJib2xkZXJcIj4ke2V2dC5hY3Rvcn08L3NwYW4+YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICdjcmVhdGVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2dC5wYXlsb2FkLnJlZl90eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgYDxzcGFuIGNsYXNzPVwiYm9sZGVyXCI+JHtldnQucGF5bG9hZC5yZWZ9PC9zcGFuPmAsXG4gICAgICAgICAgICAgICAgICAgICAgICAnb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0RGF0ZShldnQuZGF0ZSlcbiAgICAgICAgICAgICAgICAgICAgXS5qb2luKCcgJykpO1xuXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2dC50eXBlID09PSAnUHVsbFJlcXVlc3RFdmVudCcpIHtcblxuICAgICAgICAgICAgICAgIC8vIGZyb206IGh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3MvYmVsY3Vydi9tZWVya2F0X21vbWVudHVtL3B1bGxzLzExXG4gICAgICAgICAgICAgICAgLy8gICB0bzogaHR0cHM6Ly9naXRodWIuY29tL2JlbGN1cnYvbWVlcmthdF9tb21lbnR1bS9wdWxsLzExXG4gICAgICAgICAgICAgICAgY2xlYW5VcmwgPSAoZXZ0LnBheWxvYWQucHVsbF9yZXF1ZXN0LnVybClcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcL1xcL2FwaS4vLCAnXFwvXFwvJykgIC8vIHJlbW92ZSAnYXBpLidcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcL3JlcG9zXFwvLywgJ1xcLycpICAgLy8gcmVtb3ZlICdyZXBvcy8nXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9wdWxscy8sICdwdWxsJyk7ICAgIC8vIHNpbmd1bGFyICdwdWxsJ1xuXG4gICAgICAgICAgICAgICAgJGFcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2hyZWYnLCBjbGVhblVybClcbiAgICAgICAgICAgICAgICAgICAgLmh0bWwoYDxzcGFuIGNsYXNzPVwiYm9sZGVyXCI+cHVsbCByZXF1ZXN0ICR7ZXZ0LnBheWxvYWQucHVsbF9yZXF1ZXN0Lm51bWJlcn08L3NwYW4+YCk7XG5cbiAgICAgICAgICAgICAgICAkcGFyYWdyYXBoXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoYDxzcGFuIGNsYXNzPVwiYm9sZGVyXCI+JHtldnQuYWN0b3J9PC9zcGFuPmApXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoYCAke2V2dC5wYXlsb2FkLmFjdGlvbn0gYClcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkYSlcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChgIG9uICR7Zm9ybWF0RGF0ZShldnQuZGF0ZSl9YCk7XG5cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZ0LnR5cGUgPT09ICdQdWxsUmVxdWVzdFJldmlld0V2ZW50Jykge1xuXG4gICAgICAgICAgICAgICAgJGFcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2hyZWYnLCBldnQucGF5bG9hZC5wdWxsX3JlcXVlc3QuaHRtbF91cmwpXG4gICAgICAgICAgICAgICAgICAgIC50ZXh0KGV2dC5wYXlsb2FkLnB1bGxfcmVxdWVzdC50aXRsZSk7XG5cbiAgICAgICAgICAgICAgICAkcGFyYWdyYXBoXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoW1xuICAgICAgICAgICAgICAgICAgICAgICAgZXZ0LmFjdG9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXZ0LnBheWxvYWQuYWN0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3JldmlldyBvZiAnXG4gICAgICAgICAgICAgICAgICAgIF0uam9pbignICcpKVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCRhKVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCcgb24nICsgZm9ybWF0RGF0ZShldnQuZGF0ZSkpO1xuXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2dC50eXBlID09PSAnUHVsbFJlcXVlc3RSZXZpZXdDb21tZW50RXZlbnQnKSB7XG5cbiAgICAgICAgICAgICAgICAkYVxuICAgICAgICAgICAgICAgICAgICAuYXR0cignaHJlZicsIGV2dC5wYXlsb2FkLmNvbW1lbnQuaHRtbF91cmwpXG4gICAgICAgICAgICAgICAgICAgIC50ZXh0KGV2dC5wYXlsb2FkLmNvbW1lbnQuYm9keSk7XG5cbiAgICAgICAgICAgICAgICAkcGFyYWdyYXBoXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoW1xuICAgICAgICAgICAgICAgICAgICAgICAgYDxzcGFuIGNsYXNzPVwiYm9sZGVyXCI+JHtldnQuYWN0b3J9PC9zcGFuPmAsXG4gICAgICAgICAgICAgICAgICAgICAgICBldnQucGF5bG9hZC5hY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAncHVsbCByZXF1ZXN0IGNvbW1lbnQgJ1xuICAgICAgICAgICAgICAgICAgICBdLmpvaW4oJyAnKSlcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkYSlcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgnIG9uJyArIGZvcm1hdERhdGUoZXZ0LmRhdGUpKTtcblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAkbGlzdEl0ZW1cbiAgICAgICAgICAgICAgICAuYXBwZW5kKCRpbWcpXG4gICAgICAgICAgICAgICAgLmFwcGVuZCgkcGFyYWdyYXBoKVxuICAgICAgICAgICAgICAgIC5hcHBlbmRUbygkbGlzdCk7XG5cbiAgICAgICAgfSk7XG5cbiAgICAgICAgJGxpc3RcbiAgICAgICAgICAgIC5hZGRDbGFzcygnY29sLWxpc3QnKTtcblxuICAgICAgICAkY29sdW1uXG4gICAgICAgICAgICAuYWRkQ2xhc3MoJ3RhYmxlLWNvbCcpXG4gICAgICAgICAgICAuYXBwZW5kKGA8aDM+JHtlcy5sZW5ndGh9IE1lcmdlLVJlbGF0ZWQgRXZlbnRzPC9oMz5gKVxuICAgICAgICAgICAgLmFwcGVuZCgkbGlzdClcbiAgICAgICAgICAgIC5hcHBlbmRUbyhET00uJHRhYmxlQ29udGFpbmVyKTtcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIC8vIHB1YmxpYyBpbml0IG1ldGhvZFxuICAgIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICAgIGNhY2hlRG9tKCk7XG4gICAgfVxuXG5cbiAgICAvLyByZXR1cm4gcHVibGljIG1ldGhvZHNcbiAgICByZXR1cm4ge1xuICAgICAgICBpbml0OiBpbml0LFxuICAgICAgICByZW5kZXI6IHJlbmRlclxuICAgIH07XG5cbn0oalF1ZXJ5KSk7XG4iLCIvKiBOb3RlOiB0aGUgY2hhcnQgaXMgT05MWSByZW5kZXJlZCB3aGVuIGV2ZW50cyBvY2N1ciBvbiBtb3JlIHRoYW4gMSBkYXlcbiAqIElmIHRoZXkgYWxsIG9jY3VyIG9uIHRoZSBzYW1lIGRheSwgdGhlIGNoYXJ0IHdvdWxkIGp1c3QgYmUgMSBwb2ludCEgKi9cblxuLyoganNoaW50IGVzdmVyc2lvbjo2ICovXG4vKiBnbG9iYWxzIGpRdWVyeSwgY29uc29sZSwgZG9jdW1lbnQgKi9cblxudmFyIFJlbmRlckNoYXJ0ID0gKGZ1bmN0aW9uICgkKSB7XG5cbiAgICB2YXIgXG4gICAgICAgIC8vIHBsYWNlaG9sZGVyIG9iamVjdCBmb3IgY2FjaGVkIERPTSBlbGVtZW50c1xuICAgICAgICBET00gPSB7fSxcbiAgICAgICAgXG4gICAgICAgIC8vIFhNTCBuYW1lc3BhY2UgZm9yIFNWRyBlbGVtZW50c1xuICAgICAgICBucyAgPSAnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLFxuICAgICAgICBcbiAgICAgICAgLy8gY2hhcnQgbGF5b3V0IGF0dHJpYnV0ZXNcbiAgICAgICAgd2lkdGggICA9IDEwMDAsXG4gICAgICAgIGhlaWdodCAgPSA0MDAsXG4gICAgICAgIHhNYXJnaW4gPSA4MCxcbiAgICAgICAgeU1hcmdpbiA9IDQwLFxuICAgICAgICBzcGFjZXIgID0gNDA7XG4gICAgICAgIFxuXG4gICAgLy8gQ2FjaGUgRE9NIGVsZW1lbnRzXG4gICAgZnVuY3Rpb24gY2FjaGVEb20oKSB7XG4gICAgICAgIERPTS4kY29udGFpbmVyID0gJCgnLmNoYXJ0LWNvbnRhaW5lcicpO1xuICAgICAgICBET00uJHN2Z0VsZW0gICA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKG5zLCAnc3ZnJykpO1xuICAgIH1cbiAgICBcbiAgICBcbiAgICAvKiBGb3JtYXQgZGF0ZXNcbiAgICAgKlxuICAgICAqIEBwYXJhbXMgICBbc3RyaW5nXSAgIGRhdGUgICBbc3RyaW5nIGZvcm1hdHRlZCBkYXRlXVxuICAgICAqIEByZXR1cm5zICBbc3RyaW5nXSAgICAgICAgICBbZm9ybWF0dGVkIGRhdGUgc3RyaW5nXVxuICAgICovXG4gICAgZnVuY3Rpb24gZm9ybWF0RGF0ZXMoZGF0ZSkge1xuICAgICAgICByZXR1cm4gbmV3IERhdGUoZGF0ZSkgICAgIC8vIG1ha2UgZGF0ZSBvYmplY3QgZm9yIGRheSAmIG1vbnRoIGFiYnJldlxuICAgICAgICAgICAgLnRvRGF0ZVN0cmluZygpICAgICAgIC8vIGNvbnZlcnQgb2JqZWN0IHRvIGEgc3RyaW5nXG4gICAgICAgICAgICAuc2xpY2UoMCwgMTUpICAgICAgICAgLy8gcmVtb3ZlIGV2ZXJ5dGhpbmcgYWZ0ZXIgdGhlIFlZWVlcbiAgICAgICAgICAgIC5yZXBsYWNlKC8gMC9nLCAnICcpOyAvLyByZW1vdmUgbGVhZGluZyB6ZXJvcyAoZXguICcwNCcgPT4gJzQnKVxuICAgIH1cblxuXG4gICAgLy8gVGVhY2ggRGF0ZSBhIG5ldyBtZXRob2RcbiAgICBEYXRlLnByb3RvdHlwZS5hZGREYXlzID0gZnVuY3Rpb24oZGF5cykge1xuICAgICAgICB2YXIgZGF0ID0gbmV3IERhdGUodGhpcy52YWx1ZU9mKCkpO1xuICAgICAgICBkYXQuc2V0RGF0ZShkYXQuZ2V0RGF0ZSgpICsgZGF5cyk7XG4gICAgICAgIHJldHVybiBkYXQ7XG4gICAgfTtcbiAgICBcblxuICAgIC8qIEJ1aWxkIGRhdGUgcmFuZ2VcbiAgICAgKlxuICAgICAqIEBwYXJhbXMgICBbYXJyYXldICAgZXZlbnRzICAgW3NvcnRlZCBhcnJheSBvZiBldmVudHNdXG4gICAgICogQHJldHVybnMgIFthcnJheV0gICAgICAgICAgICBbcmFuZ2Ugb2YgZGF0ZXMgZnJvbSBlYXJsaWVzdCA+IHJlY2VudF1cbiAgICAqL1xuICAgIGZ1bmN0aW9uIGJ1aWxkRGF0ZVJhbmdlKGV2ZW50cykge1xuICAgICAgICBcbiAgICAgICAgdmFyIG5vcm1EYXRlcyAgID0gZXZlbnRzLm1hcCggKGUpID0+IChmb3JtYXREYXRlcyhlLmRhdGUpKSApLFxuICAgICAgICAgICAgc3RhcnREYXRlICAgPSBuZXcgRGF0ZShub3JtRGF0ZXNbMF0pLFxuICAgICAgICAgICAgc3RvcERhdGUgICAgPSBuZXcgRGF0ZShub3JtRGF0ZXNbbm9ybURhdGVzLmxlbmd0aCAtIDFdKSxcbiAgICAgICAgICAgIGRhdGVBcnJheSAgID0gW10sXG4gICAgICAgICAgICBjdXJyZW50RGF0ZSA9IHN0YXJ0RGF0ZTtcbiAgICAgICAgXG4gICAgICAgIHdoaWxlIChjdXJyZW50RGF0ZSA8PSBzdG9wRGF0ZSkge1xuICAgICAgICAgICAgZGF0ZUFycmF5LnB1c2goIGZvcm1hdERhdGVzKGN1cnJlbnREYXRlKSApO1xuICAgICAgICAgICAgY3VycmVudERhdGUgPSBjdXJyZW50RGF0ZS5hZGREYXlzKDEpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZmFuY3kgc3RhdHNcbiAgICAgICAgLy8gY29uc29sZS5sb2coJz09PT09PT09PSBEQVRFIFNQRUNTID09PT09PT09PScpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnRGF5cyBpbiByYW5nZTogJyArIGRhdGVBcnJheS5sZW5ndGgpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnICAgU3RhcnQgZGF0ZTogJyArIHN0YXJ0RGF0ZSk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCcgICAgU3RvcCBkYXRlOiAnICsgc3RvcERhdGUpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGRhdGVBcnJheTtcbiAgICB9XG4gICAgICAgIFxuICAgIFxuICAgIC8qIENhbGN1bGF0ZSBtYXggY2hhcnQgWSBheGlzIHZhbHVlXG4gICAgICogTWF4IFkgaXMgbXVsdGlwbGUgb2YgNSB0byBtYWtlIHRoZSBjaGFydCBsb29rIG5pY2VcbiAgICAgKlxuICAgICAqIEBwYXJhbXMgICBbYXJyYXldICAgcG9pbnRzICAgW3NvcnRlZCBldmVudHMgYXJyYXldXG4gICAgICogQHJldHVybnMgIFtudW1iZXJdICAgICAgICAgICBbY2FsY3VsYXRlZCBtYXggWSBheGlzIHZhbHVlXVxuICAgICovXG4gICAgZnVuY3Rpb24gZ2V0Q2hhcnRZTWF4KHBvaW50cykge1xuICAgICAgICB2YXIgbWF4TnVtRXZ0cyxcbiAgICAgICAgICAgIHF1b3RpZW50O1xuXG4gICAgICAgIG1heE51bUV2dHMgPSBwb2ludHMucmVkdWNlKGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5tYXgoYSwgYlsxXSk7XG4gICAgICAgIH0sIHBvaW50c1swXVsxXSk7XG5cbiAgICAgICAgcXVvdGllbnQgPSBNYXRoLmZsb29yKG1heE51bUV2dHMgLyA0KTtcblxuICAgICAgICAvLyByZXR1cm4gMSBtb3JlIHRoYW4gdGhlIHF1b3RpZW50LCAqIDVcbiAgICAgICAgcmV0dXJuICgocXVvdGllbnQgKyAxKSAqIDQpO1xuICAgIH1cbiAgICBcbiAgICBcbiAgICAvKiBSZWZvcm1hdCBldmVudHMgYXJyYXkgZm9yIGNoYXJ0aW5nLlxuICAgICAqIEFsbCBldmVudHMgYXJlIGFscmVhZHkgdW5pcXVlIGV4Y2VwdCBwdXNoIGV2ZW50cywgYmVjYXVzZSB0aGV5IGNvbnRhaW5cbiAgICAgKiBhcnJheXMgb2YgY29tbWl0cy4gV2UgbWFrZSBlYWNoIGNvbW1pdCBhIHNlcGFyYXRlIGVsZW1lbnQuICBUaGVuXG4gICAgICogZ2V0IG51bSBvZiBldmVudHMgZm9yIGVhY2ggZGF0ZSAoIHNvcnRlZEFyci5maWx0ZXIoKS5sZW5ndGgoKSApLlxuICAgICAqXG4gICAgICogQHBhcmFtcyAgIFthcnJheV0gICBlcyAgIFtyYXcgZXZlbnRzIGFycmF5XVxuICAgICAqIEByZXR1cm5zICBbYXJyYXldICAgICAgICBbYXJyYXkgb2YgZGF0ZSAmIG51bWJlciBvZiBldmVudHNdXG4gICAgKi9cbiAgICBmdW5jdGlvbiBwcmVwYXJlRGF0ZUV2ZW50cyhlcykge1xuXG4gICAgICAgIHZhciBldmVudHMgPSBbXSxcbiAgICAgICAgICAgIHNvcnRlZEV2ZW50cyxcbiAgICAgICAgICAgIGRhdGVBcnJheSxcbiAgICAgICAgICAgIGNoYXJ0RGF0YSA9IFtdO1xuICAgICAgICBcbiAgICAgICAgZXMuZm9yRWFjaChmdW5jdGlvbiAoZXZ0KSB7XG5cbiAgICAgICAgICAgIC8vICBjb25zb2xlLmxvZyhldnQpOyAgLy8gZGlhZ1xuXG4gICAgICAgICAgICBpZiAoZXZ0LnR5cGUgPT09ICdQdXNoRXZlbnQnKSB7XG5cbiAgICAgICAgICAgICAgICAvLyB3aGVuIGl0J3MgYSBwdXNoIGV2ZW50LCBleHRyYWN0IHRoZSBjb21taXRzXG4gICAgICAgICAgICAgICAgZXZ0LnBheWxvYWQuY29tbWl0cy5mb3JFYWNoKGZ1bmN0aW9uIChjb21taXQpIHtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50cy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdG9yOiBldnQuYWN0b3IsXG4gICAgICAgICAgICAgICAgICAgICAgICBhdmF0YXI6IGV2dC5hdmF0YXIsXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiBldnQuZGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBheWxvYWQ6IGNvbW1pdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiQ29tbWl0XCJcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZXZlbnRzLnB1c2goZXZ0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgIC8vIHNvcnQgZXZlbnRzIGFzY2VuZGluZ1xuICAgICAgICBzb3J0ZWRFdmVudHMgPSBldmVudHMuc29ydCggKGEsIGIpID0+IG5ldyBEYXRlKGEuZGF0ZSkgLSBuZXcgRGF0ZShiLmRhdGUpICk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHNvcnRlZEV2ZW50cyk7IC8vIG9rXG4gICAgICAgIFxuICAgICAgICAvLyBnZXQgYXJyYXkgb2YgYWxsIGRhdGVzIGluIHJhbmdlXG4gICAgICAgIGRhdGVBcnJheSA9IGJ1aWxkRGF0ZVJhbmdlKHNvcnRlZEV2ZW50cyk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGRhdGVBcnJheSk7XG4gICAgICAgIFxuICAgICAgICAvLyBidWlsZCBhcnJheSBvZiBkYXRhIHBvaW50czogW2RhdGUsICNldmVudHMgcGVyIGRhdGVdXG4gICAgICAgIGNoYXJ0RGF0YSA9IGRhdGVBcnJheS5tYXAoZnVuY3Rpb24gKGRhdGUpIHtcbiAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gdGhlIGRhdGUsIGFzIE1vbnRoIGFuZCBEYXlcbiAgICAgICAgICAgICAgICBkYXRlLnNsaWNlKDMsIDEwKSxcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBudW1iZXIgb2YgZXZlbnRzIHBlciBkYXRlXG4gICAgICAgICAgICAgICAgc29ydGVkRXZlbnRzLmZpbHRlciggKHgpID0+IGZvcm1hdERhdGVzKHguZGF0ZSkgPT09IGRhdGUgKS5sZW5ndGhcbiAgICAgICAgICAgIF07ICAgICAgICAgICAgXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGNoYXJ0RGF0YTtcbiAgICB9XG4gICAgXG4gICAgXG4gICAgLyogY2hlY2sgaWYgYWxsIGV2ZW50cyBvY2N1ciBvbiB0aGUgc2FtZSBkYXlcbiAgICAgKlxuICAgICAqIEBwYXJhbXMgICBbYXJyYXldICAgcG9pbnRzQXJyICAgW2V2ZW50cyBjb29yZGluYXRlIGRhdGEgcG9pbnRzXVxuICAgICAqIEByZXV0cm5zICBbYm9vbGVhbl0gICAgICAgICAgICAgW3JldCB0cnVlIGlmIGFsbCBldmVudHMgb24gMSBkYXldXG4gICAgKi9cbiAgICBmdW5jdGlvbiBzYW1lRGFtbkRheShwb2ludHNBcnIpIHtcbiAgICAgICAgcmV0dXJuIHBvaW50c0Fyci5sZW5ndGggPT09IDE7XG4gICAgfVxuICAgIFxuICAgIC8qIGdlbmVyYXRlIGZvcm1hdHRlZCBwb2ludHMgYXJyYXlcbiAgICAgKlxuICAgICAqIEBwYXJhbXMgICBbYXJyYXldICAgIHBvaW50cyAgICAgIFthcnJheSBvZiBjb29yZGluYXRlIHBvaW50c11cbiAgICAgKiBAcGFyYW1zICAgW251bWJlcl0gICB4TXVsdGlwbGUgICBbbXVsdGlwbGllciB0byBzY2FsZSBjb29yZHNdXG4gICAgICogQHBhcmFtcyAgIFtudW1iZXJdICAgeU11bHRpcGxlICAgW211bHRpcGxpZXIgdG8gc2NhbGUgY29vcmRzXVxuICAgICAqIEByZXR1cm5zICBbYXJyYXldICAgXG4gICAgKi9cbiAgICBmdW5jdGlvbiBnZW5Gb3JtYXR0ZWRQb2ludHMocG9pbnRzLCB4TXVsdGlwbGUsIHlNdWx0aXBsZSkge1xuICAgICAgICByZXR1cm4gcG9pbnRzLm1hcChmdW5jdGlvbihwb2ludCwgaW5kKSB7XG4gICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgIChpbmQgKiB4TXVsdGlwbGUpICsgeE1hcmdpbixcbiAgICAgICAgICAgICAgICAoaGVpZ2h0IC0gKHBvaW50WzFdICogeU11bHRpcGxlKSkgLSB5TWFyZ2luXG4gICAgICAgICAgICBdO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgXG4gICAgLyogZ2VuZXJhdGUgY2hhcnQgcG9pbnRzXG4gICAgICpcbiAgICAgKiBAcGFyYW1zICBbYXJyYXldICAgIHBvaW50cyAgW2FycmF5IG9mIGNvb3JkaW5hdGUgcG9pbnRzXVxuICAgICAqIEByZXR1cm5zIFtvYmplY3RdICAgICAgICAgICBbPGc+cm91cCBvZiA8Y2lyY2xlPiBlbGVtZW50c11cbiAgICAqL1xuICAgIGZ1bmN0aW9uIGdlbmVyYXRlQ2lyY2xlcyhwb2ludHMpIHtcblxuICAgICAgICAvLyBpbml0IHZhcnNcbiAgICAgICAgdmFyIGdyb3VwID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMobnMsICdnJykpLFxuICAgICAgICAgICAgY3VycmVudFBvaW50LFxuICAgICAgICAgICAgbnVtUG9pbnRzID0gcG9pbnRzLmxlbmd0aCAtIDEsXG4gICAgICAgICAgICBjaGFydFlNYXggPSBnZXRDaGFydFlNYXgocG9pbnRzKSxcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gbXVsdGlwbGllcnMgc2NhbGUgdGhlIG91dHB1dCB4ICYgeSBjb29yZHNcbiAgICAgICAgICAgIHhNdWx0aXBsZSA9ICh3aWR0aCAtIHhNYXJnaW4gLSBzcGFjZXIpIC8gbnVtUG9pbnRzLFxuICAgICAgICAgICAgeU11bHRpcGxlID0gKGhlaWdodCAtIHlNYXJnaW4gLSBzcGFjZXIpIC8gY2hhcnRZTWF4LFxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBmb3JtYXQgdmFsdWVzIHRvIGFsaWduIHdpdGggY2hhcnQgZXh0ZW50c1xuICAgICAgICAgICAgZm9ybWF0dGVkUG9pbnRzID0gZ2VuRm9ybWF0dGVkUG9pbnRzKHBvaW50cywgeE11bHRpcGxlLCB5TXVsdGlwbGUpO1xuICAgICAgICBcbiAgICAgICAgLy8gbG9vcCB0aHJvdWdoIHBvaW50cyBhcnJheSBhcHBlbmRpbmcgY2lyY2xlcyB0byBncm91cFxuICAgICAgICBmb3JtYXR0ZWRQb2ludHMuZm9yRWFjaChmdW5jdGlvbiAocG9pbnQsIGluZCkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIgY2lyY2xlID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMobnMsICdjaXJjbGUnKSksXG4gICAgICAgICAgICAgICAgdGl0bGUgID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMobnMsICd0aXRsZScpKSxcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyA8Y2lyY2xlPiB3YW50cyBhdHRyczogY3gsIGN5LCByXG4gICAgICAgICAgICAgICAgY3ggPSBwb2ludFswXSxcbiAgICAgICAgICAgICAgICBjeSA9IHBvaW50WzFdLFxuICAgICAgICAgICAgICAgIHIgID0gNDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY2lyY2xlXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2N4JywgY3gpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2N5JywgY3kpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ3InLCByKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gPHRpdGxlPiBhZGRzICd0b29sIHRpcCcgb24gaG92ZXJcbiAgICAgICAgICAgIHRpdGxlLnRleHQocG9pbnRzW2luZF1bMF0gKyAnICgnICsgcG9pbnRzW2luZF1bMV0gKyAnIGV2ZW50cyknKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gYXBwZW5kIHRpdGxlIHRvIGNpcmNsZVxuICAgICAgICAgICAgY2lyY2xlLmFwcGVuZCh0aXRsZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIGFwcGVuZCBjaXJjbGUgdG8gZ3JvdXBcbiAgICAgICAgICAgIGdyb3VwXG4gICAgICAgICAgICAgICAgLmFkZENsYXNzKCdjaGFydC1jaXJjbGUnKVxuICAgICAgICAgICAgICAgIC5hcHBlbmQoY2lyY2xlKTsgXG5cbiAgICAgICAgfSk7XG4gICAgXG4gICAgcmV0dXJuIGdyb3VwO1xuICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICAvKiBnZW5lcmF0ZSBjaGFydCBsaW5lXG4gICAgICpcbiAgICAgKiBAcGFyYW1zICBbYXJyYXldICAgIHBvaW50cyAgW2FycmF5IG9mIGNvb3JkaW5hdGUgcG9pbnRzXVxuICAgICAqIEByZXR1cm5zIFtvYmplY3RdICAgICAgICAgICBbPGc+cm91cCBvZiA8bGluZT4gc2VnbWVudHNdXG4gICAgKi9cbiAgICBmdW5jdGlvbiBnZW5lcmF0ZUxpbmVzKHBvaW50cykge1xuICAgICAgICBcbiAgICAgICAgLy8gaW5pdCB2YXJzXG4gICAgICAgIHZhciBncm91cCA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKG5zLCAnZycpKSxcbiAgICAgICAgICAgIGN1cnJlbnRQb2ludCxcbiAgICAgICAgICAgIGksXG4gICAgICAgICAgICBsaW5lLFxuICAgICAgICAgICAgbnVtUG9pbnRzID0gcG9pbnRzLmxlbmd0aCAtIDEsXG4gICAgICAgICAgICBjaGFydFlNYXggPSBnZXRDaGFydFlNYXgocG9pbnRzKSxcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gbXVsdGlwbGllcnMgc2NhbGUgdGhlIG91dHB1dCB4ICYgeSBjb29yZHNcbiAgICAgICAgICAgIHhNdWx0aXBsZSA9ICh3aWR0aCAtIHhNYXJnaW4gLSBzcGFjZXIpIC8gbnVtUG9pbnRzLFxuICAgICAgICAgICAgeU11bHRpcGxlID0gKGhlaWdodCAtIHlNYXJnaW4gLSBzcGFjZXIpIC8gY2hhcnRZTWF4LFxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBmb3JtYXQgdmFsdWVzIHRvIGFsaWduIHdpdGggY2hhcnQgZXh0ZW50c1xuICAgICAgICAgICAgZm9ybWF0dGVkUG9pbnRzID0gZ2VuRm9ybWF0dGVkUG9pbnRzKHBvaW50cywgeE11bHRpcGxlLCB5TXVsdGlwbGUpO1xuICAgICAgICBcbiAgICAgICAgLy8gbG9vcCB0aHJvdWdoIHBvaW50cyBhcnJheSBhcHBlbmRpbmcgbGluZXMgdG8gZ3JvdXBcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGZvcm1hdHRlZFBvaW50cy5sZW5ndGggLSAxOyBpICs9IDEpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbGluZSA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKG5zLCAnbGluZScpKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gZGVzY3JpYmUgPGxpbmU+XG4gICAgICAgICAgICBsaW5lXG4gICAgICAgICAgICAgICAgLmF0dHIoJ3gxJywgZm9ybWF0dGVkUG9pbnRzW2ldWzBdKVxuICAgICAgICAgICAgICAgIC5hdHRyKCd5MScsIGZvcm1hdHRlZFBvaW50c1tpXVsxXSlcbiAgICAgICAgICAgICAgICAuYXR0cigneDInLCBmb3JtYXR0ZWRQb2ludHNbaSArIDFdWzBdKVxuICAgICAgICAgICAgICAgIC5hdHRyKCd5MicsIGZvcm1hdHRlZFBvaW50c1tpICsgMV1bMV0pO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gYXBwZW5kIDxsaW5lPiB0byA8Zz5yb3VwXG4gICAgICAgICAgICBncm91cFxuICAgICAgICAgICAgICAgIC5hZGRDbGFzcygnY2hhcnQtbGluZScpXG4gICAgICAgICAgICAgICAgLmFwcGVuZChsaW5lKTtcbiAgICAgICAgfVxuICAgIFxuICAgIHJldHVybiBncm91cDtcbiAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgLyogZ2VuZXJhdGUgYXhpcyBsYWJlbHNcbiAgICAgKlxuICAgICAqIEBwYXJhbXMgIFthcnJheV0gICAgcG9pbnRzICBbYXJyYXkgb2YgY29vcmRpbmF0ZSBwb2ludHNdXG4gICAgICogQHBhcmFtcyAgW3N0cmluZ10gICBheGlzICAgIFsneScgb3IgJ3gnIHNwZWNpZmllcyBjb25kaXRpb25hbCBwYXRoXVxuICAgICAqIEByZXR1cm5zIFtvYmplY3RdICAgICAgICAgICBbPGc+cm91cCBvZiBheGlzIDxsaW5lPiBhbmQgPHRleHQ+IGVsc11cbiAgICAqL1xuICAgIGZ1bmN0aW9uIGdlbkF4aXNMYWJlbHMocG9pbnRzLCBheGlzKSB7XG4gICAgICAgIFxuICAgICAgICB2YXIgZ3JvdXAgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhucywgJ2cnKSksXG4gICAgICAgICAgICBsaW5lLCAvLyBwbGFjZWhvbGRlciBmb3IgPGxpbmU+IGVsZW1lbnQgYnVpbHQgaW4gbG9vcFxuICAgICAgICAgICAgdGV4dCwgLy8gcGxhY2Vob2xkZXIgZm9yIDx0ZXh0PiBlbGVtZW50IGJ1aWx0IGluIGxvb3BcbiAgICAgICAgICAgIG51bUF4aXNUaWNrcyxcbiAgICAgICAgICAgIHhQb3MsIHhWYWx1ZSwgeE11bHRpcGxlLFxuICAgICAgICAgICAgeVBvcywgeVZhbHVlLCB5U3BhY2luZyxcbiAgICAgICAgICAgIGNoYXJ0WU1heCA9IGdldENoYXJ0WU1heChwb2ludHMpLFxuICAgICAgICAgICAgaTtcbiAgICAgICAgXG4gICAgICAgIC8vIGNvbmRpdGlvbmFsbHkgaGFuZGxlIHBhc3NlZCBheGlzIHBhcmFtXG4gICAgICAgIGlmIChheGlzID09PSAneScpIHtcbiAgICAgICAgICAgIC8vIGFkZCBDU1MgY2xhc3MgdG8gPGc+IGVsZW1lbnRcbiAgICAgICAgICAgIGdyb3VwLmFkZENsYXNzKCdsYWJlbHMgeS1sYWJlbHMnKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gbGltaXQgcXR5IG9mIFkgYXhpcyBsYWJlbHMgYmFzZWQgb24gY2hhcnRZTWF4XG4gICAgICAgICAgICBudW1BeGlzVGlja3MgPSAoY2hhcnRZTWF4ID4gMTIpID8gY2hhcnRZTWF4IC8gNCA6IGNoYXJ0WU1heDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gY2FsY3VsYXRlIHJlbGF0aXZlIHNwYWNlIGJldHdlZW4gZWFjaCBZIGF4aXMgbGFiZWxcbiAgICAgICAgICAgIHlTcGFjaW5nID0gKGhlaWdodCAtIHlNYXJnaW4gLSBzcGFjZXIpIC8gbnVtQXhpc1RpY2tzO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBsb29wIHRocm91Z2ggbnVtQXhpc1RpY2tzLCBnZW5lcmF0ZSA8bGluZT4gYW5kIDx0ZXh0PiBlbGVtZW50cyxcbiAgICAgICAgICAgIC8vIHRoZW4gYXBwZW5kIGVhY2ggb2YgdGhlbSB0byBvdXIgPGc+cm91cFxuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IG51bUF4aXNUaWNrcyArIDE7IGkgKz0gMSkge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSB5IGF4aXMgbGFiZWwgdmFsdWVcbiAgICAgICAgICAgICAgICB5VmFsdWUgPSBpICogY2hhcnRZTWF4IC8gbnVtQXhpc1RpY2tzO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSB5IGF4aXMgbGFiZWwgcG9zaXRpb25cbiAgICAgICAgICAgICAgICB5UG9zID0gaGVpZ2h0IC0geU1hcmdpbiAtICh5U3BhY2luZyAqIGkpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIGNyZWF0ZSBuZXcgPGxpbmU+IGVsZW1lbnRcbiAgICAgICAgICAgICAgICBsaW5lID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMobnMsICdsaW5lJykpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIGFkZCBhdHRyaWJ1dGVzIHRvIDxsaW5lPiBlbGVtZW50XG4gICAgICAgICAgICAgICAgbGluZS5hZGRDbGFzcygnaG9yaXotcnVsZScpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCd4MScsIHhNYXJnaW4pXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCd5MScsIHlQb3MpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCd4MicsICh3aWR0aCAtIHNwYWNlciArIDUpKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cigneTInLCB5UG9zKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBjcmVhdGUgbmV3IDx0ZXh0PiBlbGVtZW50XG4gICAgICAgICAgICAgICAgdGV4dCA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKG5zLCAndGV4dCcpKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBhZGQgYXR0cmlidXRlcyB0byA8dGV4dD4gZWxlbWVudFxuICAgICAgICAgICAgICAgIHRleHRcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3gnLCAoeE1hcmdpbiAtIDIwKSlcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3knLCAoeVBvcyArIDQpKVxuICAgICAgICAgICAgICAgICAgICAuaHRtbCh5VmFsdWUpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGdyb3VwXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQobGluZSlcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCh0ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBncm91cDtcbiAgICAgICAgXG4gICAgICAgIH0gZWxzZSBpZiAoYXhpcyA9PT0gJ3gnIHx8ICFheGlzIHx8IGF4aXMgPT09IG51bGwpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gYWRkIENTUyBjbGFzcyB0byB0aGUgPGc+cm91cFxuICAgICAgICAgICAgZ3JvdXAuYWRkQ2xhc3MoJ2xhYmVscyB4LWxhYmVscycpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBudW1BeGlzVGlja3MgPSBwb2ludHMubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgIHhNdWx0aXBsZSA9ICh3aWR0aCAtIHhNYXJnaW4gLSBzcGFjZXIpIC8gbnVtQXhpc1RpY2tzO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBsb29wIHRocm91Z2ggcG9pbnRzLCBnZW5lcmF0ZSA8bGluZT4gYW5kIDx0ZXh0PiBlbGVtZW50cyxcbiAgICAgICAgICAgIC8vIGFuZCBhcHBlbmQgZWFjaCBvZiB0aGVtIHRvIG91ciA8Zz4gZ3JvdXBcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBwb2ludHMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB0ZXh0ID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMobnMsICd0ZXh0JykpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSB5IGF4aXMgbGFiZWwgdmFsdWVzXG4gICAgICAgICAgICAgICAgeFZhbHVlID0gcG9pbnRzW2ldWzBdO1xuXG4gICAgICAgICAgICAgICAgLy8gY2FsY3VsYXRlIHkgcG9zaXRpb25cbiAgICAgICAgICAgICAgICB4UG9zID0gaSAqIHhNdWx0aXBsZTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBhZGQgYXR0cmlidXRlcyB0byA8dGV4dD4gZWxlbWVudFxuICAgICAgICAgICAgICAgIHRleHRcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3gnLCAoeFBvcyArIHhNYXJnaW4pKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cigneScsIChoZWlnaHQgLSA1KSlcbiAgICAgICAgICAgICAgICAgICAgLnRleHQoeFZhbHVlKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBmb3IgbGFyZ2UgZGF0YXNldHMsIG9ubHkgYXBwZW5kIGV2ZXJ5IDEwdGggZGF0ZVxuICAgICAgICAgICAgICAgIGlmIChwb2ludHMubGVuZ3RoID4gMjApIHtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmIChpID09PSAwIHx8IGkgJSAxMCA9PT0gMCB8fCBpID09PSAocG9pbnRzLmxlbmd0aCAtIDEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0LmFwcGVuZFRvKGdyb3VwKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgIHRleHQuYXBwZW5kVG8oZ3JvdXApO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coeFZhbHVlKTtcblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGdyb3VwO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgIH1cblxuICAgIFxuICAgIC8vIE1BSU4gUkVOREVSRVJcbiAgICAvLyBSZWNlaXZlcyBBTEwgZXZlbnRzIGZyb20gJ2dldC1ldmVudHMuanMnXG4gICAgZnVuY3Rpb24gcmVuZGVyKGV2ZW50cykge1xuICAgICAgICBcbiAgICAgICAgdmFyIHBvaW50cztcbiAgICAgICAgXG4gICAgICAgIC8vIGVtcHR5IHBhcmVudCBTVkcgZWxlbWVudCBiZWZvcmUgZWFjaCByZW5kZXJcbiAgICAgICAgRE9NLiRzdmdFbGVtLmVtcHR5KCk7XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgLy8gYWRkIENTUyBjbGFzcywgbmFtZXNwYWNlIGFuZCBhdHRyaWJ1dGVzIHRvIG1haW4gPHN2Zz4gZWxlbWVudFxuICAgICAgICBET00uJHN2Z0VsZW1cbiAgICAgICAgICAgIC5hZGRDbGFzcygnY2hhcnQtLWNvbnRlbnQnKVxuICAgICAgICAgICAgLmF0dHIoJ2lkJywgJ3N2ZycpXG4gICAgICAgICAgICAuYXR0cigneG1sbnMnLCBucylcbiAgICAgICAgICAgIC8vIC5hdHRyKCd3aWR0aCcsICcxMDAlJylcbiAgICAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCAnMTAwJScpXG4gICAgICAgICAgICAuYXR0cigndmlld0JveCcsICcwIDAgJyArIHdpZHRoICsgJyAnICsgaGVpZ2h0KVxuICAgICAgICAgICAgLmF0dHIoJ3htbDpzcGFjZScsICdwcmVzZXJ2ZScpO1xuICAgICAgICBcbiAgICAgICAgaWYgKGV2ZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIGZvcm1hdCBldmVudHMgdG8gdXNhYmxlIHBvaW50c1xuICAgICAgICAgICAgcG9pbnRzID0gcHJlcGFyZURhdGVFdmVudHMoZXZlbnRzKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gY2hlY2sgaWYgQUxMIGV2ZW50cyBvY2N1ciBvbiB0aGUgc2FtZSBkYXkhXG4gICAgICAgICAgICBpZiAoc2FtZURhbW5EYXkocG9pbnRzKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gYXBwZW5kIGF4aXMgbGFiZWwgPHRleHQ+IDxnPnJvdXBzXG4gICAgICAgICAgICBET00uJHN2Z0VsZW1cbiAgICAgICAgICAgICAgICAuYXBwZW5kKGdlbkF4aXNMYWJlbHMocG9pbnRzLCAneScpKVxuICAgICAgICAgICAgICAgIC5hcHBlbmQoZ2VuQXhpc0xhYmVscyhwb2ludHMsICd4JykpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBhcHBlbmQgbGluZVxuICAgICAgICAgICAgRE9NLiRzdmdFbGVtXG4gICAgICAgICAgICAgICAgLmFwcGVuZChnZW5lcmF0ZUxpbmVzKHBvaW50cykpO1xuXG4gICAgICAgICAgICAvLyBhcHBlbmQgcG9pbnRzL2NpcmNsZXMgPGc+cm91cFxuICAgICAgICAgICAgRE9NLiRzdmdFbGVtXG4gICAgICAgICAgICAgICAgLmFwcGVuZChnZW5lcmF0ZUNpcmNsZXMocG9pbnRzKSk7XG5cbiAgICAgICAgICAgIC8vIGFwcGVuZCBTVkcgdG8gY29udGFpbmVyXG4gICAgICAgICAgICBET00uJGNvbnRhaW5lclxuICAgICAgICAgICAgICAgIC5hcHBlbmQoRE9NLiRzdmdFbGVtKTtcbiAgICAgICAgICAgIFxuICAgICAgICB9ICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgLy8gcHVibGljIGluaXQgbWV0aG9kXG4gICAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgICAgY2FjaGVEb20oKTtcbiAgICB9XG5cblxuICAgIC8vIHJldHVybiBwdWJsaWMgbWV0aG9kc1xuICAgIHJldHVybiB7XG4gICAgICAgIGluaXQ6IGluaXQsXG4gICAgICAgIHJlbmRlcjogcmVuZGVyXG4gICAgfTtcblxufShqUXVlcnkpKTtcbiIsIi8qIGpzaGludCBlc3ZlcnNpb246NiAqL1xuLyogZ2xvYmFscyBqUXVlcnksIGRvY3VtZW50LCBjb25zb2xlLCBMUywgSGl0QXBpICovXG5cbnZhciBSZXBvU2VsZWN0ID0gKGZ1bmN0aW9uICgkKSB7XG5cbiAgICB2YXIgRE9NICAgPSB7fSxcbiAgICAgICAgcmVwb3MgPSBbXSxcbiAgICAgICAgc2VsZWN0ZWRSZXBvO1xuICAgIFxuICAgIFxuICAgIC8vIHV0aWwgY2hlY2tzIGxvY2FsIHN0b3JhZ2UgZm9yIHByZXZpb3VzbHkgc2F2ZWQgbGlzdCBvZiByZXBvc1xuICAgIHZhciBjaGVja1N0b3JhZ2UgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBMUy5nZXREYXRhKCdkZXYtZGFzaC1yZXBvcycpID8gdHJ1ZSA6IGZhbHNlO1xuICAgIH0oKSk7XG5cblxuICAgIC8vIGNhY2hlIERPTSBlbGVtZW50c1xuICAgIGZ1bmN0aW9uIGNhY2hlRG9tKCkge1xuICAgICAgICBET00uJHNlbGVjdENvbnRhaW5lciA9ICQoJy5yZXBvLXNlbGVjdCcpO1xuICAgICAgICBET00uJHAgICAgICAgICAgICAgICA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpKTtcbiAgICAgICAgRE9NLiRsaXN0Q29udGFpbmVyICAgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpKTtcbiAgICAgICAgRE9NLiR1bCAgICAgICAgICAgICAgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJykpO1xuICAgICAgICBET00uJG5ld1JlcG9Gb3JtICAgICA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZm9ybScpKTtcbiAgICAgICAgRE9NLiRuZXdSZXBvVXNlciAgICAgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0JykpO1xuICAgICAgICBET00uJG5ld1JlcG9SZXBvICAgICA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKSk7XG4gICAgICAgIERPTS4kbmV3UmVwb0J0biAgICAgID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKSk7XG4gICAgfVxuXG5cbiAgICAvLyBiaW5kIGV2ZW50c1xuICAgIGZ1bmN0aW9uIGJpbmRFdmVudHMoKSB7XG4gICAgICAgIERPTS4kc2VsZWN0Q29udGFpbmVyLm9uKCdjbGljaycsICcucmVwby1zZWxlY3QtaGlnaGxpZ2h0Jywgc2hvd1JlcG9MaXN0KTtcbiAgICAgICAgRE9NLiR1bC5vbignY2xpY2snLCAnZGl2LmxpLWRlc2NyaXB0aW9ucycsIHNlbGVjdFJlcG8pO1xuICAgICAgICBET00uJHVsLm9uKCdjbGljaycsICdzcGFuLmxpLXJlbW92ZScsIGRlbGV0ZVJlcG8pO1xuICAgICAgICBET00uJG5ld1JlcG9Gb3JtLm9uKCdzdWJtaXQnLCBhZGRSZXBvKTtcbiAgICB9XG4gICAgXG4gICAgXG4gICAgLy8gc2hvdy9oaWRlIHJlcG8gbGlzdFxuICAgIGZ1bmN0aW9uIHNob3dSZXBvTGlzdChlKSB7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgRE9NLiRsaXN0Q29udGFpbmVyXG4gICAgICAgICAgICAudG9nZ2xlQ2xhc3MoJ2hpZGRlbicpO1xuICAgIH1cbiAgICBcbiAgICBcbiAgICAvLyBzZWxlY3QgYSByZXBvIHRvIHZpZXdcbiAgICBmdW5jdGlvbiBzZWxlY3RSZXBvKGUpIHtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgXG4gICAgICAgIHZhciBwaWNrZWQgPSBlLmN1cnJlbnRUYXJnZXQuY2hpbGRyZW5bMF0uaW5uZXJIVE1MLnNwbGl0KCcgLyAnKTtcbiAgICAgICAgXG4gICAgICAgIHNlbGVjdGVkUmVwbyA9IHBpY2tlZFsxXTtcbiAgICAgICAgXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHBpY2tlZCk7IC8vIGRpYWdcbiAgICAgICAgcG9wdWxhdGVNZW51KHJlcG9zKTtcbiAgICAgICAgICAgIFxuICAgICAgICAvLyBDYWxsIEhpdEFwaSBtb2R1bGUncyBwdWJsaWMgLmdldEV2ZW50cygpIG1ldGhvZFxuICAgICAgICBIaXRBcGkuZ2V0RXZlbnRzKHBpY2tlZFswXSwgcGlja2VkWzFdKTtcbiAgICAgICAgXG4gICAgICAgIC8vIHJldHJhY3QgcmVwbyBsaXN0XG4gICAgICAgIERPTS4kbGlzdENvbnRhaW5lclxuICAgICAgICAgICAgLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICB9XG4gICAgXG4gICAgXG4gICAgLy8gZGVsZXRlIHJlcG8gZnJvbSB0aGUgbGlzdFxuICAgIGZ1bmN0aW9uIGRlbGV0ZVJlcG8oZSkge1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICBcbiAgICAgICAgdmFyIGF1dGhvckFuZFJlcG8gICA9IGUudGFyZ2V0LnByZXZpb3VzRWxlbWVudFNpYmxpbmcuZGF0YXNldC5yZXBvLFxuICAgICAgICAgICAgc2VsZWN0ZWRFbGVtZW50ID0gJChlLnRhcmdldCkucGFyZW50KCksXG4gICAgICAgICAgICBzZWxlY3RlZEVsZW1JZCAgPSBzZWxlY3RlZEVsZW1lbnQuYXR0cignaWQnKTtcbiAgICAgICAgXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdEZWxldGU6ICcgKyBhdXRob3JBbmRSZXBvKTsgLy8gZGlhZ1xuICAgICAgICBcbiAgICAgICAgcmVwb3Muc3BsaWNlKHNlbGVjdGVkRWxlbUlkLCAxKTtcbiAgICAgICAgc2VsZWN0ZWRFbGVtZW50LnJlbW92ZSgpO1xuICAgICAgICBMUy5zZXREYXRhKCdkZXYtZGFzaC1yZXBvcycsIHJlcG9zKTtcbiAgICB9XG4gICAgXG4gICAgXG4gICAgLy8gYWRkIHJlcG8gdG8gdGhlIGxpc3RcbiAgICBmdW5jdGlvbiBhZGRSZXBvKGUpIHtcbiAgICAgICAgXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgXG4gICAgICAgIHZhciBhcGlVcmwgICAgPSAnaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9yZXBvcycsXG4gICAgICAgICAgICBuZXdBdXRob3IgPSBlLmN1cnJlbnRUYXJnZXRbMF0udmFsdWUsXG4gICAgICAgICAgICBuZXdSZXBvICAgPSBlLmN1cnJlbnRUYXJnZXRbMV0udmFsdWU7XG4gICAgICAgIFxuICAgICAgICAkLmdldEpTT04oYCR7YXBpVXJsfS8ke25ld0F1dGhvcn0vJHtuZXdSZXBvfWApXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVwbykge1xuICAgICAgICAgICAgICAgIHJlcG9zLnVuc2hpZnQocmVwbyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBjbGVhciBpbnB1dHNcbiAgICAgICAgICAgICAgICBET00uJG5ld1JlcG9Vc2VyWzBdLnZhbHVlID0gJyc7XG4gICAgICAgICAgICAgICAgRE9NLiRuZXdSZXBvUmVwb1swXS52YWx1ZSA9ICcnO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcG9zO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKHNhdmVSZXBvcylcbiAgICAgICAgICAgIC50aGVuKHBvcHVsYXRlTWVudSlcbiAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdFcnJvciBmZXRjaGluZyByZXBvLicpO1xuICAgICAgICAgICAgfSk7XG4gICAgXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICAvLyBwb3B1bGF0ZSBtb2R1bGUgc2NvcGUgcmVwb3MgYXJyYXkgJiBjYWxsIEhpdEFwaSBvbiAxc3QgbG9hZFxuICAgIGZ1bmN0aW9uIHBvcHVsYXRlUmVwb3MoZGF0YSkge1xuICAgICAgICBcbiAgICAgICAgaWYgKGRhdGEgJiYgZGF0YS5sZW5ndGgpIHtcblxuICAgICAgICBcbiAgICAgICAgICAgIGRhdGEuZm9yRWFjaChmdW5jdGlvbiAocmVwbykge1xuICAgICAgICAgICAgICAgIHJlcG9zLnB1c2gocmVwbyk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gY2FwdHVyZSAxc3QgcmVwbydzIGF1dGhvciAmIHJlcG8gbmFtZSBpbiBhbiBhcnJheVxuICAgICAgICAgICAgdmFyIHJlcG9aZXJvID0gcmVwb3NbMF0uZnVsbF9uYW1lLnNwbGl0KCcvJyk7XG5cbiAgICAgICAgICAgIC8vIHNldCBzZWxlY3RlZCByZXBvIHRvIGZpcnN0IHJlcG8ncyBuYW1lXG4gICAgICAgICAgICBzZWxlY3RlZFJlcG8gPSByZXBvWmVyb1sxXTtcblxuICAgICAgICAgICAgLy8gQ2FsbCBIaXRBcGkgbW9kdWxlJ3MgcHVibGljIC5nZXRFdmVudHMoKSBtZXRob2RcbiAgICAgICAgICAgIEhpdEFwaS5nZXRFdmVudHMocmVwb1plcm9bMF0sIHJlcG9aZXJvWzFdKTtcblxuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgXG4gICAgLy8gc2F2ZSByZXBvcyB0byBsb2NhbCBzdG9yYWdlXG4gICAgZnVuY3Rpb24gc2F2ZVJlcG9zKGRhdGEpIHtcbiAgICAgICAgTFMuc2V0RGF0YSgnZGV2LWRhc2gtcmVwb3MnLCByZXBvcyk7XG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cbiAgICBcbiAgICBcbiAgICAvLyBwb3B1bGF0ZSByZXBvIGxpc3QgbWVudVxuICAgIGZ1bmN0aW9uIHBvcHVsYXRlTWVudShkYXRhKSB7XG4gICAgICAgIFxuICAgICAgICAvLyBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChkYXRhICYmIGRhdGEubGVuZ3RoKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIERPTS4kdWwuaHRtbCgnJyk7XG5cbiAgICAgICAgICAgIGRhdGEuZm9yRWFjaChmdW5jdGlvbiAocmVwbywgaW5kKSB7XG4gICAgICAgICAgICAgICAgdmFyICRsaSA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKSk7XG5cbiAgICAgICAgICAgICAgICAkbGlcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2lkJywgaW5kKVxuICAgICAgICAgICAgICAgICAgICAuaHRtbChgPGRpdiBjbGFzcz1cImxpLWRlc2NyaXB0aW9uc1wiIGRhdGEtcmVwbz1cIiR7cmVwby5uYW1lfVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD4ke3JlcG8ub3duZXIubG9naW59IC8gJHtyZXBvLm5hbWV9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD4ke3JlcG8uZGVzY3JpcHRpb259PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImxpLXJlbW92ZVwiPiYjMTAwNjA8L3NwYW4+YCk7XG5cbiAgICAgICAgICAgICAgICBET00uJHVsXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJGxpKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZW5kZXIoKTtcbiAgICAgICAgXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnbm8gcmVwb3MsIGhvbG1lcycpO1xuICAgICAgICAgICAgcmVuZGVyKCk7XG4gICAgICAgICAgICBET00uJGxpc3RDb250YWluZXJcbiAgICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIFxuICAgIC8vIHJlbmRlclxuICAgIGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICBET00uJG5ld1JlcG9CdG5cbiAgICAgICAgICAgIC5odG1sKCcrJyk7XG5cbiAgICAgICAgRE9NLiRuZXdSZXBvVXNlclxuICAgICAgICAgICAgLmF0dHIoJ3JlcXVpcmVkJywgJ3RydWUnKVxuICAgICAgICAgICAgLmF0dHIoJ3BsYWNlaG9sZGVyJywgJ2F1dGhvcicpO1xuXG4gICAgICAgIERPTS4kbmV3UmVwb1JlcG9cbiAgICAgICAgICAgIC5hdHRyKCdyZXF1aXJlZCcsICd0cnVlJylcbiAgICAgICAgICAgIC5hdHRyKCdwbGFjZWhvbGRlcicsICdyZXBvJyk7XG5cbiAgICAgICAgRE9NLiRuZXdSZXBvRm9ybVxuICAgICAgICAgICAgLmFkZENsYXNzKCduZXctcmVwby1mb3JtJylcbiAgICAgICAgICAgIC5hcHBlbmQoRE9NLiRuZXdSZXBvVXNlcilcbiAgICAgICAgICAgIC5hcHBlbmQoRE9NLiRuZXdSZXBvUmVwbylcbiAgICAgICAgICAgIC5hcHBlbmQoRE9NLiRuZXdSZXBvQnRuKTtcblxuICAgICAgICBET00uJGxpc3RDb250YWluZXJcbiAgICAgICAgICAgIC5hZGRDbGFzcygncmVwby1saXN0JylcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLmFwcGVuZChET00uJHVsKVxuICAgICAgICAgICAgLmFwcGVuZChET00uJG5ld1JlcG9Gb3JtKTtcbiAgICAgICAgXG4gICAgICAgIERPTS4kcFxuICAgICAgICAgICAgLmh0bWwoYFlvdSBhcmUgY3VycmVudGx5IHZpZXdpbmcgdGhlIDxzcGFuIGNsYXNzPVwicmVwby1zZWxlY3QtaGlnaGxpZ2h0XCI+JHtzZWxlY3RlZFJlcG99JiN4MjVCQzs8L3NwYW4+IHJlcG9zaXRvcnkuYCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgIERPTS4kc2VsZWN0Q29udGFpbmVyXG4gICAgICAgICAgICAuYXBwZW5kKERPTS4kcClcbiAgICAgICAgICAgIC5hcHBlbmQoRE9NLiRsaXN0Q29udGFpbmVyKTtcblxuICAgIH1cblxuXG4gICAgLy8gcHVibGljIG1ldGhvZCB0byBraWNrIG9mIHRoZSB3aG9sZSBtb2R1bGVcbiAgICBmdW5jdGlvbiBnZXRSZXBvcyh1c2VyTmFtZSkge1xuICAgICAgICBcbiAgICAgICAgaWYgKGNoZWNrU3RvcmFnZSkge1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ1VzaW5nIGxvY2FsIHN0b3JhZ2UnKTsgLy8gZGlhZ1xuICAgICAgICAgICAgcG9wdWxhdGVSZXBvcyhMUy5nZXREYXRhKCdkZXYtZGFzaC1yZXBvcycpKTsgLy8gY2FjaGUgJ3JlcG9zJyB0byBtb2R1bGUgc2NvcGUgdmFyXG4gICAgICAgICAgICBwb3B1bGF0ZU1lbnUocmVwb3MpOyAgLy8gYnVpbGQgdGhlIGxpc3RcbiAgICAgICAgICAgIFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBnZXQgdXNlcidzIG1vc3QgcmVjZW50bHktYWN0aXZlIHJlcG9zIGZyb20gR2l0SHViXG4gICAgICAgICAgICAkLmdldEpTT04oJ2h0dHBzOi8vYXBpLmdpdGh1Yi5jb20vdXNlcnMvJyArXG4gICAgICAgICAgICAgICAgICAgICAgdXNlck5hbWUgK1xuICAgICAgICAgICAgICAgICAgICAgICcvcmVwb3M/c29ydD11cGRhdGVkJylcbiAgICAgICAgICAgICAgICAudGhlbiggKHJlcG9zKSA9PiByZXBvcy5zbGljZSgwLCAzKSApIC8vIG1vc3QtcmVjZW50IDMgcmVwb3NcbiAgICAgICAgICAgICAgICAudGhlbihwb3B1bGF0ZVJlcG9zKSAgLy8gY2FjaGUgcmVwb3MgdG8gbW9kdWxlIHNjb3BlICdyZXBvcydhcnJheVxuICAgICAgICAgICAgICAgIC50aGVuKHNhdmVSZXBvcykgICAgICAvLyBzYXZlIHRoZW0gaW4gbG9jYWwgc3RvcmFnZVxuICAgICAgICAgICAgICAgIC50aGVuKHBvcHVsYXRlTWVudSk7ICAvLyBidWlsZCB0aGUgbGlzdFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgXG4gICAgLy8gcHVibGljIGluaXQgbWV0aG9kXG4gICAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgICAgY2FjaGVEb20oKTtcbiAgICAgICAgYmluZEV2ZW50cygpO1xuICAgICAgICBET00uJGxpc3RDb250YWluZXIuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgIH1cbiAgICBcbiAgICBcbiAgICAvLyBleHBvcnQgcHVibGljIG1ldGhvZHNcbiAgICByZXR1cm4ge1xuICAgICAgICBpbml0OiBpbml0LFxuICAgICAgICBnZXRSZXBvczogZ2V0UmVwb3NcbiAgICB9O1xuXG59KGpRdWVyeSkpO1xuIiwiLyoganNoaW50IGVzdmVyc2lvbjo2ICovXG4vKiBnbG9iYWxzIGpRdWVyeSwgY29uc29sZSwgTFMgKi9cblxudmFyIEJhY2tncm91bmRzID0gKGZ1bmN0aW9uKCQpIHtcbiAgICBcbiAgICAndXNlIHN0cmljdCc7XG4gICAgXG4gICAgdmFyIERPTSA9IHt9LFxuICAgICAgICBiZ0FyciA9IFsnMDAxJywgJzAwMicsICcwMDMnLCAnMDA0JywgJzAwNScsICcwMDYnLCAnMDA3JywgJzAwOCddLFxuICAgICAgICB0b2RheSA9IG1ha2VEYXRlKCksXG4gICAgICAgIHN0YXRlID0gbG9hZFN0YXRlKCk7XG4gICAgXG4gICAgXG4gICAgLy8gY2FjaGUgRE9NIGVsZW1lbnRzXG4gICAgZnVuY3Rpb24gY2FjaGVEb20oKSB7XG4gICAgICAgIERPTS4kYm9keSA9ICQoJ2JvZHknKTtcbiAgICB9XG4gICAgXG4gICAgXG4gICAgLy8gbWFrZSBhbmQgZm9ybWF0IGRhdGUgc3RyaW5nXG4gICAgZnVuY3Rpb24gbWFrZURhdGUoKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZSgpXG4gICAgICAgICAgICAudG9EYXRlU3RyaW5nKCkgICAvLyBjb252ZXJ0IG9iamVjdCB0byBhIHN0cmluZ1xuICAgICAgICAgICAgLnNsaWNlKDQsIDE1KTsgICAgLy8ganVzdCB3YW50ICdNTSBERCBZWVlZJ1xuICAgIH1cbiAgICBcbiAgICBcbiAgICAvLyBsb2FkIHN0YXRlIGZyb20gc3RvcmFnZVxuICAgIGZ1bmN0aW9uIGxvYWRTdGF0ZSgpIHtcbiAgICAgICAgdmFyIHN0b3JlZFN0YXRlID0gTFMuZ2V0RGF0YSgnZGV2LWRhc2gtYmcnKSxcbiAgICAgICAgICAgIGltZ0luZHggID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYmdBcnIubGVuZ3RoKSxcbiAgICAgICAgICAgIG5ld1N0YXRlID0ge1xuICAgICAgICAgICAgICAgIGltZ05hbWU6IGJnQXJyW2ltZ0luZHhdLFxuICAgICAgICAgICAgICAgIGRhdGU6IG1ha2VEYXRlKClcbiAgICAgICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICAvLyBjb25zb2xlLmxvZygnU3RvcmVkIFN0YXRlOiAnLCBzdG9yZWRTdGF0ZSk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gKHN0b3JlZFN0YXRlKSA/IHN0b3JlZFN0YXRlIDogbmV3U3RhdGU7XG4gICAgfVxuICAgIFxuICAgICAgICBcbiAgICAvLyBzZXQgYmFja2dyb3VuZCBpbWFnZVxuICAgIC8vIG5ldyBpbWFnZSBlYWNoIG5ldyBkYXkuIFNvIHdlIDFzdCBjb21wYXJlIHRvZGF5IHdpdGhcbiAgICAvLyBsb2NhbCBzdG9yYWdlIGRhdGUsIHVwZGF0ZSBsb2NhbCBzdG9yYWdlIGlmIGRpZmZlcmVudCxcbiAgICAvLyBhbmQgdGhlbiBzZXQgdGhlIGJhY2tncm91bmQgaW1hZ2UgQ1NTIG9uIDxib2R5PlxuICAgIGZ1bmN0aW9uIHBpY2tCYWNrZ3JvdW5kKCkge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAvLyBjb25zb2xlLmxvZygnVG9kYXk6ICcsIHRvZGF5KTsgIC8vIGZvciBkaWFnXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdTdGF0ZTogJywgc3RhdGUpOyAgLy8gZm9yIGRpYWdcbiAgICAgICAgXG4gICAgICAgIHZhciBjdXJudEltZ0luZHggPSBiZ0Fyci5pbmRleE9mKHN0YXRlLmltZ05hbWUpLFxuICAgICAgICAgICAgbmV3SW1nSW5kZXgsXG4gICAgICAgICAgICBuZXdJbWdOYW1lO1xuICAgICAgICBcbiAgICAgICAgaWYgKG5ldyBEYXRlKHRvZGF5KSA+IG5ldyBEYXRlKHN0YXRlLmRhdGUpKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIGZpbmQgbmV3IGltYWdlIGluZGV4XG4gICAgICAgICAgICBuZXdJbWdJbmRleCA9IChjdXJudEltZ0luZHggPT09IDcpID8gMCA6IGN1cm50SW1nSW5keCArIDE7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIGZpbmQgbmV3IGltYWdlIHN0cmluZyBuYW1lXG4gICAgICAgICAgICBuZXdJbWdOYW1lID0gYmdBcnJbbmV3SW1nSW5kZXhdO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBzYXZlIG5ldyBpbWFnZSBuYW1lICYgZGF0ZSB0byBsb2NhbCBzdG9yYWdlIFxuICAgICAgICAgICAgTFMuc2V0RGF0YSgnZGV2LWRhc2gtYmcnLCB7XG4gICAgICAgICAgICAgICAgaW1nTmFtZTogbmV3SW1nTmFtZSxcbiAgICAgICAgICAgICAgICBkYXRlOiB0b2RheVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIHVwZGF0ZSB0aGUgRE9NXG4gICAgICAgICAgICByZW5kZXIobmV3SW1nTmFtZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlbmRlcihzdGF0ZS5pbWdOYW1lKTtcbiAgICAgICAgICAgIC8vIHNhdmUgY3VycmVudCBpbWFnZSBuYW1lICYgZGF0ZSB0byBsb2NhbCBzdG9yYWdlIFxuICAgICAgICAgICAgTFMuc2V0RGF0YSgnZGV2LWRhc2gtYmcnLCB7XG4gICAgICAgICAgICAgICAgaW1nTmFtZTogc3RhdGUuaW1nTmFtZSxcbiAgICAgICAgICAgICAgICBkYXRlOiB0b2RheVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIC8vIHJlbmRlciB0byBET01cbiAgICBmdW5jdGlvbiByZW5kZXIoaW1hZ2VOYW1lKSB7XG4gICAgICAgIERPTS4kYm9keVxuICAgICAgICAgICAgLmNzcygnYmFja2dyb3VuZC1pbWFnZScsICd1cmwoZGlzdC9hc3NldHMvJyArIGltYWdlTmFtZSArICcuanBnKScpO1xuICAgIH1cbiAgICBcbiAgICBcbiAgICAvLyBwdWJsaWMgaW5pdCBtZXRob2RcbiAgICBmdW5jdGlvbiBpbml0KCkge1xuICAgICAgICBjYWNoZURvbSgpO1xuICAgICAgICBwaWNrQmFja2dyb3VuZCgpO1xuICAgIH1cbiAgICBcbiAgICBcbiAgICAvLyByZXR1cm4gcHVibGljIGFwaVxuICAgIHJldHVybiB7XG4gICAgICAgIGluaXQ6IGluaXRcbiAgICB9O1xuICAgIFxufShqUXVlcnkpKTtcbiIsIi8qIGpzaGludCBlc3ZlcnNpb246NiAqL1xuLyogZ2xvYmFscyAkLCBkb2N1bWVudCwgY29uc29sZSAqL1xuXG4vKiBhcHAuanMgY2FsbCBlYWNoIG1vZHVsZSdzIHB1YmxpYyBtZXRob2QocykgICovXG5cbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgICBcbiAgICBCYWNrZ3JvdW5kcy5pbml0KCk7XG4gICAgXG4gICAgUmVwb1NlbGVjdC5pbml0KCk7XG4gICAgXG4gICAgR3JlZXQuaW5pdCgpO1xuICAgIFxuICAgIEhpdEFwaS5pbml0KCk7XG4gICAgXG4gICAgUmVuZGVyVGFibGUuaW5pdCgpO1xuXG4gICAgUmVuZGVyQ2hhcnQuaW5pdCgpO1xuXG59KTtcbiJdfQ==
