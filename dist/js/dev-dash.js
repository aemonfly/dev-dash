"use strict";var HitApi=function(e){function t(){p.$inputForm=e("#input-form")}function n(){p.$inputForm.submit(r)}function a(e){return{type:e.type,date:e.created_at,actor:e.actor.display_login,avatar:e.actor.avatar_url,payload:e.payload}}function r(t,n){var a="https://api.github.com/repos",r=a+"/"+t+"/"+n+"/events";e.getJSON(r).then(o)}function o(e){var t=["PushEvent","CommitCommentEvent"],n=["IssuesEvent","IssueCommentEvent","ProjectEvent","ProjectCardEvent","ProjectColumnEvent"],r=["CreateEvent","PullRequestEvent","PullRequestReviewEvent","PullRequestReviewCommentEvent"],o=e.filter(function(e){return t.indexOf(e.type)!==-1}).map(a),l=e.filter(function(e){return n.indexOf(e.type)!==-1}).map(a),p=e.filter(function(e){return r.indexOf(e.type)!==-1}).map(a);RenderTable.render(o,l,p),RenderChart.render(e.map(a))}function l(){t(),n()}var p={};return{init:l,getEvents:r}}(jQuery),Greet=function(e){function t(){m.$greeting=e(".greeting"),m.$overlay=e('<div id="overlay"></div>'),m.$modalPrompt=e(document.createElement("div")),m.$modalError=e(document.createElement("p")),m.$modalPrompt.attr("id","user-modal").addClass("user-modal").html(f),m.$modalError.addClass("user-modal-error").html("GitHub Username Not Found"),e("body").append(m.$modalPrompt)}function n(){e("#user-modal-form").submit(a)}function a(e){e.preventDefault(),u=e.currentTarget[0].value.trim(),s=e.currentTarget[1].value.trim(),r(s).then(function(t){t.login===s&&(LS.setData("dev-dash-user",{name:e.currentTarget[0].value,githubName:e.currentTarget[1].value}),p(),i())}).catch(function(e){m.$modalPrompt.append(m.$modalError)})}function r(t){return e.getJSON("https://api.github.com/users/"+t)}function o(){var e,t=new Date,n=t.getHours();return e=n<12?"morning":n>=12&&n<17?"afternoon":"evening","Good "+e+", "+u+"."}function l(){m.$overlay.show(),m.$modalPrompt.addClass("user-modal-show")}function p(){m.$overlay.hide(),m.$modalPrompt.removeClass("user-modal-show")}function d(){var e=LS.getData("dev-dash-user");e&&e.name?(u=e.name,s=e.githubName,i()):l()}function i(){m.$greeting.text(o()),RepoSelect.getRepos(s)}function c(){t(),m.$overlay.hide(),e("body").append(m.$overlay),n(),d()}var u,s,m={},f='<form id="user-modal-form" class="Grid Grid--gutters Grid--1of2" action="submit">\n                    <div class="Grid-cell InputAddOn">\n                      <span class="InputAddOn-item">Your Name:</span>\n                      <input id="user-modal-name" class="InputAddOn-field" type="text" required>\n                    </div>\n                    <div class="Grid-cell InputAddOn">\n                      <span class="InputAddOn-item">GitHub User Name:</span>\n                      <input id="user-modal-username"  class="InputAddOn-field" type="text" required>\n                    </div>\n                      <div class="Grid-cell InputAddOn">\n                      <button class="InputAddOn-item" id="user-modal-button">Go!</button>\n                    </div>\n                    </form>';return{init:c}}(jQuery),LS=function(){function e(e,t){r&&r.setItem(e,JSON.stringify(t))}function t(e){if(r)return JSON.parse(r.getItem(e))}function n(){if(r)return r.clear()}function a(e){if(r)return r.removeItem(e)}var r=function(){var e,t,n=(new Date).toString();try{return e=window.localStorage,e.setItem(n,n),t=e.getItem(n)===n,e.removeItem(n),t&&e}catch(e){console.log("Problemz!")}}();return{setData:e,getData:t,deleteData:a,clearData:n}}(),RenderTable=function(e){function t(){d.$tableContainer=e(".table-container")}function n(e){return new Date(e).toDateString().slice(0,15).replace(/ 0/g," ")}function a(e,t,n){d.$tableContainer.empty(),e.length>0&&r(e),t.length>0&&o(t),n.length>0&&l(n)}function r(t){var a=e(document.createElement("div")),r=e(document.createElement("div")),o=e(document.createElement("ul"));t.forEach(function(t){if("PushEvent"===t.type)t.payload.commits.forEach(function(a){var r=e(document.createElement("li")),l=e(document.createElement("img")),p=e(document.createElement("p")),d=e(document.createElement("span")),i=e(document.createElement("a")),c=a.url.replace(/\/\/api./,"//").replace(/\/repos\//,"/").replace(/commits/,"commit");l.attr("src",t.avatar),i.attr("target","_blank").attr("href",c).html('<span class="bolder">'+a.sha.slice(0,6)+"</span>"),d.text('"'+a.message+'"'),p.append('<span class="bolder">'+t.actor+"</span> committed ").append(i).append(" on "+n(t.date)+": ").append(d),r.append(l).append(p),o.append(r)});else{var a=e(document.createElement("li")),r=e(document.createElement("img")),l=e(document.createElement("p")),p=e(document.createElement("span")),d=e(document.createElement("a"));r.attr("src",t.avatar),d.attr("target","_blank").attr("href",t.payload.comment.html_url).html('<span class="bolder">'+t.payload.comment.commit_id.slice(0,6)+"</span>"),p.text('"'+t.payload.comment.body+'"'),l.append('<span class="bolder">'+t.actor+"</span> commented on ").append(d).append(" on "+n(t.date)+": ").append(p),a.append(r).append(l),o.append(a)}}),o.addClass("col-list"),a.append(o),r.addClass("table-col").append("<h3>"+t.length+" Commit-Related Events</h3>").append(a),d.$tableContainer.append(r)}function o(t){var a=e(document.createElement("div")),r=e(document.createElement("ul"));t.forEach(function(t){var a=e(document.createElement("li")),o=e(document.createElement("img")),l=e(document.createElement("p")),p=e(document.createElement("a"));o.attr("src",t.avatar),p.attr("target","_blank"),"IssuesEvent"===t.type?(p.attr("href",t.payload.issue.html_url).html('<span class="bolder">issue '+t.payload.issue.number+"</span>"),l.append('<span class="bolder">'+t.actor+"</span> "+t.payload.action+" ").append(p).append(" on "+n(t.date)+': "'+t.payload.issue.title+'"'),a.append(o).append(l),r.append(a)):"IssueCommentEvent"===t.type&&(p.attr("href",t.payload.comment.html_url).html('<span class="bolder">issue '+t.payload.issue.number+"</span>"),l.append('<span class="bolder">'+t.actor+"</span> commented on ").append(p).append(" on "+n(t.date)+': "'+t.payload.comment.body+'"'),a.append(o).append(l),r.append(a))}),r.addClass("col-list"),a.addClass("table-col").append("<h3>"+t.length+" Todo-Related Events</h3>").append(r),d.$tableContainer.append(a)}function l(t){var a,r=e(document.createElement("div")),o=e(document.createElement("ul"));t.forEach(function(t){var r=e(document.createElement("li")),l=e(document.createElement("img")),p=e(document.createElement("p")),d=e(document.createElement("a"));l.attr("src",t.avatar),d.attr("target","_blank"),"CreateEvent"===t.type?(p.append(['<span class="bolder">'+t.actor+"</span>","created",t.payload.ref_type,'<span class="bolder">'+t.payload.ref+"</span>","on",n(t.date)].join(" ")),r.append(l).append(p),o.append(r)):"PullRequestEvent"===t.type?(a=t.payload.pull_request.url.replace(/\/\/api./,"//").replace(/\/repos\//,"/").replace(/pulls/,"pull"),d.attr("href",a).html('<span class="bolder">pull request '+t.payload.pull_request.number+"</span>"),p.append('<span class="bolder">'+t.actor+"</span>").append(" "+t.payload.action+" ").append(d).append(" on "+n(t.date)),r.append(l).append(p),o.append(r)):"PullRequestReviewEvent"===t.type?(d.attr("href",t.payload.pull_request.html_url).text(t.payload.pull_request.title),p.append([t.actor,t.payload.action,"review of "].join(" ")).append(d).append(" on"+n(t.date)),r.append(l).append(p),o.append(r)):"PullRequestReviewCommentEvent"===t.type&&(d.attr("href",t.payload.comment.html_url).text(t.payload.comment.body),p.append(['<span class="bolder">'+t.actor+"</span>",t.payload.action,"pull request comment "].join(" ")).append(d).append(" on"+n(t.date)),r.append(l).append(p),o.append(r))}),o.addClass("col-list"),r.addClass("table-col").append("<h3>"+t.length+" Merge-Related Events</h3>").append(o),d.$tableContainer.append(r)}function p(){t()}var d={};return{init:p,render:a}}(jQuery),RenderChart=function(e){function t(){s.$container=e(".chart-container"),s.$svgElem=e(document.createElementNS(m,"svg"))}function n(e){return new Date(e).toDateString().slice(0,15).replace(/ 0/g," ")}function a(e){for(var t=e.map(function(e){return n(e.date)}),a=new Date(t[0]),r=new Date(t[t.length-1]),o=[],l=a;l<=r;)o.push(n(l)),l=l.addDays(1);return o}function r(e){var t,n;return t=e.reduce(function(e,t){return Math.max(e,t[1])},e[0][1]),n=Math.floor(t/4),4*(n+1)}function o(e){var t,r,o=[],l=[];return e.forEach(function(e){"PushEvent"===e.type?e.payload.commits.forEach(function(t){o.push({actor:e.actor,avatar:e.avatar,date:e.date,payload:t,type:"Commit"})}):o.push(e)}),t=o.sort(function(e,t){return new Date(e.date)-new Date(t.date)}),r=a(t),l=r.map(function(e){return[e.slice(3,10),t.filter(function(t){return n(t.date)===e}).length]})}function l(e){return 1===e.length}function p(t){var n=e(document.createElementNS(m,"g")),a=t.length-1,o=r(t),l=(f-h-E)/a,p=(v-g-E)/o,d=t.map(function(e,t){return[t*l+h,v-e[1]*p-g]});return d.forEach(function(a,r){var o=e(document.createElementNS(m,"circle")),l=e(document.createElementNS(m,"title")),p=a[0],d=a[1],i=4;o.attr("cx",p).attr("cy",d).attr("r",i),l.text(t[r][0]+" ("+t[r][1]+" events)"),o.append(l),n.addClass("chart-circle").append(o)}),n}function d(t){var n,a,o=e(document.createElementNS(m,"g")),l=t.length-1,p=r(t),d=(f-h-E)/l,i=(v-g-E)/p,c=t.map(function(e,t){return[t*d+h,v-e[1]*i-g]});for(n=0;n<c.length-1;n+=1)a=e(document.createElementNS(m,"line")),a.attr("x1",c[n][0]).attr("y1",c[n][1]).attr("x2",c[n+1][0]).attr("y2",c[n+1][1]),o.addClass("chart-line").append(a);return o}function i(t,n){var a,o,l,p,d,i,c,u,s,y,$,b=e(document.createElementNS(m,"g")),C=r(t);if(y=t.reduce(function(e,t){return Math.max(e,t[1])},t[0][1]),"y"===n){for(b.addClass("labels y-labels"),l=C>12?C/4:C,s=(v-g-E)/l,$=0;$<l+1;$+=1)u=$*C/l,c=v-g-s*$,a=e(document.createElementNS(m,"line")),a.addClass("horiz-rule").attr("x1",h).attr("y1",c).attr("x2",f-E+5).attr("y2",c),o=e(document.createElementNS(m,"text")),o.attr("x",h-20).attr("y",c+4).html(u),b.append(a).append(o);return b}if("x"===n||!n||null===n){for(b.addClass("labels x-labels"),l=t.length-1,i=(f-h-E)/l,$=0;$<t.length;$+=1)t.length>20?$%10===0&&(d=t[$][0],p=$*i,o=e(document.createElementNS(m,"text")),o.attr("x",p+h).attr("y",v-5).text(d),b.append(o)):(d=t[$][0],p=$*i,o=e(document.createElementNS(m,"text")),o.attr("x",p+h).attr("y",v-5).text(d),b.append(o));return b}}function c(e){var t;if(s.$svgElem.empty(),s.$svgElem.addClass("chart--content").attr("id","svg").attr("xmlns",m).attr("height","100%").attr("viewBox","0 0 "+f+" "+v).attr("xml:space","preserve"),e.length>0){if(t=o(e),l(t))return;s.$svgElem.append(i(t,"y")).append(i(t,"x")),s.$svgElem.append(d(t)),s.$svgElem.append(p(t)),s.$container.append(s.$svgElem)}}function u(){t()}var s={},m="http://www.w3.org/2000/svg",f=1e3,v=400,h=80,g=40,E=40;return Date.prototype.addDays=function(e){var t=new Date(this.valueOf());return t.setDate(t.getDate()+e),t},{init:u,render:c}}(jQuery),RepoSelect=function(e){function t(){f.$selectContainer=e(".repo-select"),f.$p=e(document.createElement("p")),f.$listContainer=e(document.createElement("div")),f.$ul=e(document.createElement("ul")),f.$newRepoForm=e(document.createElement("form")),f.$newRepoUser=e(document.createElement("input")),f.$newRepoRepo=e(document.createElement("input")),f.$newRepoBtn=e(document.createElement("button"))}function n(){f.$selectContainer.on("click",".repo-select-highlight",a),f.$ul.on("click","div.li-descriptions",r),f.$ul.on("click","span.li-remove",o),f.$newRepoForm.on("submit",l)}function a(e){e.stopPropagation(),f.$listContainer.toggleClass("hidden")}function r(e){e.stopPropagation();var t=e.currentTarget.children[0].innerHTML.split(" / ");m=t[1],i(v),HitApi.getEvents(t[0],t[1]),f.$listContainer.addClass("hidden")}function o(t){t.stopPropagation();var n=(t.target.previousElementSibling.dataset.repo,e(t.target).parent()),a=n.attr("id");v.splice(a,1),n.remove(),LS.setData("dev-dash-repos",v)}function l(t){t.preventDefault(),t.stopPropagation();var n="https://api.github.com/repos",a=t.currentTarget[0].value,r=t.currentTarget[1].value;e.getJSON(n+"/"+a+"/"+r).then(function(e){return v.unshift(e),f.$newRepoUser[0].value="",f.$newRepoRepo[0].value="",v}).then(d).then(i).catch(function(e){console.warn("Error fetching repo.")})}function p(e){if(e&&e.length){e.forEach(function(e){v.push(e)});var t=v[0].full_name.split("/");return m=t[1],HitApi.getEvents(t[0],t[1]),e}}function d(e){return LS.setData("dev-dash-repos",v),e}function i(t){t&&t.length?(f.$ul.html(""),t.forEach(function(t,n){var a=e(document.createElement("li"));a.attr("id",n).html('<div class="li-descriptions" data-repo="'+t.name+'">\n                             <p>'+t.owner.login+" / "+t.name+"</p>\n                             <p>"+t.description+'</p>\n                           </div>\n                           <span class="li-remove">&#10060</span>'),f.$ul.append(a)}),c()):(console.log("no repos, holmes"),c(),f.$listContainer.removeClass("hidden"))}function c(){f.$newRepoBtn.html("+"),f.$newRepoUser.attr("required","true").attr("placeholder","author"),f.$newRepoRepo.attr("required","true").attr("placeholder","repo"),f.$newRepoForm.addClass("new-repo-form").append(f.$newRepoUser).append(f.$newRepoRepo).append(f.$newRepoBtn),f.$listContainer.addClass("repo-list").append(f.$ul).append(f.$newRepoForm),f.$p.html('You are currently viewing the <span class="repo-select-highlight">'+m+"&#x25BC;</span> repository."),f.$selectContainer.append(f.$p).append(f.$listContainer)}function u(t){h?(p(LS.getData("dev-dash-repos")),i(v)):e.getJSON("https://api.github.com/users/"+t+"/repos?sort=updated").then(function(e){return e.slice(0,3)}).then(p).then(d).then(i)}function s(){t(),n(),f.$listContainer.addClass("hidden")}var m,f={},v=[],h=function(){return!!LS.getData("dev-dash-repos")}();return{init:s,getRepos:u}}(jQuery),Backgrounds=function(e){function t(){p.$body=e("body")}function n(){return(new Date).toDateString().slice(4,15)}function a(){var e=LS.getData("dev-dash-bg"),t=Math.floor(Math.random()*d.length),a={imgName:d[t],date:n()};return e?e:a}function r(){var e,t,n=d.indexOf(c.imgName);new Date(i)>new Date(c.date)?(e=7===n?0:n+1,t=d[e],LS.setData("dev-dash-bg",{imgName:t,date:i}),o(t)):(o(c.imgName),LS.setData("dev-dash-bg",{imgName:c.imgName,date:i}))}function o(e){p.$body.css("background-image","url(dist/assets/"+e+".jpg)")}function l(){t(),r()}var p={},d=["001","002","003","004","005","006","007","008"],i=n(),c=a();return{init:l}}(jQuery);$(document).ready(function(){Backgrounds.init(),RepoSelect.init(),Greet.init(),HitApi.init(),RenderTable.init(),RenderChart.init()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdldC1ldmVudHMuanMiLCJncmVldC5qcyIsImxvY2FsX3N0b3JhZ2UuanMiLCJyZW5kZXItdGFibGUuanMiLCJyZW5kZXItY2hhcnQuanMiLCJyZXBvLXNlbGVjdC5qcyIsImJhY2tncm91bmRzLmpzIiwiYXBwLmpzIl0sIm5hbWVzIjpbIkhpdEFwaSIsIiQiLCJjYWNoZURvbSIsIkRPTSIsIiRpbnB1dEZvcm0iLCJiaW5kRXZlbnRzIiwic3VibWl0IiwiZ2V0RXZlbnRzIiwicHJlcGFyZUV2ZW50cyIsImUiLCJ0eXBlIiwiZGF0ZSIsImNyZWF0ZWRfYXQiLCJhY3RvciIsImRpc3BsYXlfbG9naW4iLCJhdmF0YXIiLCJhdmF0YXJfdXJsIiwicGF5bG9hZCIsImF1dGhvciIsInJlcG8iLCJ1cmwiLCJyZXBvRXZlbnRzIiwiZ2V0SlNPTiIsInRoZW4iLCJoYW5kbGVSZXNwb25zZSIsInJlc3BvbnNlIiwiY29tbWl0VHlwZXMiLCJ0b2RvVHlwZXMiLCJtZXJnZVR5cGVzIiwiY29tbWl0RXZlbnRzIiwiZmlsdGVyIiwiaW5kZXhPZiIsIm1hcCIsInRvZG9FdmVudHMiLCJtZXJnZUV2ZW50cyIsIlJlbmRlclRhYmxlIiwicmVuZGVyIiwiUmVuZGVyQ2hhcnQiLCJpbml0IiwialF1ZXJ5IiwiR3JlZXQiLCIkZ3JlZXRpbmciLCIkb3ZlcmxheSIsIiRtb2RhbFByb21wdCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsIiRtb2RhbEVycm9yIiwiYXR0ciIsImFkZENsYXNzIiwiaHRtbCIsIm1vZGFsRm9ybSIsImFwcGVuZCIsImhhbmRsZVN1Ym1pdCIsInByZXZlbnREZWZhdWx0IiwibmFtZSIsImN1cnJlbnRUYXJnZXQiLCJ2YWx1ZSIsInRyaW0iLCJnaXRodWJOYW1lIiwiY2hlY2tVc2VyIiwicmVzIiwibG9naW4iLCJMUyIsInNldERhdGEiLCJoaWRlTW9kYWwiLCJkaXNwbGF5TWVzc2FnZSIsImNhdGNoIiwiZXJyIiwidSIsIm1ha2VNZXNzYWdlIiwidGltZU9mRGF5IiwidGVoRGF0ZSIsIkRhdGUiLCJpbml0aWFsSG91ciIsImdldEhvdXJzIiwic2hvd01vZGFsIiwic2hvdyIsImhpZGUiLCJyZW1vdmVDbGFzcyIsImNoZWNrU3RvcmFnZSIsInN0b3JhZ2UiLCJnZXREYXRhIiwidGV4dCIsIlJlcG9TZWxlY3QiLCJnZXRSZXBvcyIsImxvYyIsInZhbCIsInNldEl0ZW0iLCJKU09OIiwic3RyaW5naWZ5IiwicGFyc2UiLCJnZXRJdGVtIiwiY2xlYXJEYXRhIiwiY2xlYXIiLCJkZWxldGVEYXRhIiwicmVtb3ZlSXRlbSIsInJlc3VsdCIsInVpZCIsInRvU3RyaW5nIiwid2luZG93IiwibG9jYWxTdG9yYWdlIiwiZXhjZXB0aW9uIiwiY29uc29sZSIsImxvZyIsIiR0YWJsZUNvbnRhaW5lciIsImZvcm1hdERhdGUiLCJ0b0RhdGVTdHJpbmciLCJzbGljZSIsInJlcGxhY2UiLCJlbXB0eSIsImxlbmd0aCIsInJlbmRlckNvbW1pdEV2ZW50cyIsInJlbmRlclRvZG9FdmVudHMiLCJyZW5kZXJNZXJnZUV2ZW50cyIsImVzIiwiJGxpc3RDb250YWluZXIiLCIkY29sdW1uIiwiJGxpc3QiLCJmb3JFYWNoIiwiZXZ0IiwiY29tbWl0cyIsImNvbW1pdCIsIiRsaXN0SXRlbSIsIiRpbWciLCIkcGFyYWdyYXBoIiwiJHBhcmFTcGFuIiwiJGEiLCJjbGVhblVybCIsInNoYSIsIm1lc3NhZ2UiLCJjb21tZW50IiwiaHRtbF91cmwiLCJjb21taXRfaWQiLCJib2R5IiwiaXNzdWUiLCJudW1iZXIiLCJhY3Rpb24iLCJ0aXRsZSIsInJlZl90eXBlIiwicmVmIiwiam9pbiIsInB1bGxfcmVxdWVzdCIsIiRjb250YWluZXIiLCIkc3ZnRWxlbSIsImNyZWF0ZUVsZW1lbnROUyIsIm5zIiwiZm9ybWF0RGF0ZXMiLCJidWlsZERhdGVSYW5nZSIsImV2ZW50cyIsIm5vcm1EYXRlcyIsInN0YXJ0RGF0ZSIsInN0b3BEYXRlIiwiZGF0ZUFycmF5IiwiY3VycmVudERhdGUiLCJwdXNoIiwiYWRkRGF5cyIsImdldENoYXJ0WU1heCIsInBvaW50cyIsIm1heE51bUV2dHMiLCJxdW90aWVudCIsInJlZHVjZSIsImEiLCJiIiwiTWF0aCIsIm1heCIsImZsb29yIiwicHJlcGFyZURhdGVFdmVudHMiLCJzb3J0ZWRFdmVudHMiLCJjaGFydERhdGEiLCJzb3J0IiwieCIsInNhbWVEYW1uRGF5IiwicG9pbnRzQXJyIiwiZ2VuZXJhdGVDaXJjbGVzIiwiZ3JvdXAiLCJudW1Qb2ludHMiLCJjaGFydFlNYXgiLCJ4TXVsdGlwbGUiLCJ3aWR0aCIsInhNYXJnaW4iLCJzcGFjZXIiLCJ5TXVsdGlwbGUiLCJoZWlnaHQiLCJ5TWFyZ2luIiwiZm9ybWF0dGVkUG9pbnRzIiwicG9pbnQiLCJpbmQiLCJjaXJjbGUiLCJjeCIsImN5IiwiciIsImdlbmVyYXRlTGluZXMiLCJpIiwibGluZSIsImdlbkF4aXNMYWJlbHMiLCJheGlzIiwibnVtQXhpc1RpY2tzIiwieFBvcyIsInhWYWx1ZSIsInlQb3MiLCJ5VmFsdWUiLCJ5U3BhY2luZyIsIm1heFl2YWwiLCJwcm90b3R5cGUiLCJkYXlzIiwiZGF0IiwidGhpcyIsInZhbHVlT2YiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsIiRzZWxlY3RDb250YWluZXIiLCIkcCIsIiR1bCIsIiRuZXdSZXBvRm9ybSIsIiRuZXdSZXBvVXNlciIsIiRuZXdSZXBvUmVwbyIsIiRuZXdSZXBvQnRuIiwib24iLCJzaG93UmVwb0xpc3QiLCJzZWxlY3RSZXBvIiwiZGVsZXRlUmVwbyIsImFkZFJlcG8iLCJzdG9wUHJvcGFnYXRpb24iLCJ0b2dnbGVDbGFzcyIsInBpY2tlZCIsImNoaWxkcmVuIiwiaW5uZXJIVE1MIiwic3BsaXQiLCJzZWxlY3RlZFJlcG8iLCJwb3B1bGF0ZU1lbnUiLCJyZXBvcyIsInNlbGVjdGVkRWxlbWVudCIsInRhcmdldCIsInByZXZpb3VzRWxlbWVudFNpYmxpbmciLCJkYXRhc2V0IiwicGFyZW50Iiwic2VsZWN0ZWRFbGVtSWQiLCJzcGxpY2UiLCJyZW1vdmUiLCJhcGlVcmwiLCJuZXdBdXRob3IiLCJuZXdSZXBvIiwidW5zaGlmdCIsInNhdmVSZXBvcyIsIndhcm4iLCJwb3B1bGF0ZVJlcG9zIiwiZGF0YSIsInJlcG9aZXJvIiwiZnVsbF9uYW1lIiwiJGxpIiwib3duZXIiLCJkZXNjcmlwdGlvbiIsInVzZXJOYW1lIiwiQmFja2dyb3VuZHMiLCIkYm9keSIsIm1ha2VEYXRlIiwibG9hZFN0YXRlIiwic3RvcmVkU3RhdGUiLCJpbWdJbmR4IiwicmFuZG9tIiwiYmdBcnIiLCJuZXdTdGF0ZSIsImltZ05hbWUiLCJwaWNrQmFja2dyb3VuZCIsIm5ld0ltZ0luZGV4IiwibmV3SW1nTmFtZSIsImN1cm50SW1nSW5keCIsInN0YXRlIiwidG9kYXkiLCJpbWFnZU5hbWUiLCJjc3MiLCJyZWFkeSJdLCJtYXBwaW5ncyI6IllBR0EsSUFBQUEsUUFBQSxTQUFBQyxHQU1BLFFBQUFDLEtBQ0FDLEVBQUFDLFdBQUFILEVBQUEsZUFLQSxRQUFBSSxLQUNBRixFQUFBQyxXQUFBRSxPQUFBQyxHQUtBLFFBQUFDLEdBQUFDLEdBQ0EsT0FDQUMsS0FBQUQsRUFBQUMsS0FDQUMsS0FBQUYsRUFBQUcsV0FDQUMsTUFBQUosRUFBQUksTUFBQUMsY0FDQUMsT0FBQU4sRUFBQUksTUFBQUcsV0FDQUMsUUFBQVIsRUFBQVEsU0FNQSxRQUFBVixHQUFBVyxFQUFBQyxHQUVBLEdBQUFDLEdBQUEsK0JBQ0FDLEVBQUFELEVBQUEsSUFBQUYsRUFBQSxJQUFBQyxFQUFBLFNBRUFsQixHQUFBcUIsUUFBQUQsR0FBQUUsS0FBQUMsR0FLQSxRQUFBQSxHQUFBQyxHQUdBLEdBQUFDLElBQUEsWUFDQSxzQkFHQUMsR0FBQSxjQUNBLG9CQUNBLGVBQ0EsbUJBQ0Esc0JBR0FDLEdBQUEsY0FDQSxtQkFDQSx5QkFDQSxpQ0FJQUMsRUFBQUosRUFDQUssT0FBQSxTQUFBckIsR0FBQSxNQUFBaUIsR0FBQUssUUFBQXRCLEVBQUFDLFNBQUEsSUFDQXNCLElBQUF4QixHQUdBeUIsRUFBQVIsRUFDQUssT0FBQSxTQUFBckIs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QUFBTCxRQUlBLElBQUE5TCxNQUFBb00sR0FBQSxHQUFBcE0sTUFBQW1NLEVBQUFoUSxPQUdBNlAsRUFBQSxJQUFBRSxFQUFBLEVBQUFBLEVBQUEsRUFHQUQsRUFBQUwsRUFBQUksR0FHQTFNLEdBQUFDLFFBQUEsZUFDQXVNLFFBQUFHLEVBQ0E5UCxLQUFBaVEsSUFJQXhPLEVBQUFxTyxLQUdBck8sRUFBQXVPLEVBQUFMLFNBRUF4TSxHQUFBQyxRQUFBLGVBQ0F1TSxRQUFBSyxFQUFBTCxRQUNBM1AsS0FBQWlRLEtBUUEsUUFBQXhPLEdBQUF5TyxHQUNBMVEsRUFBQTJQLE1BQ0FnQixJQUFBLG1CQUFBLG1CQUFBRCxFQUFBLFNBS0EsUUFBQXZPLEtBQ0FwQyxJQUNBcVEsSUF2RkEsR0FBQXBRLE1BQ0FpUSxHQUFBLE1BQUEsTUFBQSxNQUFBLE1BQUEsTUFBQSxNQUFBLE1BQUEsT0FDQVEsRUFBQWIsSUFDQVksRUFBQVgsR0F5RkEsUUFDQTFOLEtBQUFBLElBR0FDLE9DbEdBdEMsR0FBQTJDLFVBQUFtTyxNQUFBLFdBRUFsQixZQUFBdk4sT0FFQTZDLFdBQUE3QyxPQUVBRSxNQUFBRixPQUVBdEMsT0FBQXNDLE9BRUFILFlBQUFHLE9BRUFELFlBQUFDIiwiZmlsZSI6ImRldi1kYXNoLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoganNoaW50IGVzdmVyc2lvbjo2ICovXG4vKiBnbG9iYWxzIGpRdWVyeSwgZG9jdW1lbnQsIGNvbnNvbGUsIFJlbmRlclRhYmxlLCBSZW5kZXJDaGFydCAqL1xuXG52YXIgSGl0QXBpID0gKGZ1bmN0aW9uICgkKSB7XG5cbiAgICB2YXIgRE9NID0ge307XG4gICAgXG4gICAgXG4gICAgLy8gY2FjaGUgRE9NIGVsZW1lbnRzXG4gICAgZnVuY3Rpb24gY2FjaGVEb20oKSB7XG4gICAgICAgIERPTS4kaW5wdXRGb3JtID0gJCgnI2lucHV0LWZvcm0nKTtcbiAgICB9XG4gICAgXG5cbiAgICAvLyBiaW5kIGV2ZW50c1xuICAgIGZ1bmN0aW9uIGJpbmRFdmVudHMoKSB7XG4gICAgICAgIERPTS4kaW5wdXRGb3JtLnN1Ym1pdChnZXRFdmVudHMpO1xuICAgIH1cblxuXG4gICAgLy8gcHJlcGFyZSBldmVudHMgcHJpb3IgdG8gY2FsbGluZyByZW5kZXJlcnNcbiAgICBmdW5jdGlvbiBwcmVwYXJlRXZlbnRzKGUpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGUgICAgOiBlLnR5cGUsXG4gICAgICAgICAgICBkYXRlICAgIDogZS5jcmVhdGVkX2F0LFxuICAgICAgICAgICAgYWN0b3IgICA6IGUuYWN0b3IuZGlzcGxheV9sb2dpbixcbiAgICAgICAgICAgIGF2YXRhciAgOiBlLmFjdG9yLmF2YXRhcl91cmwsXG4gICAgICAgICAgICBwYXlsb2FkIDogZS5wYXlsb2FkXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgXG4gICAgLy8gZ2V0IGdpdGh1YiBldmVudHNcbiAgICBmdW5jdGlvbiBnZXRFdmVudHMoYXV0aG9yLCByZXBvKSB7XG4gICAgICAgIFxuICAgICAgICB2YXIgdXJsPSAnaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9yZXBvcycsXG4gICAgICAgICAgICByZXBvRXZlbnRzID0gYCR7dXJsfS8ke2F1dGhvcn0vJHtyZXBvfS9ldmVudHNgO1xuXG4gICAgICAgICQuZ2V0SlNPTihyZXBvRXZlbnRzKS50aGVuKGhhbmRsZVJlc3BvbnNlKTtcbiAgICB9XG5cblxuICAgIC8vIGhhbmRsZSBHSCBKU09OIHJlc3BvbnNlIGRhdGFcbiAgICBmdW5jdGlvbiBoYW5kbGVSZXNwb25zZShyZXNwb25zZSkge1xuICAgICAgICBcbiAgICAgICAgLy8gd2UncmUgc3BsaXR0aW5nIGV2ZW50cyBpbnRvIDMgY2F0ZWdvcmllcywgYmFzZWQgb24gZXZlbnQgdHlwZVxuICAgICAgICB2YXIgY29tbWl0VHlwZXMgPSBbJ1B1c2hFdmVudCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAnQ29tbWl0Q29tbWVudEV2ZW50J1xuICAgICAgICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0b2RvVHlwZXMgPSBbJ0lzc3Vlc0V2ZW50JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAnSXNzdWVDb21tZW50RXZlbnQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICdQcm9qZWN0RXZlbnQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICdQcm9qZWN0Q2FyZEV2ZW50JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAnUHJvamVjdENvbHVtbkV2ZW50J1xuICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbWVyZ2VUeXBlcyA9IFsnQ3JlYXRlRXZlbnQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAnUHVsbFJlcXVlc3RFdmVudCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICdQdWxsUmVxdWVzdFJldmlld0V2ZW50JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJ1B1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudEV2ZW50J1xuICAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIGNyZWF0ZSBhcnJheSBvZiBjb21taXQtcmVsYXRlZCBldmVudHNcbiAgICAgICAgICAgIGNvbW1pdEV2ZW50cyA9IHJlc3BvbnNlXG4gICAgICAgICAgICAgICAgLmZpbHRlcigoZSkgPT4gY29tbWl0VHlwZXMuaW5kZXhPZihlLnR5cGUpICE9PSAtMSlcbiAgICAgICAgICAgICAgICAubWFwKHByZXBhcmVFdmVudHMpLFxuXG4gICAgICAgICAgICAvLyBjcmVhdGUgYXJyYXkgb2YgdG9kby1yZWxhdGVkIGV2ZW50c1xuICAgICAgICAgICAgdG9kb0V2ZW50cyA9IHJlc3BvbnNlXG4gICAgICAgICAgICAgICAgLmZpbHRlcigoZSkgPT4gdG9kb1R5cGVzLmluZGV4T2YoZS50eXBlKSAhPT0gLTEpXG4gICAgICAgICAgICAgICAgLm1hcChwcmVwYXJlRXZlbnRzKSxcblxuICAgICAgICAgICAgLy8gY3JlYXRlIGJ1aWxkIGFycmF5IG9mIG1lcmdlLXJlbGF0ZWQgZXZlbnRzXG4gICAgICAgICAgICBtZXJnZUV2ZW50cyA9IHJlc3BvbnNlXG4gICAgICAgICAgICAgICAgLmZpbHRlcigoZSkgPT4gbWVyZ2VUeXBlcy5pbmRleE9mKGUudHlwZSkgIT09IC0xKVxuICAgICAgICAgICAgICAgIC5tYXAocHJlcGFyZUV2ZW50cyk7XG4gICAgICAgIFxuICAgICAgICAvLyBjYWxsIHJlbmRlcmVyc1xuICAgICAgICBSZW5kZXJUYWJsZS5yZW5kZXIoY29tbWl0RXZlbnRzLCB0b2RvRXZlbnRzLCBtZXJnZUV2ZW50cyk7XG4gICAgICAgIFJlbmRlckNoYXJ0LnJlbmRlcihyZXNwb25zZS5tYXAocHJlcGFyZUV2ZW50cykpO1xuICAgIH1cbiAgICBcbiAgICBcbiAgICAvLyBwdWJsaWMgaW5pdCBtZXRob2RcbiAgICBmdW5jdGlvbiBpbml0KCkge1xuICAgICAgICBjYWNoZURvbSgpO1xuICAgICAgICBiaW5kRXZlbnRzKCk7XG4gICAgfVxuICAgIFxuICAgIFxuICAgIC8vIHJldHVybiBwdWJsaWMgbWV0aG9kc1xuICAgIHJldHVybiB7XG4gICAgICAgIGluaXQ6IGluaXQsXG4gICAgICAgIGdldEV2ZW50czogZ2V0RXZlbnRzXG4gICAgfTtcblxufShqUXVlcnkpKTtcbiIsIi8qIGpzaGludCBlc3ZlcnNpb246NiAqL1xuLyogZ2xvYmFscyBqUXVlcnksIGRvY3VtZW50LCBjb25zb2xlLCBMUywgUmVwb1NlbGVjdCAqL1xuXG52YXIgR3JlZXQgPSAoZnVuY3Rpb24oJCkge1xuICAgIFxuICAgIHZhciBuYW1lLFxuICAgICAgICBnaXRodWJOYW1lLFxuICAgICAgICBET00gPSB7fSxcbiAgICAgICAgXG4gICAgICAgIC8vIG1vZGFsIHByb21wdCB0ZW1wbGF0ZVxuICAgICAgICBtb2RhbEZvcm0gPSBgPGZvcm0gaWQ9XCJ1c2VyLW1vZGFsLWZvcm1cIiBjbGFzcz1cIkdyaWQgR3JpZC0tZ3V0dGVycyBHcmlkLS0xb2YyXCIgYWN0aW9uPVwic3VibWl0XCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJHcmlkLWNlbGwgSW5wdXRBZGRPblwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiSW5wdXRBZGRPbi1pdGVtXCI+WW91ciBOYW1lOjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgaWQ9XCJ1c2VyLW1vZGFsLW5hbWVcIiBjbGFzcz1cIklucHV0QWRkT24tZmllbGRcIiB0eXBlPVwidGV4dFwiIHJlcXVpcmVkPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIkdyaWQtY2VsbCBJbnB1dEFkZE9uXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJJbnB1dEFkZE9uLWl0ZW1cIj5HaXRIdWIgVXNlciBOYW1lOjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgaWQ9XCJ1c2VyLW1vZGFsLXVzZXJuYW1lXCIgIGNsYXNzPVwiSW5wdXRBZGRPbi1maWVsZFwiIHR5cGU9XCJ0ZXh0XCIgcmVxdWlyZWQ+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJHcmlkLWNlbGwgSW5wdXRBZGRPblwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJJbnB1dEFkZE9uLWl0ZW1cIiBpZD1cInVzZXItbW9kYWwtYnV0dG9uXCI+R28hPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Zvcm0+YDtcbiAgICBcbiAgICBcbiAgICAvLyBjYWNoZSBET00gZWxlbWVudHNcbiAgICBmdW5jdGlvbiBjYWNoZURvbSgpIHtcbiAgICAgICAgRE9NLiRncmVldGluZyAgICA9ICQoJy5ncmVldGluZycpO1xuICAgICAgICBET00uJG92ZXJsYXkgICAgID0gJCgnPGRpdiBpZD1cIm92ZXJsYXlcIj48L2Rpdj4nKTtcbiAgICAgICAgRE9NLiRtb2RhbFByb21wdCA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JykpO1xuICAgICAgICBET00uJG1vZGFsRXJyb3IgID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJykpO1xuXG4gICAgICAgIERPTS4kbW9kYWxQcm9tcHRcbiAgICAgICAgICAgIC5hdHRyKCdpZCcsICd1c2VyLW1vZGFsJylcbiAgICAgICAgICAgIC5hZGRDbGFzcygndXNlci1tb2RhbCcpXG4gICAgICAgICAgICAuaHRtbChtb2RhbEZvcm0pO1xuICAgICAgICBcbiAgICAgICAgRE9NLiRtb2RhbEVycm9yXG4gICAgICAgICAgICAuYWRkQ2xhc3MoJ3VzZXItbW9kYWwtZXJyb3InKVxuICAgICAgICAgICAgLmh0bWwoJ0dpdEh1YiBVc2VybmFtZSBOb3QgRm91bmQnKTtcbiAgICAgICAgXG4gICAgICAgICQoJ2JvZHknKVxuICAgICAgICAgICAgLmFwcGVuZChET00uJG1vZGFsUHJvbXB0KTtcbiAgICB9XG4gICAgXG4gICAgXG4gICAgLy8gYmluZCBldmVudHNcbiAgICBmdW5jdGlvbiBiaW5kRXZlbnRzKCkge1xuICAgICAgICAkKCcjdXNlci1tb2RhbC1mb3JtJykuc3VibWl0KGhhbmRsZVN1Ym1pdCk7XG4gICAgfVxuICAgIFxuICAgIFxuICAgIC8vIGhhbmRsZSBtb2RhbCBzdWJtaXRcbiAgICBmdW5jdGlvbiBoYW5kbGVTdWJtaXQoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIFxuICAgICAgICAvLyBzZXQgbW9kdWxlIHNjb3BlIG5hbWVzIHRvIGlucHV0IG5hbWVzXG4gICAgICAgIG5hbWUgPSBlLmN1cnJlbnRUYXJnZXRbMF0udmFsdWUudHJpbSgpO1xuICAgICAgICBnaXRodWJOYW1lID0gZS5jdXJyZW50VGFyZ2V0WzFdLnZhbHVlLnRyaW0oKTtcbiAgICAgICAgXG4gICAgICAgIGNoZWNrVXNlcihnaXRodWJOYW1lKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgICAgIGlmIChyZXMubG9naW4gPT09IGdpdGh1Yk5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIHNhdmUgdXNlciBkZXRhaWxzIHRvIGxvY2FsIHN0b3JhZ2VcbiAgICAgICAgICAgICAgICAgICAgTFMuc2V0RGF0YSgnZGV2LWRhc2gtdXNlcicsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUgICAgIDogZS5jdXJyZW50VGFyZ2V0WzBdLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZ2l0aHViTmFtZSA6IGUuY3VycmVudFRhcmdldFsxXS52YWx1ZVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAvLyByZXRyYWN0IHRoZSBtb2RhbCBwYW5lbFxuICAgICAgICAgICAgICAgICAgICBoaWRlTW9kYWwoKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBjYWxsIGRpc3BsYXkgbWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5TWVzc2FnZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gd2FybiB1c2VyXG4gICAgICAgICAgICAgICAgRE9NLiRtb2RhbFByb21wdFxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKERPTS4kbW9kYWxFcnJvcik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICBcbiAgICAvLyBjaGVjayBHaXRodWIgdXNlcm5hbWVcbiAgICBmdW5jdGlvbiBjaGVja1VzZXIodSkge1xuICAgICAgICByZXR1cm4gJC5nZXRKU09OKCdodHRwczovL2FwaS5naXRodWIuY29tL3VzZXJzLycgKyB1KTtcbiAgICB9XG4gICAgXG4gICAgXG4gICAgLy8gYXNzZW1ibGUgdGltZS1iYXNlZCBtZXNzYWdlIHRvIGdyZWV0IHVzZXJcbiAgICBmdW5jdGlvbiBtYWtlTWVzc2FnZSgpIHtcbiAgICAgICAgdmFyIHRpbWVPZkRheSxcbiAgICAgICAgICAgIHRlaERhdGUgPSBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgaW5pdGlhbEhvdXIgPSB0ZWhEYXRlLmdldEhvdXJzKCk7XG4gICAgICAgIFxuICAgICAgICBpZiAoaW5pdGlhbEhvdXIgPCAxMikge1xuICAgICAgICAgICAgdGltZU9mRGF5ID0gXCJtb3JuaW5nXCI7XG4gICAgICAgIH0gZWxzZSBpZiAoaW5pdGlhbEhvdXIgPj0gMTIgJiYgaW5pdGlhbEhvdXIgPCAxNykge1xuICAgICAgICAgICAgdGltZU9mRGF5ID0gXCJhZnRlcm5vb25cIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRpbWVPZkRheSA9IFwiZXZlbmluZ1wiO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGBHb29kICR7dGltZU9mRGF5fSwgJHtuYW1lfS5gO1xuICAgIH1cbiAgICBcbiAgICBcbiAgICAvLyBzaG93IG1vZGFsIHBhbmVsLiBTbGlkZXMgZG93biBmcm9tIHRvcFxuICAgIGZ1bmN0aW9uIHNob3dNb2RhbCgpIHtcbiAgICAgICAgXG4gICAgICAgIC8vIHNob3cgb3ZlcmxheVxuICAgICAgICBET00uJG92ZXJsYXkuc2hvdygpO1xuICAgICAgICBcbiAgICAgICAgLy8gc2hvdyBtb2RhbFxuICAgICAgICBET00uJG1vZGFsUHJvbXB0XG4gICAgICAgICAgICAuYWRkQ2xhc3MoJ3VzZXItbW9kYWwtc2hvdycpO1xuICAgIH1cbiAgICBcbiAgICBcbiAgICAvLyByZXRyYWN0IG1vZGFsIHBhbmVsXG4gICAgZnVuY3Rpb24gaGlkZU1vZGFsKCkge1xuICAgICAgICBcbiAgICAgICAgLy8gc2hvdyBvdmVybGF5XG4gICAgICAgIERPTS4kb3ZlcmxheS5oaWRlKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBoaWRlIG1vZGFsXG4gICAgICAgIERPTS4kbW9kYWxQcm9tcHRcbiAgICAgICAgICAgIC5yZW1vdmVDbGFzcygndXNlci1tb2RhbC1zaG93Jyk7XG4gICAgfVxuICAgIFxuICAgIFxuICAgIC8vIGNoZWNrIGxvY2FsIHN0b3JhZ2UgZm9yIHVzZXJcbiAgICBmdW5jdGlvbiBjaGVja1N0b3JhZ2UoKSB7XG4gICAgICAgIFxuICAgICAgICB2YXIgc3RvcmFnZSA9IExTLmdldERhdGEoJ2Rldi1kYXNoLXVzZXInKTtcbiAgICAgICAgXG4gICAgICAgIC8vIGlmIHVzZXIgZm91bmQgaW4gbG9jYWwgc3RvcmFnZSwgZ28gc3RyYWlnaHQgdG8gZ3JlZXRpbmcuXG4gICAgICAgIC8vIG90aGVyd2lzZSwgc2hvdyBtb2RhbCAmIHByb21wdCB1c2VyIGZvciBkZXRhaWxzXG4gICAgICAgIGlmIChzdG9yYWdlICYmIHN0b3JhZ2UubmFtZSkge1xuICAgICAgICAgICAgbmFtZSA9IHN0b3JhZ2UubmFtZTtcbiAgICAgICAgICAgIGdpdGh1Yk5hbWUgPSBzdG9yYWdlLmdpdGh1Yk5hbWU7XG4gICAgICAgICAgICBkaXNwbGF5TWVzc2FnZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2hvd01vZGFsKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG5cbiAgICAvLyByZW5kZXIgRE9NIGFuZCBjYWxsIFJlcG9TZWxlY3QuZ2V0UmVwb3MoKVxuICAgIGZ1bmN0aW9uIGRpc3BsYXlNZXNzYWdlKCkge1xuICAgICAgICBET00uJGdyZWV0aW5nLnRleHQobWFrZU1lc3NhZ2UoKSk7XG4gICAgICAgIFJlcG9TZWxlY3QuZ2V0UmVwb3MoZ2l0aHViTmFtZSk7XG4gICAgfVxuICAgIFxuICAgIFxuICAgIC8vIHB1YmxpYyBpbml0IG1ldGhvZFxuICAgIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICAgIGNhY2hlRG9tKCk7XG4gICAgICAgIFxuICAgICAgICBET00uJG92ZXJsYXkuaGlkZSgpO1xuICAgICAgICAkKCdib2R5JykuYXBwZW5kKERPTS4kb3ZlcmxheSk7IC8vIHRoZW4gYXBwZW5kIGl0IHRvIERPTVxuICAgICAgICBcbiAgICAgICAgYmluZEV2ZW50cygpO1xuICAgICAgICBcbiAgICAgICAgY2hlY2tTdG9yYWdlKCk7XG4gICAgfVxuICAgIFxuICAgIFxuICAgIC8vIGV4cG9ydCBwdWJsaWMgbWV0aG9kc1xuICAgIHJldHVybiB7XG4gICAgICAgIGluaXQ6IGluaXRcbiAgICB9O1xuICAgIFxufShqUXVlcnkpKTtcbiIsIi8qIGpzaGludCBlc3ZlcnNpb246NiAqL1xuLyogZ2xvYmFscyB3aW5kb3cgKi9cblxudmFyIExTID0gKGZ1bmN0aW9uKCkge1xuXG4gICAvKiogXG4gICAgKiBsb2NhbFN0b3JhZ2UgZmVhdHVyZSBkZXRlY3QgJiByZXR1cm4gbG9jYWwgcmVmZXJlbmNlXG4gICAgKiBAcGFyYW0gICAgICAgW25vbmVdXG4gICAgKiBAcmV0dXJucyAgICAgW0JPT0xFQU5dICAgW3JldHVybnMgdHJ1ZSBpZiBzdG9yZWQgc3RyaW5nID09PSB1aWRdXG4gICAgKi9cbiAgIHZhciBzdG9yYWdlID0gKGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHVpZCA9IG5ldyBEYXRlKCkudG9TdHJpbmcoKSwgLy8gZGF0ZSBtdXN0IGJlIGEgc3RyaW5nXG4gICAgICAgICBzdG9yYWdlLFxuICAgICAgICAgcmVzdWx0O1xuXG4gICAgICB0cnkge1xuICAgICAgICAgc3RvcmFnZSA9IHdpbmRvdy5sb2NhbFN0b3JhZ2U7XG4gICAgICAgICBzdG9yYWdlLnNldEl0ZW0odWlkLCB1aWQpO1xuICAgICAgICAgcmVzdWx0ID0gc3RvcmFnZS5nZXRJdGVtKHVpZCkgPT09IHVpZDtcbiAgICAgICAgIHN0b3JhZ2UucmVtb3ZlSXRlbSh1aWQpO1xuICAgICAgICAgcmV0dXJuIHJlc3VsdCAmJiBzdG9yYWdlO1xuICAgICAgfSBjYXRjaCAoZXhjZXB0aW9uKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ1Byb2JsZW16IScpO1xuICAgICAgfVxuICAgfSgpKTtcblxuICAgLyoqIFxuICAgICogU3RvcmUgaXRlbSBpbiBsb2NhbCBzdG9yYWdlIGlmIHN0b3JhZ2UgZXhpc3RzXG4gICAgKiBAcGFyYW0gICAgICAgW3N0cmluZ10gICAgbG9jICAgICAgICAgW2xvY2FsIHN0b3JhZ2Ugc3ViLWxvY2F0aW9uXVxuICAgICogQHBhcmFtICAgICAgIFtzdHJpbmddICAgIHZhbCAgICAgICAgIFtzdHJpbmcgdG8gYmUgc3RvcmVkXVxuICAgICogQHBhcmFtICAgICAgIFtmdW5jdGlvbl0gIHN0b3JhZ2UgICAgIFtsb2NhbFN0b3JhZ2UgZmVhdHVyZSBkZXRlY3QgJiBsb2NhbCByZWZdXG4gICAgKi9cbiAgIGZ1bmN0aW9uIHNldERhdGEobG9jLCB2YWwpIHtcbiAgICAgIGlmIChzdG9yYWdlKSB7XG4gICAgICAgICBzdG9yYWdlLnNldEl0ZW0obG9jLCBKU09OLnN0cmluZ2lmeSh2YWwpKTtcbiAgICAgIH1cbiAgIH1cblxuICAgLyoqIFxuICAgICogR2V0IGxvY2FsIHN0b3JhZ2UgaWYgc3RvcmFnZSBleGlzdHNcbiAgICAqIEBwYXJhbSAgICAgICBbc3RyaW5nXSAgICBsb2MgICAgICAgICBbbG9jYWwgc3RvcmFnZSBzdWItbG9jYXRpb25dXG4gICAgKiBAcGFyYW0gICAgICAgW2Z1bmN0aW9uXSAgc3RvcmFnZSAgICAgW2xvY2FsU3RvcmFnZSBmZWF0dXJlIGRldGVjdCAmIGxvY2FsIHJlZl1cbiAgICAqIEByZXR1cm5zICAgICBbSlNPTiBzdHJpbmddICAgICAgICAgICBbZmV0Y2ggc3RvcmVkIHN0cmluZywgcmV0dXJuIEpTT05dXG4gICAgKi9cbiAgIGZ1bmN0aW9uIGdldERhdGEobG9jKSB7XG4gICAgICBpZiAoc3RvcmFnZSkge1xuICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2Uoc3RvcmFnZS5nZXRJdGVtKGxvYykpO1xuICAgICAgfVxuICAgfVxuXG4gICAvKiogXG4gICAgKiBEZWxldGUgQUxMIGtleXMgZnJvbSBsb2NhbCBzdG9yYWdlIGlmIHBhc3NcbiAgICAqIEBwYXJhbSAgICAgICBbZnVuY3Rpb25dICBzdG9yYWdlICAgICBbbG9jYWxTdG9yYWdlIGZlYXR1cmUgZGV0ZWN0ICYgbG9jYWwgcmVmXVxuICAgICogQHJldHVybnMgICAgIFtmdW5jdGlvbl0gIC5jbGVhciAgICAgIFt3aXBlcyBsb2NhbCBzdG9yYWdlXVxuICAgICovXG4gICBmdW5jdGlvbiBjbGVhckRhdGEoKSB7XG4gICAgICBpZiAoc3RvcmFnZSkge1xuICAgICAgICAgcmV0dXJuIHN0b3JhZ2UuY2xlYXIoKTtcbiAgICAgIH1cbiAgIH1cblxuICAgLyoqIFxuICAgICogRGVsZXRlIE9ORSBrZXkgZnJvbSBsb2NhbCBzdG9yYWdlIGlmIHBhc3NcbiAgICAqIEBwYXJhbSAgICAgICBbc3RyaW5nXSAgICBsb2MgICAgICAgICBbdGhlIGtleSB0byBkZWxldGUgZnJvbSBsb2NhbFN0b3JhZ2VdXG4gICAgKiBAcGFyYW0gICAgICAgW2Z1bmN0aW9uXSAgc3RvcmFnZSAgICAgW2xvY2FsU3RvcmFnZSBmZWF0dXJlIGRldGVjdCAmIGxvY2FsIHJlZl1cbiAgICAqIEByZXR1cm5zICAgICBbZnVuY3Rpb25dICAuY2xlYXIgICAgICBbd2lwZXMgbG9jYWwgc3RvcmFnZV1cbiAgICAqL1xuICAgZnVuY3Rpb24gZGVsZXRlRGF0YShsb2MpIHtcbiAgICAgIGlmIChzdG9yYWdlKSB7XG4gICAgICAgICByZXR1cm4gc3RvcmFnZS5yZW1vdmVJdGVtKGxvYyk7XG4gICAgICB9XG4gICB9XG5cbiAgIHJldHVybiB7XG4gICAgICBzZXREYXRhOiBzZXREYXRhLFxuICAgICAgZ2V0RGF0YTogZ2V0RGF0YSxcbiAgICAgIGRlbGV0ZURhdGE6IGRlbGV0ZURhdGEsXG4gICAgICBjbGVhckRhdGE6IGNsZWFyRGF0YVxuICAgfTtcblxufSgpKTtcbiIsIi8qIGpzaGludCBlc3ZlcnNpb246NiAqL1xuLyogZ2xvYmFscyBqUXVlcnksIGRvY3VtZW50ICovXG5cbnZhciBSZW5kZXJUYWJsZSA9IChmdW5jdGlvbiAoJCkge1xuXG4gICAgdmFyIERPTSA9IHt9O1xuICAgIFxuICAgIFxuICAgIC8vIGNhY2hlIERPTSBlbGVtZW50c1xuICAgIGZ1bmN0aW9uIGNhY2hlRG9tKCkge1xuICAgICAgICBET00uJHRhYmxlQ29udGFpbmVyID0gJCgnLnRhYmxlLWNvbnRhaW5lcicpO1xuICAgIH1cbiAgICBcbiAgICBcbiAgICAvLyBmb3JtYXQgZGF0ZXNcbiAgICBmdW5jdGlvbiBmb3JtYXREYXRlKGRhdGUpIHtcblxuICAgICAgICByZXR1cm4gbmV3IERhdGUoZGF0ZSkgICAgIC8vIG1ha2UgZGF0ZSBvYmplY3QgZm9yIGRheSAmIG1vbnRoIGFiYnJldlxuICAgICAgICAgICAgLnRvRGF0ZVN0cmluZygpICAgICAgIC8vIGNvbnZlcnQgb2JqZWN0IHRvIGEgc3RyaW5nXG4gICAgICAgICAgICAuc2xpY2UoMCwgMTUpICAgICAgICAgLy8gcmVtb3ZlIGV2ZXJ5dGhpbmcgYWZ0ZXIgdGhlIFlZWVlcbiAgICAgICAgICAgIC5yZXBsYWNlKC8gMC9nLCAnICcpOyAvLyByZW1vdmUgbGVhZGluZyB6ZXJvcyAoZXguICcwNCcgPT4gJzQnKVxuICAgIH1cblxuXG4gICAgLy8gcHVibGljIHJlbmRlciBtZXRob2QgY2FsbHMgY2F0ZWdvcnkgcmVuZGVyZXJzIGlmIGNhdGVnb3J5IGhhcyBldmVudHNcbiAgICBmdW5jdGlvbiByZW5kZXIoY29tbWl0RXZlbnRzLCB0b2RvRXZlbnRzLCBtZXJnZUV2ZW50cykge1xuXG4gICAgICAgIC8vIGNsZWFyIHByZXZpb3VzIHJlc3VsdHNcbiAgICAgICAgRE9NLiR0YWJsZUNvbnRhaW5lclxuICAgICAgICAgICAgLmVtcHR5KCk7XG4gICAgICAgIFxuICAgICAgICBpZiAoY29tbWl0RXZlbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHJlbmRlckNvbW1pdEV2ZW50cyhjb21taXRFdmVudHMpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRvZG9FdmVudHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmVuZGVyVG9kb0V2ZW50cyh0b2RvRXZlbnRzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChtZXJnZUV2ZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZW5kZXJNZXJnZUV2ZW50cyhtZXJnZUV2ZW50cyk7XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIC8vIHJlbmRlciBjb21taXQgZXZlbnRzXG4gICAgZnVuY3Rpb24gcmVuZGVyQ29tbWl0RXZlbnRzKGVzKSB7XG5cbiAgICAgICAgLy8gZ2V0cyBQdXNoRXZlbnRzICYgQ29tbWl0Q29tbWVudEV2ZW50c1xuXG4gICAgICAgIHZhciAkbGlzdENvbnRhaW5lciA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JykpLFxuICAgICAgICAgICAgJGNvbHVtbiAgICAgICA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JykpLFxuICAgICAgICAgICAgJGxpc3QgICAgICAgICA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKSk7XG5cbiAgICAgICAgZXMuZm9yRWFjaChmdW5jdGlvbiAoZXZ0KSB7XG5cbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGV2dCk7XG5cbiAgICAgICAgICAgIGlmIChldnQudHlwZSA9PT0gJ1B1c2hFdmVudCcpIHtcblxuICAgICAgICAgICAgICAgIC8vIHdoZW4gaXQncyBhIHB1c2ggZXZlbnQsIGV4dHJhY3QgdGhlIGNvbW1pdHNcbiAgICAgICAgICAgICAgICBldnQucGF5bG9hZC5jb21taXRzLmZvckVhY2goZnVuY3Rpb24gKGNvbW1pdCkge1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciAkbGlzdEl0ZW0gID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICRpbWcgICAgICAgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICRwYXJhZ3JhcGggPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKSksXG4gICAgICAgICAgICAgICAgICAgICAgICAkcGFyYVNwYW4gID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJykpLFxuICAgICAgICAgICAgICAgICAgICAgICAgJGEgICAgICAgICA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBjb252ZXJ0IGNvbW1pdCBVUkwgaW50byByZWd1bGFyIGdpdGh1Yi5jb20gVVJMXG4gICAgICAgICAgICAgICAgICAgIC8vIGZyb206IGh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3Mve3VzZXJ9L3tyZXBvfS9jb21taXRzL3tzaGF9XG4gICAgICAgICAgICAgICAgICAgIC8vICAgdG86IGh0dHBzOi8vZ2l0aHViLmNvbS97dXNlcn0ve3JlcG99L2NvbW1pdC97c2hhfVxuICAgICAgICAgICAgICAgICAgICB2YXIgY2xlYW5VcmwgPSAoY29tbWl0LnVybClcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSAnYXBpLidcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXC9cXC9hcGkuLywgJ1xcL1xcLycpXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgJ3JlcG9zLydcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXC9yZXBvc1xcLy8sICdcXC8nKVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVwbGFjZSAnY29tbWl0cycgd2l0aCAnY29tbWl0J1xuICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL2NvbW1pdHMvLCAnY29tbWl0Jyk7XG5cbiAgICAgICAgICAgICAgICAgICAgJGltZy5hdHRyKCdzcmMnLCBldnQuYXZhdGFyKTtcblxuICAgICAgICAgICAgICAgICAgICAkYVxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3RhcmdldCcsICdfYmxhbmsnKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2hyZWYnLCBjbGVhblVybClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5odG1sKGA8c3BhbiBjbGFzcz1cImJvbGRlclwiPiR7KGNvbW1pdC5zaGEpLnNsaWNlKDAsNil9PC9zcGFuPmApO1xuXG4gICAgICAgICAgICAgICAgICAgICRwYXJhU3BhblxuICAgICAgICAgICAgICAgICAgICAgICAgLnRleHQoYFwiJHtjb21taXQubWVzc2FnZX1cImApO1xuXG4gICAgICAgICAgICAgICAgICAgICRwYXJhZ3JhcGhcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoYDxzcGFuIGNsYXNzPVwiYm9sZGVyXCI+JHtldnQuYWN0b3J9PC9zcGFuPiBjb21taXR0ZWQgYClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJGEpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKGAgb24gJHtmb3JtYXREYXRlKGV2dC5kYXRlKX06IGApXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCRwYXJhU3Bhbik7XG5cbiAgICAgICAgICAgICAgICAgICAgJGxpc3RJdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCRpbWcpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCRwYXJhZ3JhcGgpO1xuXG4gICAgICAgICAgICAgICAgICAgICRsaXN0XG4gICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCRsaXN0SXRlbSk7XG5cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgfSBlbHNlIHsgLy8gZWxzZSBpdCdzIGEgY29tbWVudFxuXG4gICAgICAgICAgICAgICAgdmFyICRsaXN0SXRlbSAgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJykpLFxuICAgICAgICAgICAgICAgICAgICAkaW1nICAgICAgID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKSksXG4gICAgICAgICAgICAgICAgICAgICRwYXJhZ3JhcGggPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKSksXG4gICAgICAgICAgICAgICAgICAgICRwYXJhU3BhbiAgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKSksXG4gICAgICAgICAgICAgICAgICAgICRhICAgICAgICAgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKSk7XG5cbiAgICAgICAgICAgICAgICAkaW1nLmF0dHIoJ3NyYycsIGV2dC5hdmF0YXIpO1xuXG4gICAgICAgICAgICAgICAgJGFcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3RhcmdldCcsICdfYmxhbmsnKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cignaHJlZicsIGV2dC5wYXlsb2FkLmNvbW1lbnQuaHRtbF91cmwpXG4gICAgICAgICAgICAgICAgICAgIC5odG1sKGA8c3BhbiBjbGFzcz1cImJvbGRlclwiPiR7KGV2dC5wYXlsb2FkLmNvbW1lbnQuY29tbWl0X2lkKS5zbGljZSgwLDYpfTwvc3Bhbj5gKTtcblxuICAgICAgICAgICAgICAgICRwYXJhU3BhblxuICAgICAgICAgICAgICAgICAgICAudGV4dChgXCIke2V2dC5wYXlsb2FkLmNvbW1lbnQuYm9keX1cImApO1xuXG4gICAgICAgICAgICAgICAgJHBhcmFncmFwaFxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKGA8c3BhbiBjbGFzcz1cImJvbGRlclwiPiR7ZXZ0LmFjdG9yfTwvc3Bhbj4gY29tbWVudGVkIG9uIGApXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJGEpXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoYCBvbiAke2Zvcm1hdERhdGUoZXZ0LmRhdGUpfTogYClcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkcGFyYVNwYW4pO1xuXG4gICAgICAgICAgICAgICAgJGxpc3RJdGVtXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJGltZylcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkcGFyYWdyYXBoKTtcblxuICAgICAgICAgICAgICAgICRsaXN0XG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJGxpc3RJdGVtKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9KTtcblxuICAgICAgICAkbGlzdFxuICAgICAgICAgICAgLmFkZENsYXNzKCdjb2wtbGlzdCcpO1xuICAgICAgICBcbiAgICAgICAgJGxpc3RDb250YWluZXJcbiAgICAgICAgICAgIC5hcHBlbmQoJGxpc3QpO1xuXG4gICAgICAgICRjb2x1bW5cbiAgICAgICAgICAgIC5hZGRDbGFzcygndGFibGUtY29sJylcbiAgICAgICAgICAgIC5hcHBlbmQoYDxoMz4ke2VzLmxlbmd0aH0gQ29tbWl0LVJlbGF0ZWQgRXZlbnRzPC9oMz5gKVxuICAgICAgICAgICAgLmFwcGVuZCgkbGlzdENvbnRhaW5lcik7XG5cbiAgICAgICAgRE9NLiR0YWJsZUNvbnRhaW5lclxuICAgICAgICAgICAgLmFwcGVuZCgkY29sdW1uKTtcblxuICAgIH1cblxuXG4gICAgLy8gcmVuZGVyIHRvZG8gZXZlbnRzXG4gICAgZnVuY3Rpb24gcmVuZGVyVG9kb0V2ZW50cyhlcykge1xuXG4gICAgICAgIC8vIGdldHMgSXNzdWVzRXZlbnRzLCBJc3N1ZUNvbW1lbnRFdmVudHMsIFByb2plY3RFdmVudHMsXG4gICAgICAgIC8vICAgUHJvamVjdENhcmRFdmVudHMsIGFuZCBQcm9qZWN0Q29sdW1uRXZlbnRzXG5cbiAgICAgICAgdmFyICRjb2x1bW4gPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpKSxcbiAgICAgICAgICAgICRsaXN0ICAgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJykpO1xuXG4gICAgICAgIGVzLmZvckVhY2goZnVuY3Rpb24gKGV2dCkge1xuXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhldnQpO1xuXG4gICAgICAgICAgICB2YXIgJGxpc3RJdGVtICA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKSksXG4gICAgICAgICAgICAgICAgJGltZyAgICAgICA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJykpLFxuICAgICAgICAgICAgICAgICRwYXJhZ3JhcGggPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKSksXG4gICAgICAgICAgICAgICAgJGEgICAgICAgICA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpKTtcblxuICAgICAgICAgICAgJGltZy5hdHRyKCdzcmMnLCBldnQuYXZhdGFyKTtcblxuICAgICAgICAgICAgJGEuYXR0cigndGFyZ2V0JywgJ19ibGFuaycpO1xuXG4gICAgICAgICAgICBpZiAoZXZ0LnR5cGUgPT09ICdJc3N1ZXNFdmVudCcpIHtcblxuICAgICAgICAgICAgICAgICRhXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdocmVmJywgZXZ0LnBheWxvYWQuaXNzdWUuaHRtbF91cmwpXG4gICAgICAgICAgICAgICAgICAgIC5odG1sKGA8c3BhbiBjbGFzcz1cImJvbGRlclwiPmlzc3VlICR7ZXZ0LnBheWxvYWQuaXNzdWUubnVtYmVyfTwvc3Bhbj5gKTtcblxuICAgICAgICAgICAgICAgICRwYXJhZ3JhcGhcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChgPHNwYW4gY2xhc3M9XCJib2xkZXJcIj4ke2V2dC5hY3Rvcn08L3NwYW4+ICR7ZXZ0LnBheWxvYWQuYWN0aW9ufSBgKVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCRhKVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKGAgb24gJHtmb3JtYXREYXRlKGV2dC5kYXRlKX06IFwiJHtldnQucGF5bG9hZC5pc3N1ZS50aXRsZX1cImApO1xuXG4gICAgICAgICAgICAgICAgJGxpc3RJdGVtXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJGltZylcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkcGFyYWdyYXBoKTtcblxuICAgICAgICAgICAgICAgICRsaXN0XG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJGxpc3RJdGVtKTtcblxuICAgICAgICAgICAgfSBlbHNlIGlmIChldnQudHlwZSA9PT0gJ0lzc3VlQ29tbWVudEV2ZW50Jykge1xuXG4gICAgICAgICAgICAgICAgJGFcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2hyZWYnLCBldnQucGF5bG9hZC5jb21tZW50Lmh0bWxfdXJsKVxuICAgICAgICAgICAgICAgICAgICAuaHRtbChgPHNwYW4gY2xhc3M9XCJib2xkZXJcIj5pc3N1ZSAke2V2dC5wYXlsb2FkLmlzc3VlLm51bWJlcn08L3NwYW4+YCk7XG5cbiAgICAgICAgICAgICAgICAkcGFyYWdyYXBoXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoYDxzcGFuIGNsYXNzPVwiYm9sZGVyXCI+JHtldnQuYWN0b3J9PC9zcGFuPiBjb21tZW50ZWQgb24gYClcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkYSlcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChgIG9uICR7Zm9ybWF0RGF0ZShldnQuZGF0ZSl9OiBcIiR7ZXZ0LnBheWxvYWQuY29tbWVudC5ib2R5fVwiYCk7XG5cbiAgICAgICAgICAgICAgICAkbGlzdEl0ZW1cbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkaW1nKVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCRwYXJhZ3JhcGgpO1xuXG4gICAgICAgICAgICAgICAgJGxpc3RcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkbGlzdEl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAkbGlzdFxuICAgICAgICAgICAgLmFkZENsYXNzKCdjb2wtbGlzdCcpO1xuXG4gICAgICAgICRjb2x1bW5cbiAgICAgICAgICAgIC5hZGRDbGFzcygndGFibGUtY29sJylcbiAgICAgICAgICAgIC5hcHBlbmQoYDxoMz4ke2VzLmxlbmd0aH0gVG9kby1SZWxhdGVkIEV2ZW50czwvaDM+YClcbiAgICAgICAgICAgIC5hcHBlbmQoJGxpc3QpO1xuXG4gICAgICAgIERPTS4kdGFibGVDb250YWluZXJcbiAgICAgICAgICAgIC5hcHBlbmQoJGNvbHVtbik7XG5cbiAgICB9XG5cblxuICAgIC8vIHJlbmRlciBtZXJnZSBldmVudHNcbiAgICBmdW5jdGlvbiByZW5kZXJNZXJnZUV2ZW50cyhlcykge1xuXG4gICAgICAgIC8vIGdldHMgQ3JlYXRlRXZlbnQsIFB1bGxSZXF1ZXN0RXZlbnQsIFB1bGxSZXF1ZXN0UmV2aWV3RXZlbnRcbiAgICAgICAgLy8gICBhbmQgUHVsbFJlcXVlc3RSZXZpZXdDb21tZW50RXZlbnRcblxuICAgICAgICB2YXIgJGNvbHVtbiA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JykpLFxuICAgICAgICAgICAgJGxpc3QgICA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKSksXG4gICAgICAgICAgICBjbGVhblVybDtcblxuICAgICAgICBlcy5mb3JFYWNoKGZ1bmN0aW9uIChldnQpIHtcblxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZXZ0KTtcblxuICAgICAgICAgICAgdmFyICRsaXN0SXRlbSAgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJykpLFxuICAgICAgICAgICAgICAgICRpbWcgICAgICAgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpKSxcbiAgICAgICAgICAgICAgICAkcGFyYWdyYXBoID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJykpLFxuICAgICAgICAgICAgICAgICRhICAgICAgICAgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKSk7XG5cbiAgICAgICAgICAgICRpbWcuYXR0cignc3JjJywgZXZ0LmF2YXRhcik7XG5cbiAgICAgICAgICAgICRhLmF0dHIoJ3RhcmdldCcsICdfYmxhbmsnKTtcblxuICAgICAgICAgICAgaWYgKGV2dC50eXBlID09PSAnQ3JlYXRlRXZlbnQnKSB7XG5cbiAgICAgICAgICAgICAgICAkcGFyYWdyYXBoXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoW1xuICAgICAgICAgICAgICAgICAgICAgICAgYDxzcGFuIGNsYXNzPVwiYm9sZGVyXCI+JHtldnQuYWN0b3J9PC9zcGFuPmAsXG4gICAgICAgICAgICAgICAgICAgICAgICAnY3JlYXRlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBldnQucGF5bG9hZC5yZWZfdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGA8c3BhbiBjbGFzcz1cImJvbGRlclwiPiR7ZXZ0LnBheWxvYWQucmVmfTwvc3Bhbj5gLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ29uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdERhdGUoZXZ0LmRhdGUpXG4gICAgICAgICAgICAgICAgICAgIF0uam9pbignICcpKTtcblxuICAgICAgICAgICAgICAgICRsaXN0SXRlbVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCRpbWcpXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJHBhcmFncmFwaCk7XG5cbiAgICAgICAgICAgICAgICAkbGlzdFxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCRsaXN0SXRlbSk7XG5cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZ0LnR5cGUgPT09ICdQdWxsUmVxdWVzdEV2ZW50Jykge1xuXG4gICAgICAgICAgICAgICAgLy8gZnJvbTogaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9yZXBvcy9iZWxjdXJ2L21lZXJrYXRfbW9tZW50dW0vcHVsbHMvMTFcbiAgICAgICAgICAgICAgICAvLyAgIHRvOiBodHRwczovL2dpdGh1Yi5jb20vYmVsY3Vydi9tZWVya2F0X21vbWVudHVtL3B1bGwvMTFcbiAgICAgICAgICAgICAgICBjbGVhblVybCA9IChldnQucGF5bG9hZC5wdWxsX3JlcXVlc3QudXJsKVxuICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgJ2FwaS4nXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXC9cXC9hcGkuLywgJ1xcL1xcLycpXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSAncmVwb3MvJ1xuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFwvcmVwb3NcXC8vLCAnXFwvJylcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVwbGFjZSAncHVsbHMnIHdpdGggJ3B1bGwnXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9wdWxscy8sICdwdWxsJyk7XG5cbiAgICAgICAgICAgICAgICAkYVxuICAgICAgICAgICAgICAgICAgICAuYXR0cignaHJlZicsIGNsZWFuVXJsKVxuICAgICAgICAgICAgICAgICAgICAuaHRtbChgPHNwYW4gY2xhc3M9XCJib2xkZXJcIj5wdWxsIHJlcXVlc3QgJHtldnQucGF5bG9hZC5wdWxsX3JlcXVlc3QubnVtYmVyfTwvc3Bhbj5gKTtcblxuICAgICAgICAgICAgICAgICRwYXJhZ3JhcGhcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChgPHNwYW4gY2xhc3M9XCJib2xkZXJcIj4ke2V2dC5hY3Rvcn08L3NwYW4+YClcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChgICR7ZXZ0LnBheWxvYWQuYWN0aW9ufSBgKVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCRhKVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKGAgb24gJHtmb3JtYXREYXRlKGV2dC5kYXRlKX1gKTtcblxuICAgICAgICAgICAgICAgICRsaXN0SXRlbVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCRpbWcpXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJHBhcmFncmFwaCk7XG5cbiAgICAgICAgICAgICAgICAkbGlzdFxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCRsaXN0SXRlbSk7XG5cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZ0LnR5cGUgPT09ICdQdWxsUmVxdWVzdFJldmlld0V2ZW50Jykge1xuXG4gICAgICAgICAgICAgICAgJGFcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2hyZWYnLCBldnQucGF5bG9hZC5wdWxsX3JlcXVlc3QuaHRtbF91cmwpXG4gICAgICAgICAgICAgICAgICAgIC50ZXh0KGV2dC5wYXlsb2FkLnB1bGxfcmVxdWVzdC50aXRsZSk7XG5cbiAgICAgICAgICAgICAgICAkcGFyYWdyYXBoXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoW1xuICAgICAgICAgICAgICAgICAgICAgICAgZXZ0LmFjdG9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXZ0LnBheWxvYWQuYWN0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3JldmlldyBvZiAnXG4gICAgICAgICAgICAgICAgICAgIF0uam9pbignICcpKVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCRhKVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCcgb24nICsgZm9ybWF0RGF0ZShldnQuZGF0ZSkpO1xuXG4gICAgICAgICAgICAgICAgJGxpc3RJdGVtXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJGltZylcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkcGFyYWdyYXBoKTtcblxuICAgICAgICAgICAgICAgICRsaXN0XG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJGxpc3RJdGVtKTtcblxuICAgICAgICAgICAgfSBlbHNlIGlmIChldnQudHlwZSA9PT0gJ1B1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudEV2ZW50Jykge1xuXG4gICAgICAgICAgICAgICAgJGFcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2hyZWYnLCBldnQucGF5bG9hZC5jb21tZW50Lmh0bWxfdXJsKVxuICAgICAgICAgICAgICAgICAgICAudGV4dChldnQucGF5bG9hZC5jb21tZW50LmJvZHkpO1xuXG4gICAgICAgICAgICAgICAgJHBhcmFncmFwaFxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKFtcbiAgICAgICAgICAgICAgICAgICAgICAgIGA8c3BhbiBjbGFzcz1cImJvbGRlclwiPiR7ZXZ0LmFjdG9yfTwvc3Bhbj5gLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXZ0LnBheWxvYWQuYWN0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3B1bGwgcmVxdWVzdCBjb21tZW50ICdcbiAgICAgICAgICAgICAgICAgICAgXS5qb2luKCcgJykpXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJGEpXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJyBvbicgKyBmb3JtYXREYXRlKGV2dC5kYXRlKSk7XG5cbiAgICAgICAgICAgICAgICAkbGlzdEl0ZW1cbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkaW1nKVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCRwYXJhZ3JhcGgpO1xuXG4gICAgICAgICAgICAgICAgJGxpc3RcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkbGlzdEl0ZW0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0pO1xuXG4gICAgICAgICRsaXN0XG4gICAgICAgICAgICAuYWRkQ2xhc3MoJ2NvbC1saXN0Jyk7XG5cbiAgICAgICAgJGNvbHVtblxuICAgICAgICAgICAgLmFkZENsYXNzKCd0YWJsZS1jb2wnKVxuICAgICAgICAgICAgLmFwcGVuZChgPGgzPiR7ZXMubGVuZ3RofSBNZXJnZS1SZWxhdGVkIEV2ZW50czwvaDM+YClcbiAgICAgICAgICAgIC5hcHBlbmQoJGxpc3QpO1xuXG4gICAgICAgIERPTS4kdGFibGVDb250YWluZXJcbiAgICAgICAgICAgIC5hcHBlbmQoJGNvbHVtbik7XG5cbiAgICB9XG4gICAgXG4gICAgXG4gICAgLy8gcHVibGljIGluaXQgbWV0aG9kXG4gICAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgICAgY2FjaGVEb20oKTtcbiAgICB9XG5cblxuICAgIC8vIHJldHVybiBwdWJsaWMgbWV0aG9kc1xuICAgIHJldHVybiB7XG4gICAgICAgIGluaXQ6IGluaXQsXG4gICAgICAgIHJlbmRlcjogcmVuZGVyXG4gICAgfTtcblxufShqUXVlcnkpKTtcbiIsIi8qIE5vdGU6IHRoZSBjaGFydCBpcyBPTkxZIHJlbmRlcmVkIHdoZW4gZXZlbnRzIG9jY3VyIG9uIG1vcmUgdGhhbiAxIGRheVxuICogSWYgdGhleSBhbGwgb2NjdXIgb24gdGhlIHNhbWUgZGF5LCB0aGUgY2hhcnQgd291bGQganVzdCBiZSAxIHBvaW50ISAqL1xuXG4vKiBqc2hpbnQgZXN2ZXJzaW9uOjYgKi9cbi8qIGdsb2JhbHMgJCwgY29uc29sZSwgZG9jdW1lbnQgKi9cblxudmFyIFJlbmRlckNoYXJ0ID0gKGZ1bmN0aW9uICgkKSB7XG5cbiAgICB2YXIgXG4gICAgICAgIC8vIHBsYWNlaG9sZGVyIG9iamVjdCBmb3IgY2FjaGVkIERPTSBlbGVtZW50c1xuICAgICAgICBET00gPSB7fSxcbiAgICAgICAgXG4gICAgICAgIC8vIFhNTCBuYW1lc3BhY2UgZm9yIFNWRyBlbGVtZW50c1xuICAgICAgICBucyAgPSAnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLFxuICAgICAgICBcbiAgICAgICAgLy8gY2hhcnQgbGF5b3V0IGF0dHJpYnV0ZXNcbiAgICAgICAgd2lkdGggICA9IDEwMDAsXG4gICAgICAgIGhlaWdodCAgPSA0MDAsXG4gICAgICAgIHhNYXJnaW4gPSA4MCxcbiAgICAgICAgeU1hcmdpbiA9IDQwLFxuICAgICAgICBzcGFjZXIgID0gNDA7XG4gICAgICAgIFxuXG4gICAgLy8gQ2FjaGUgRE9NIGVsZW1lbnRzXG4gICAgZnVuY3Rpb24gY2FjaGVEb20oKSB7XG4gICAgICAgIERPTS4kY29udGFpbmVyID0gJCgnLmNoYXJ0LWNvbnRhaW5lcicpO1xuICAgICAgICBET00uJHN2Z0VsZW0gICA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKG5zLCAnc3ZnJykpO1xuICAgIH1cbiAgICBcbiAgICBcbiAgICAvKiBGb3JtYXQgZGF0ZXNcbiAgICAgKlxuICAgICAqIEBwYXJhbXMgICBbc3RyaW5nXSAgIGRhdGUgICBbc3RyaW5nIGZvcm1hdHRlZCBkYXRlXVxuICAgICAqIEByZXR1cm5zICBbc3RyaW5nXSAgICAgICAgICBbZm9ybWF0dGVkIGRhdGUgc3RyaW5nXVxuICAgICovXG4gICAgZnVuY3Rpb24gZm9ybWF0RGF0ZXMoZGF0ZSkge1xuICAgICAgICByZXR1cm4gbmV3IERhdGUoZGF0ZSkgICAgIC8vIG1ha2UgZGF0ZSBvYmplY3QgZm9yIGRheSAmIG1vbnRoIGFiYnJldlxuICAgICAgICAgICAgLnRvRGF0ZVN0cmluZygpICAgICAgIC8vIGNvbnZlcnQgb2JqZWN0IHRvIGEgc3RyaW5nXG4gICAgICAgICAgICAuc2xpY2UoMCwgMTUpICAgICAgICAgLy8gcmVtb3ZlIGV2ZXJ5dGhpbmcgYWZ0ZXIgdGhlIFlZWVlcbiAgICAgICAgICAgIC5yZXBsYWNlKC8gMC9nLCAnICcpOyAvLyByZW1vdmUgbGVhZGluZyB6ZXJvcyAoZXguICcwNCcgPT4gJzQnKVxuICAgIH1cblxuXG4gICAgLy8gVGVhY2ggRGF0ZSBhIG5ldyBtZXRob2RcbiAgICBEYXRlLnByb3RvdHlwZS5hZGREYXlzID0gZnVuY3Rpb24oZGF5cykge1xuICAgICAgICB2YXIgZGF0ID0gbmV3IERhdGUodGhpcy52YWx1ZU9mKCkpO1xuICAgICAgICBkYXQuc2V0RGF0ZShkYXQuZ2V0RGF0ZSgpICsgZGF5cyk7XG4gICAgICAgIHJldHVybiBkYXQ7XG4gICAgfTtcbiAgICBcblxuICAgIC8qIEJ1aWxkIGRhdGUgcmFuZ2VcbiAgICAgKlxuICAgICAqIEBwYXJhbXMgICBbYXJyYXldICAgZXZlbnRzICAgW3NvcnRlZCBhcnJheSBvZiBldmVudHNdXG4gICAgICogQHJldHVybnMgIFthcnJheV0gICAgICAgICAgICBbcmFuZ2Ugb2YgZGF0ZXMgZnJvbSBlYXJsaWVzdCA+IHJlY2VudF1cbiAgICAqL1xuICAgIGZ1bmN0aW9uIGJ1aWxkRGF0ZVJhbmdlKGV2ZW50cykge1xuICAgICAgICBcbiAgICAgICAgdmFyIG5vcm1EYXRlcyAgID0gZXZlbnRzLm1hcCggKGUpID0+IChmb3JtYXREYXRlcyhlLmRhdGUpKSApLFxuICAgICAgICAgICAgc3RhcnREYXRlICAgPSBuZXcgRGF0ZShub3JtRGF0ZXNbMF0pLFxuICAgICAgICAgICAgc3RvcERhdGUgICAgPSBuZXcgRGF0ZShub3JtRGF0ZXNbbm9ybURhdGVzLmxlbmd0aCAtIDFdKSxcbiAgICAgICAgICAgIGRhdGVBcnJheSAgID0gW10sXG4gICAgICAgICAgICBjdXJyZW50RGF0ZSA9IHN0YXJ0RGF0ZTtcbiAgICAgICAgXG4gICAgICAgIHdoaWxlIChjdXJyZW50RGF0ZSA8PSBzdG9wRGF0ZSkge1xuICAgICAgICAgICAgZGF0ZUFycmF5LnB1c2goIGZvcm1hdERhdGVzKGN1cnJlbnREYXRlKSApO1xuICAgICAgICAgICAgY3VycmVudERhdGUgPSBjdXJyZW50RGF0ZS5hZGREYXlzKDEpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZmFuY3kgc3RhdHNcbiAgICAgICAgLy8gY29uc29sZS5sb2coJz09PT09PT09PSBEQVRFIFNQRUNTID09PT09PT09PScpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnRGF5cyBpbiByYW5nZTogJyArIGRhdGVBcnJheS5sZW5ndGgpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnICAgU3RhcnQgZGF0ZTogJyArIHN0YXJ0RGF0ZSk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCcgICAgU3RvcCBkYXRlOiAnICsgc3RvcERhdGUpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGRhdGVBcnJheTtcbiAgICB9XG4gICAgICAgIFxuICAgIFxuICAgIC8qIENhbGN1bGF0ZSBtYXggY2hhcnQgWSBheGlzIHZhbHVlXG4gICAgICogTWF4IFkgaXMgbXVsdGlwbGUgb2YgNSB0byBtYWtlIHRoZSBjaGFydCBsb29rIG5pY2VcbiAgICAgKlxuICAgICAqIEBwYXJhbXMgICBbYXJyYXldICAgcG9pbnRzICAgW3NvcnRlZCBldmVudHMgYXJyYXldXG4gICAgICogQHJldHVybnMgIFtudW1iZXJdICAgICAgICAgICBbY2FsY3VsYXRlZCBtYXggWSBheGlzIHZhbHVlXVxuICAgICovXG4gICAgZnVuY3Rpb24gZ2V0Q2hhcnRZTWF4KHBvaW50cykge1xuICAgICAgICB2YXIgbWF4TnVtRXZ0cyxcbiAgICAgICAgICAgIHF1b3RpZW50O1xuXG4gICAgICAgIG1heE51bUV2dHMgPSBwb2ludHMucmVkdWNlKGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5tYXgoYSwgYlsxXSk7XG4gICAgICAgIH0sIHBvaW50c1swXVsxXSk7XG5cbiAgICAgICAgcXVvdGllbnQgPSBNYXRoLmZsb29yKG1heE51bUV2dHMgLyA0KTtcblxuICAgICAgICAvLyByZXR1cm4gMSBtb3JlIHRoYW4gdGhlIHF1b3RpZW50LCAqIDVcbiAgICAgICAgcmV0dXJuICgocXVvdGllbnQgKyAxKSAqIDQpO1xuICAgIH1cbiAgICBcbiAgICBcbiAgICAvKiBSZWZvcm1hdCBldmVudHMgYXJyYXkgZm9yIGNoYXJ0aW5nLlxuICAgICAqIEFsbCBldmVudHMgYXJlIGFscmVhZHkgdW5pcXVlIGV4Y2VwdCBwdXNoIGV2ZW50cywgYmVjYXVzZSB0aGV5IGNvbnRhaW5cbiAgICAgKiBhcnJheXMgb2YgY29tbWl0cy4gV2UgbWFrZSBlYWNoIGNvbW1pdCBhIHNlcGFyYXRlIGVsZW1lbnQuICBUaGVuXG4gICAgICogZ2V0IG51bSBvZiBldmVudHMgZm9yIGVhY2ggZGF0ZSAoIHNvcnRlZEFyci5maWx0ZXIoKS5sZW5ndGgoKSApLlxuICAgICAqXG4gICAgICogQHBhcmFtcyAgIFthcnJheV0gICBlcyAgIFtyYXcgZXZlbnRzIGFycmF5XVxuICAgICAqIEByZXR1cm5zICBbYXJyYXldICAgICAgICBbYXJyYXkgb2YgZGF0ZSAmIG51bWJlciBvZiBldmVudHNdXG4gICAgKi9cbiAgICBmdW5jdGlvbiBwcmVwYXJlRGF0ZUV2ZW50cyhlcykge1xuXG4gICAgICAgIHZhciBldmVudHMgPSBbXSxcbiAgICAgICAgICAgIHNvcnRlZEV2ZW50cyxcbiAgICAgICAgICAgIGRhdGVBcnJheSxcbiAgICAgICAgICAgIGNoYXJ0RGF0YSA9IFtdO1xuICAgICAgICBcbiAgICAgICAgZXMuZm9yRWFjaChmdW5jdGlvbiAoZXZ0KSB7XG5cbiAgICAgICAgICAgIC8vICBjb25zb2xlLmxvZyhldnQpOyAgLy8gZGlhZ1xuXG4gICAgICAgICAgICBpZiAoZXZ0LnR5cGUgPT09ICdQdXNoRXZlbnQnKSB7XG5cbiAgICAgICAgICAgICAgICAvLyB3aGVuIGl0J3MgYSBwdXNoIGV2ZW50LCBleHRyYWN0IHRoZSBjb21taXRzXG4gICAgICAgICAgICAgICAgZXZ0LnBheWxvYWQuY29tbWl0cy5mb3JFYWNoKGZ1bmN0aW9uIChjb21taXQpIHtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50cy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdG9yOiBldnQuYWN0b3IsXG4gICAgICAgICAgICAgICAgICAgICAgICBhdmF0YXI6IGV2dC5hdmF0YXIsXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiBldnQuZGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBheWxvYWQ6IGNvbW1pdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiQ29tbWl0XCJcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZXZlbnRzLnB1c2goZXZ0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgIC8vIHNvcnQgZXZlbnRzIGFzY2VuZGluZ1xuICAgICAgICBzb3J0ZWRFdmVudHMgPSBldmVudHMuc29ydCggKGEsIGIpID0+IG5ldyBEYXRlKGEuZGF0ZSkgLSBuZXcgRGF0ZShiLmRhdGUpICk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHNvcnRlZEV2ZW50cyk7IC8vIG9rXG4gICAgICAgIFxuICAgICAgICAvLyBnZXQgYXJyYXkgb2YgYWxsIGRhdGVzIGluIHJhbmdlXG4gICAgICAgIGRhdGVBcnJheSA9IGJ1aWxkRGF0ZVJhbmdlKHNvcnRlZEV2ZW50cyk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGRhdGVBcnJheSk7XG4gICAgICAgIFxuICAgICAgICAvLyBidWlsZCBhcnJheSBvZiBkYXRhIHBvaW50czogW2RhdGUsICNldmVudHMgcGVyIGRhdGVdXG4gICAgICAgIGNoYXJ0RGF0YSA9IGRhdGVBcnJheS5tYXAoZnVuY3Rpb24gKGRhdGUpIHtcbiAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gdGhlIGRhdGUsIGFzIE1vbnRoIGFuZCBEYXlcbiAgICAgICAgICAgICAgICBkYXRlLnNsaWNlKDMsIDEwKSxcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBudW1iZXIgb2YgZXZlbnRzIHBlciBkYXRlXG4gICAgICAgICAgICAgICAgc29ydGVkRXZlbnRzLmZpbHRlciggKHgpID0+IGZvcm1hdERhdGVzKHguZGF0ZSkgPT09IGRhdGUgKS5sZW5ndGhcbiAgICAgICAgICAgIF07ICAgICAgICAgICAgXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGNoYXJ0RGF0YTtcbiAgICB9XG4gICAgXG4gICAgXG4gICAgLyogY2hlY2sgaWYgYWxsIGV2ZW50cyBvY2N1ciBvbiB0aGUgc2FtZSBkYXlcbiAgICAgKlxuICAgICAqIEBwYXJhbXMgICBbYXJyYXldICAgcG9pbnRzQXJyICAgW2V2ZW50cyBjb29yZGluYXRlIGRhdGEgcG9pbnRzXVxuICAgICAqIEByZXV0cm5zICBbYm9vbGVhbl0gICAgICAgICAgICAgW3JldCB0cnVlIGlmIGFsbCBldmVudHMgb24gMSBkYXldXG4gICAgKi9cbiAgICBmdW5jdGlvbiBzYW1lRGFtbkRheShwb2ludHNBcnIpIHtcbiAgICAgICAgcmV0dXJuIHBvaW50c0Fyci5sZW5ndGggPT09IDE7XG4gICAgfVxuICAgIFxuICAgIFxuICAgIC8qIGdlbmVyYXRlIGNoYXJ0IHBvaW50c1xuICAgICAqXG4gICAgICogQHBhcmFtcyAgW2FycmF5XSAgICBwb2ludHMgIFthcnJheSBvZiBjb29yZGluYXRlIHBvaW50c11cbiAgICAgKiBAcmV0dXJucyBbb2JqZWN0XSAgICAgICAgICAgWzxnPnJvdXAgb2YgPGNpcmNsZT4gZWxlbWVudHNdXG4gICAgKi9cbiAgICBmdW5jdGlvbiBnZW5lcmF0ZUNpcmNsZXMocG9pbnRzKSB7XG5cbiAgICAgICAgLy8gaW5pdCB2YXJzXG4gICAgICAgIHZhciBncm91cCA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKG5zLCAnZycpKSxcbiAgICAgICAgICAgIGN1cnJlbnRQb2ludCxcbiAgICAgICAgICAgIG51bVBvaW50cyA9IHBvaW50cy5sZW5ndGggLSAxLFxuICAgICAgICAgICAgY2hhcnRZTWF4ID0gZ2V0Q2hhcnRZTWF4KHBvaW50cyksXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIG11bHRpcGxpZXJzIHNjYWxlIHRoZSBvdXRwdXQgeCAmIHkgY29vcmRzXG4gICAgICAgICAgICB4TXVsdGlwbGUgPSAod2lkdGggLSB4TWFyZ2luIC0gc3BhY2VyKSAvIG51bVBvaW50cyxcbiAgICAgICAgICAgIHlNdWx0aXBsZSA9IChoZWlnaHQgLSB5TWFyZ2luIC0gc3BhY2VyKSAvIGNoYXJ0WU1heCxcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gZm9ybWF0IHZhbHVlcyB0byBhbGlnbiB3aXRoIGNoYXJ0IGV4dGVudHNcbiAgICAgICAgICAgIGZvcm1hdHRlZFBvaW50cyA9IHBvaW50cy5tYXAoZnVuY3Rpb24ocG9pbnQsIGluZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgICAgIChpbmQgKiB4TXVsdGlwbGUpICsgeE1hcmdpbixcbiAgICAgICAgICAgICAgICAgICAgKGhlaWdodCAtIChwb2ludFsxXSAqIHlNdWx0aXBsZSkpIC0geU1hcmdpblxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIGxvb3AgdGhyb3VnaCBwb2ludHMgYXJyYXkgYXBwZW5kaW5nIGNpcmNsZXMgdG8gZ3JvdXBcbiAgICAgICAgZm9ybWF0dGVkUG9pbnRzLmZvckVhY2goZnVuY3Rpb24gKHBvaW50LCBpbmQpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyIGNpcmNsZSA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKG5zLCAnY2lyY2xlJykpLFxuICAgICAgICAgICAgICAgIHRpdGxlICA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKG5zLCAndGl0bGUnKSksXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gPGNpcmNsZT4gd2FudHMgYXR0cnM6IGN4LCBjeSwgclxuICAgICAgICAgICAgICAgIGN4ID0gcG9pbnRbMF0sXG4gICAgICAgICAgICAgICAgY3kgPSBwb2ludFsxXSxcbiAgICAgICAgICAgICAgICByICA9IDQ7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNpcmNsZVxuICAgICAgICAgICAgICAgIC5hdHRyKCdjeCcsIGN4KVxuICAgICAgICAgICAgICAgIC5hdHRyKCdjeScsIGN5KVxuICAgICAgICAgICAgICAgIC5hdHRyKCdyJywgcik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIDx0aXRsZT4gYWRkcyAndG9vbCB0aXAnIG9uIGhvdmVyXG4gICAgICAgICAgICB0aXRsZS50ZXh0KHBvaW50c1tpbmRdWzBdICsgJyAoJyArIHBvaW50c1tpbmRdWzFdICsgJyBldmVudHMpJyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIGFwcGVuZCB0aXRsZSB0byBjaXJjbGVcbiAgICAgICAgICAgIGNpcmNsZS5hcHBlbmQodGl0bGUpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBhcHBlbmQgY2lyY2xlIHRvIGdyb3VwXG4gICAgICAgICAgICBncm91cFxuICAgICAgICAgICAgICAgIC5hZGRDbGFzcygnY2hhcnQtY2lyY2xlJylcbiAgICAgICAgICAgICAgICAuYXBwZW5kKGNpcmNsZSk7IFxuXG4gICAgICAgIH0pO1xuICAgIFxuICAgIHJldHVybiBncm91cDtcbiAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgLyogZ2VuZXJhdGUgY2hhcnQgbGluZVxuICAgICAqXG4gICAgICogQHBhcmFtcyAgW2FycmF5XSAgICBwb2ludHMgIFthcnJheSBvZiBjb29yZGluYXRlIHBvaW50c11cbiAgICAgKiBAcmV0dXJucyBbb2JqZWN0XSAgICAgICAgICAgWzxnPnJvdXAgb2YgPGxpbmU+IHNlZ21lbnRzXVxuICAgICovXG4gICAgZnVuY3Rpb24gZ2VuZXJhdGVMaW5lcyhwb2ludHMpIHtcbiAgICAgICAgXG4gICAgICAgIC8vIGluaXQgdmFyc1xuICAgICAgICB2YXIgZ3JvdXAgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhucywgJ2cnKSksXG4gICAgICAgICAgICBjdXJyZW50UG9pbnQsXG4gICAgICAgICAgICBpLFxuICAgICAgICAgICAgbGluZSxcbiAgICAgICAgICAgIG51bVBvaW50cyA9IHBvaW50cy5sZW5ndGggLSAxLFxuICAgICAgICAgICAgY2hhcnRZTWF4ID0gZ2V0Q2hhcnRZTWF4KHBvaW50cyksXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIG11bHRpcGxpZXJzIHNjYWxlIHRoZSBvdXRwdXQgeCAmIHkgY29vcmRzXG4gICAgICAgICAgICB4TXVsdGlwbGUgPSAod2lkdGggLSB4TWFyZ2luIC0gc3BhY2VyKSAvIG51bVBvaW50cyxcbiAgICAgICAgICAgIHlNdWx0aXBsZSA9IChoZWlnaHQgLSB5TWFyZ2luIC0gc3BhY2VyKSAvIGNoYXJ0WU1heCxcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gZm9ybWF0IHZhbHVlcyB0byBhbGlnbiB3aXRoIGNoYXJ0IGV4dGVudHNcbiAgICAgICAgICAgIGZvcm1hdHRlZFBvaW50cyA9IHBvaW50cy5tYXAoZnVuY3Rpb24ocG9pbnQsIGluZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgICAgIChpbmQgKiB4TXVsdGlwbGUpICsgeE1hcmdpbixcbiAgICAgICAgICAgICAgICAgICAgKGhlaWdodCAtIChwb2ludFsxXSAqIHlNdWx0aXBsZSkpIC0geU1hcmdpblxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIGxvb3AgdGhyb3VnaCBwb2ludHMgYXJyYXkgYXBwZW5kaW5nIGxpbmVzIHRvIGdyb3VwXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBmb3JtYXR0ZWRQb2ludHMubGVuZ3RoIC0gMTsgaSArPSAxKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGxpbmUgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhucywgJ2xpbmUnKSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIGRlc2NyaWJlIDxsaW5lPlxuICAgICAgICAgICAgbGluZVxuICAgICAgICAgICAgICAgIC5hdHRyKCd4MScsIGZvcm1hdHRlZFBvaW50c1tpXVswXSlcbiAgICAgICAgICAgICAgICAuYXR0cigneTEnLCBmb3JtYXR0ZWRQb2ludHNbaV1bMV0pXG4gICAgICAgICAgICAgICAgLmF0dHIoJ3gyJywgZm9ybWF0dGVkUG9pbnRzW2kgKyAxXVswXSlcbiAgICAgICAgICAgICAgICAuYXR0cigneTInLCBmb3JtYXR0ZWRQb2ludHNbaSArIDFdWzFdKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIGFwcGVuZCA8bGluZT4gdG8gPGc+cm91cFxuICAgICAgICAgICAgZ3JvdXBcbiAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoJ2NoYXJ0LWxpbmUnKVxuICAgICAgICAgICAgICAgIC5hcHBlbmQobGluZSk7XG4gICAgICAgIH1cbiAgICBcbiAgICByZXR1cm4gZ3JvdXA7XG4gICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIC8qIGdlbmVyYXRlIGF4aXMgbGFiZWxzXG4gICAgICpcbiAgICAgKiBAcGFyYW1zICBbYXJyYXldICAgIHBvaW50cyAgW2FycmF5IG9mIGNvb3JkaW5hdGUgcG9pbnRzXVxuICAgICAqIEBwYXJhbXMgIFtzdHJpbmddICAgYXhpcyAgICBbJ3knIG9yICd4JyBzcGVjaWZpZXMgY29uZGl0aW9uYWwgcGF0aF1cbiAgICAgKiBAcmV0dXJucyBbb2JqZWN0XSAgICAgICAgICAgWzxnPnJvdXAgb2YgYXhpcyA8bGluZT4gYW5kIDx0ZXh0PiBlbHNdXG4gICAgKi9cbiAgICBmdW5jdGlvbiBnZW5BeGlzTGFiZWxzKHBvaW50cywgYXhpcykge1xuICAgICAgICBcbiAgICAgICAgdmFyIGdyb3VwID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMobnMsICdnJykpLFxuICAgICAgICAgICAgbGluZSwgLy8gcGxhY2Vob2xkZXIgZm9yIDxsaW5lPiBlbGVtZW50IGJ1aWx0IGluIGxvb3BcbiAgICAgICAgICAgIHRleHQsIC8vIHBsYWNlaG9sZGVyIGZvciA8dGV4dD4gZWxlbWVudCBidWlsdCBpbiBsb29wXG4gICAgICAgICAgICBudW1BeGlzVGlja3MsXG4gICAgICAgICAgICB4UG9zLCB4VmFsdWUsIHhNdWx0aXBsZSxcbiAgICAgICAgICAgIHlQb3MsIHlWYWx1ZSwgeVNwYWNpbmcsXG4gICAgICAgICAgICBtYXhZdmFsLFxuICAgICAgICAgICAgY2hhcnRZTWF4ID0gZ2V0Q2hhcnRZTWF4KHBvaW50cyksXG4gICAgICAgICAgICBpO1xuICAgICAgICBcbiAgICAgICAgbWF4WXZhbCA9IHBvaW50cy5yZWR1Y2UoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgIHJldHVybiBNYXRoLm1heChhLCBiWzFdKTtcbiAgICAgICAgfSwgcG9pbnRzWzBdWzFdKTtcbiAgICAgICAgXG4gICAgICAgIC8vIGNvbmRpdGlvbmFsbHkgaGFuZGxlIHBhc3NlZCBheGlzIHBhcmFtXG4gICAgICAgIGlmIChheGlzID09PSAneScpIHtcbiAgICAgICAgICAgIC8vIGFkZCBDU1MgY2xhc3MgdG8gPGc+IGVsZW1lbnRcbiAgICAgICAgICAgIGdyb3VwLmFkZENsYXNzKCdsYWJlbHMgeS1sYWJlbHMnKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gbGltaXQgcXR5IG9mIFkgYXhpcyBsYWJlbHMgYmFzZWQgb24gY2hhcnRZTWF4XG4gICAgICAgICAgICBudW1BeGlzVGlja3MgPSAoY2hhcnRZTWF4ID4gMTIpID8gY2hhcnRZTWF4IC8gNCA6IGNoYXJ0WU1heDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gY2FsY3VsYXRlIHJlbGF0aXZlIHNwYWNlIGJldHdlZW4gZWFjaCBZIGF4aXMgbGFiZWxcbiAgICAgICAgICAgIHlTcGFjaW5nID0gKGhlaWdodCAtIHlNYXJnaW4gLSBzcGFjZXIpIC8gbnVtQXhpc1RpY2tzO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBsb29wIHRocm91Z2ggbnVtQXhpc1RpY2tzLCBnZW5lcmF0ZSA8bGluZT4gYW5kIDx0ZXh0PiBlbGVtZW50cyxcbiAgICAgICAgICAgIC8vIHRoZW4gYXBwZW5kIGVhY2ggb2YgdGhlbSB0byBvdXIgPGc+cm91cFxuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IG51bUF4aXNUaWNrcyArIDE7IGkgKz0gMSkge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSB5IGF4aXMgbGFiZWwgdmFsdWVcbiAgICAgICAgICAgICAgICB5VmFsdWUgPSBpICogY2hhcnRZTWF4IC8gbnVtQXhpc1RpY2tzO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSB5IGF4aXMgbGFiZWwgcG9zaXRpb25cbiAgICAgICAgICAgICAgICB5UG9zID0gaGVpZ2h0IC0geU1hcmdpbiAtICh5U3BhY2luZyAqIGkpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIGNyZWF0ZSBuZXcgPGxpbmU+IGVsZW1lbnRcbiAgICAgICAgICAgICAgICBsaW5lID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMobnMsICdsaW5lJykpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIGFkZCBhdHRyaWJ1dGVzIHRvIDxsaW5lPiBlbGVtZW50XG4gICAgICAgICAgICAgICAgbGluZS5hZGRDbGFzcygnaG9yaXotcnVsZScpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCd4MScsIHhNYXJnaW4pXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCd5MScsIHlQb3MpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCd4MicsICh3aWR0aCAtIHNwYWNlciArIDUpKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cigneTInLCB5UG9zKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBjcmVhdGUgbmV3IDx0ZXh0PiBlbGVtZW50XG4gICAgICAgICAgICAgICAgdGV4dCA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKG5zLCAndGV4dCcpKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBhZGQgYXR0cmlidXRlcyB0byA8dGV4dD4gZWxlbWVudFxuICAgICAgICAgICAgICAgIHRleHRcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3gnLCAoeE1hcmdpbiAtIDIwKSlcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3knLCAoeVBvcyArIDQpKVxuICAgICAgICAgICAgICAgICAgICAuaHRtbCh5VmFsdWUpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGdyb3VwXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQobGluZSlcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCh0ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBncm91cDtcbiAgICAgICAgXG4gICAgICAgIH0gZWxzZSBpZiAoYXhpcyA9PT0gJ3gnIHx8ICFheGlzIHx8IGF4aXMgPT09IG51bGwpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gYWRkIENTUyBjbGFzcyB0byB0aGUgPGc+cm91cFxuICAgICAgICAgICAgZ3JvdXAuYWRkQ2xhc3MoJ2xhYmVscyB4LWxhYmVscycpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBudW1BeGlzVGlja3MgPSBwb2ludHMubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgIHhNdWx0aXBsZSA9ICh3aWR0aCAtIHhNYXJnaW4gLSBzcGFjZXIpIC8gbnVtQXhpc1RpY2tzO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBsb29wIHRocm91Z2ggcG9pbnRzLCBnZW5lcmF0ZSA8bGluZT4gYW5kIDx0ZXh0PiBlbGVtZW50cyxcbiAgICAgICAgICAgIC8vIGFuZCBhcHBlbmQgZWFjaCBvZiB0aGVtIHRvIG91ciA8Zz4gZ3JvdXBcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBwb2ludHMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBmb3IgbGFyZ2UgZGF0YXNldHMsIG9ubHkgYXBwZW5kIGV2ZXJ5IDEwdGggZGF0ZVxuICAgICAgICAgICAgICAgIGlmIChwb2ludHMubGVuZ3RoID4gMjApIHtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmIChpICUgMTAgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSB5IGF4aXMgbGFiZWwgdmFsdWVzXG4gICAgICAgICAgICAgICAgICAgICAgICB4VmFsdWUgPSBwb2ludHNbaV1bMF07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSB5IHBvc2l0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICB4UG9zID0gaSAqIHhNdWx0aXBsZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY3JlYXRlIG5ldyA8dGV4dD4gZWxlbWVudFxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dCA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKG5zLCAndGV4dCcpKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWRkIGF0dHJpYnV0ZXMgdG8gPHRleHQ+IGVsZW1lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigneCcsICh4UG9zICsgeE1hcmdpbikpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3knLCAoaGVpZ2h0IC0gNSkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRleHQoeFZhbHVlKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKHRleHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7ICAgICAgICAgICAgICAgIFxuXG4gICAgICAgICAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSB5IGF4aXMgbGFiZWwgdmFsdWVzXG4gICAgICAgICAgICAgICAgICAgIHhWYWx1ZSA9IHBvaW50c1tpXVswXTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBjYWxjdWxhdGUgeSBwb3NpdGlvblxuICAgICAgICAgICAgICAgICAgICB4UG9zID0gaSAqIHhNdWx0aXBsZTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBjcmVhdGUgbmV3IDx0ZXh0PiBlbGVtZW50XG4gICAgICAgICAgICAgICAgICAgIHRleHQgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhucywgJ3RleHQnKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gYWRkIGF0dHJpYnV0ZXMgdG8gPHRleHQ+IGVsZW1lbnRcbiAgICAgICAgICAgICAgICAgICAgdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3gnLCAoeFBvcyArIHhNYXJnaW4pKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3knLCAoaGVpZ2h0IC0gNSkpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGV4dCh4VmFsdWUpO1xuXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKHRleHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBncm91cDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICB9XG5cbiAgICBcbiAgICAvLyBNQUlOIFJFTkRFUkVSXG4gICAgLy8gUmVjZWl2ZXMgQUxMIGV2ZW50cyBmcm9tICdnZXQtZXZlbnRzLmpzJ1xuICAgIGZ1bmN0aW9uIHJlbmRlcihldmVudHMpIHtcbiAgICAgICAgXG4gICAgICAgIHZhciBwb2ludHM7XG4gICAgICAgIFxuICAgICAgICAvLyBlbXB0eSBwYXJlbnQgU1ZHIGVsZW1lbnQgYmVmb3JlIGVhY2ggcmVuZGVyXG4gICAgICAgIERPTS4kc3ZnRWxlbS5lbXB0eSgpO1xuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIC8vIGFkZCBDU1MgY2xhc3MsIG5hbWVzcGFjZSBhbmQgYXR0cmlidXRlcyB0byBtYWluIDxzdmc+IGVsZW1lbnRcbiAgICAgICAgRE9NLiRzdmdFbGVtXG4gICAgICAgICAgICAuYWRkQ2xhc3MoJ2NoYXJ0LS1jb250ZW50JylcbiAgICAgICAgICAgIC5hdHRyKCdpZCcsICdzdmcnKVxuICAgICAgICAgICAgLmF0dHIoJ3htbG5zJywgbnMpXG4gICAgICAgICAgICAvLyAuYXR0cignd2lkdGgnLCAnMTAwJScpXG4gICAgICAgICAgICAuYXR0cignaGVpZ2h0JywgJzEwMCUnKVxuICAgICAgICAgICAgLmF0dHIoJ3ZpZXdCb3gnLCAnMCAwICcgKyB3aWR0aCArICcgJyArIGhlaWdodClcbiAgICAgICAgICAgIC5hdHRyKCd4bWw6c3BhY2UnLCAncHJlc2VydmUnKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChldmVudHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBmb3JtYXQgZXZlbnRzIHRvIHVzYWJsZSBwb2ludHNcbiAgICAgICAgICAgIHBvaW50cyA9IHByZXBhcmVEYXRlRXZlbnRzKGV2ZW50cyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIGNoZWNrIGlmIEFMTCBldmVudHMgb2NjdXIgb24gdGhlIHNhbWUgZGF5IVxuICAgICAgICAgICAgaWYgKHNhbWVEYW1uRGF5KHBvaW50cykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIGFwcGVuZCBheGlzIGxhYmVsIDx0ZXh0PiA8Zz5yb3Vwc1xuICAgICAgICAgICAgRE9NLiRzdmdFbGVtXG4gICAgICAgICAgICAgICAgLmFwcGVuZChnZW5BeGlzTGFiZWxzKHBvaW50cywgJ3knKSlcbiAgICAgICAgICAgICAgICAuYXBwZW5kKGdlbkF4aXNMYWJlbHMocG9pbnRzLCAneCcpKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gYXBwZW5kIGxpbmVcbiAgICAgICAgICAgIERPTS4kc3ZnRWxlbVxuICAgICAgICAgICAgICAgIC5hcHBlbmQoZ2VuZXJhdGVMaW5lcyhwb2ludHMpKTtcblxuICAgICAgICAgICAgLy8gYXBwZW5kIHBvaW50cy9jaXJjbGVzIDxnPnJvdXBcbiAgICAgICAgICAgIERPTS4kc3ZnRWxlbVxuICAgICAgICAgICAgICAgIC5hcHBlbmQoZ2VuZXJhdGVDaXJjbGVzKHBvaW50cykpO1xuXG4gICAgICAgICAgICAvLyBhcHBlbmQgU1ZHIHRvIGNvbnRhaW5lclxuICAgICAgICAgICAgRE9NLiRjb250YWluZXJcbiAgICAgICAgICAgICAgICAuYXBwZW5kKERPTS4kc3ZnRWxlbSk7XG4gICAgICAgICAgICBcbiAgICAgICAgfSAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIC8vIHB1YmxpYyBpbml0IG1ldGhvZFxuICAgIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICAgIGNhY2hlRG9tKCk7XG4gICAgfVxuXG5cbiAgICAvLyByZXR1cm4gcHVibGljIG1ldGhvZHNcbiAgICByZXR1cm4ge1xuICAgICAgICBpbml0OiBpbml0LFxuICAgICAgICByZW5kZXI6IHJlbmRlclxuICAgIH07XG5cbn0oalF1ZXJ5KSk7XG4iLCIvKiBqc2hpbnQgZXN2ZXJzaW9uOjYgKi9cbi8qIGdsb2JhbHMgalF1ZXJ5LCBkb2N1bWVudCwgY29uc29sZSwgTFMsIEhpdEFwaSAqL1xuXG52YXIgUmVwb1NlbGVjdCA9IChmdW5jdGlvbiAoJCkge1xuXG4gICAgdmFyIERPTSAgID0ge30sXG4gICAgICAgIHJlcG9zID0gW10sXG4gICAgICAgIHNlbGVjdGVkUmVwbztcbiAgICBcbiAgICBcbiAgICAvLyB1dGlsIGNoZWNrcyBsb2NhbCBzdG9yYWdlIGZvciBwcmV2aW91c2x5IHNhdmVkIGxpc3Qgb2YgcmVwb3NcbiAgICB2YXIgY2hlY2tTdG9yYWdlID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gTFMuZ2V0RGF0YSgnZGV2LWRhc2gtcmVwb3MnKSA/IHRydWUgOiBmYWxzZTtcbiAgICB9KCkpO1xuXG5cbiAgICAvLyBjYWNoZSBET00gZWxlbWVudHNcbiAgICBmdW5jdGlvbiBjYWNoZURvbSgpIHtcbiAgICAgICAgRE9NLiRzZWxlY3RDb250YWluZXIgPSAkKCcucmVwby1zZWxlY3QnKTtcbiAgICAgICAgRE9NLiRwICAgICAgICAgICAgICAgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKSk7XG4gICAgICAgIERPTS4kbGlzdENvbnRhaW5lciAgID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSk7XG4gICAgICAgIERPTS4kdWwgICAgICAgICAgICAgID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpKTtcbiAgICAgICAgRE9NLiRuZXdSZXBvRm9ybSAgICAgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Zvcm0nKSk7XG4gICAgICAgIERPTS4kbmV3UmVwb1VzZXIgICAgID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpKTtcbiAgICAgICAgRE9NLiRuZXdSZXBvUmVwbyAgICAgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0JykpO1xuICAgICAgICBET00uJG5ld1JlcG9CdG4gICAgICA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJykpO1xuICAgIH1cblxuXG4gICAgLy8gYmluZCBldmVudHNcbiAgICBmdW5jdGlvbiBiaW5kRXZlbnRzKCkge1xuICAgICAgICBET00uJHNlbGVjdENvbnRhaW5lci5vbignY2xpY2snLCAnLnJlcG8tc2VsZWN0LWhpZ2hsaWdodCcsIHNob3dSZXBvTGlzdCk7XG4gICAgICAgIERPTS4kdWwub24oJ2NsaWNrJywgJ2Rpdi5saS1kZXNjcmlwdGlvbnMnLCBzZWxlY3RSZXBvKTtcbiAgICAgICAgRE9NLiR1bC5vbignY2xpY2snLCAnc3Bhbi5saS1yZW1vdmUnLCBkZWxldGVSZXBvKTtcbiAgICAgICAgRE9NLiRuZXdSZXBvRm9ybS5vbignc3VibWl0JywgYWRkUmVwbyk7XG4gICAgfVxuICAgIFxuICAgIFxuICAgIC8vIHNob3cvaGlkZSByZXBvIGxpc3RcbiAgICBmdW5jdGlvbiBzaG93UmVwb0xpc3QoZSkge1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgIERPTS4kbGlzdENvbnRhaW5lclxuICAgICAgICAgICAgLnRvZ2dsZUNsYXNzKCdoaWRkZW4nKTtcbiAgICB9XG4gICAgXG4gICAgXG4gICAgLy8gc2VsZWN0IGEgcmVwbyB0byB2aWV3XG4gICAgZnVuY3Rpb24gc2VsZWN0UmVwbyhlKSB7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIFxuICAgICAgICB2YXIgcGlja2VkID0gZS5jdXJyZW50VGFyZ2V0LmNoaWxkcmVuWzBdLmlubmVySFRNTC5zcGxpdCgnIC8gJyk7XG4gICAgICAgIFxuICAgICAgICBzZWxlY3RlZFJlcG8gPSBwaWNrZWRbMV07XG4gICAgICAgIFxuICAgICAgICAvLyBjb25zb2xlLmxvZyhwaWNrZWQpOyAvLyBkaWFnXG4gICAgICAgIHBvcHVsYXRlTWVudShyZXBvcyk7XG4gICAgICAgICAgICBcbiAgICAgICAgLy8gQ2FsbCBIaXRBcGkgbW9kdWxlJ3MgcHVibGljIC5nZXRFdmVudHMoKSBtZXRob2RcbiAgICAgICAgSGl0QXBpLmdldEV2ZW50cyhwaWNrZWRbMF0sIHBpY2tlZFsxXSk7XG4gICAgICAgIFxuICAgICAgICAvLyByZXRyYWN0IHJlcG8gbGlzdFxuICAgICAgICBET00uJGxpc3RDb250YWluZXJcbiAgICAgICAgICAgIC5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgfVxuICAgIFxuICAgIFxuICAgIC8vIGRlbGV0ZSByZXBvIGZyb20gdGhlIGxpc3RcbiAgICBmdW5jdGlvbiBkZWxldGVSZXBvKGUpIHtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgXG4gICAgICAgIHZhciBhdXRob3JBbmRSZXBvICAgPSBlLnRhcmdldC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLmRhdGFzZXQucmVwbyxcbiAgICAgICAgICAgIHNlbGVjdGVkRWxlbWVudCA9ICQoZS50YXJnZXQpLnBhcmVudCgpLFxuICAgICAgICAgICAgc2VsZWN0ZWRFbGVtSWQgID0gc2VsZWN0ZWRFbGVtZW50LmF0dHIoJ2lkJyk7XG4gICAgICAgIFxuICAgICAgICAvLyBjb25zb2xlLmxvZygnRGVsZXRlOiAnICsgYXV0aG9yQW5kUmVwbyk7IC8vIGRpYWdcbiAgICAgICAgXG4gICAgICAgIHJlcG9zLnNwbGljZShzZWxlY3RlZEVsZW1JZCwgMSk7XG4gICAgICAgIHNlbGVjdGVkRWxlbWVudC5yZW1vdmUoKTtcbiAgICAgICAgTFMuc2V0RGF0YSgnZGV2LWRhc2gtcmVwb3MnLCByZXBvcyk7XG4gICAgfVxuICAgIFxuICAgIFxuICAgIC8vIGFkZCByZXBvIHRvIHRoZSBsaXN0XG4gICAgZnVuY3Rpb24gYWRkUmVwbyhlKSB7XG4gICAgICAgIFxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIFxuICAgICAgICB2YXIgYXBpVXJsICAgID0gJ2h0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3MnLFxuICAgICAgICAgICAgbmV3QXV0aG9yID0gZS5jdXJyZW50VGFyZ2V0WzBdLnZhbHVlLFxuICAgICAgICAgICAgbmV3UmVwbyAgID0gZS5jdXJyZW50VGFyZ2V0WzFdLnZhbHVlO1xuICAgICAgICBcbiAgICAgICAgJC5nZXRKU09OKGAke2FwaVVybH0vJHtuZXdBdXRob3J9LyR7bmV3UmVwb31gKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcG8pIHtcbiAgICAgICAgICAgICAgICByZXBvcy51bnNoaWZ0KHJlcG8pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gY2xlYXIgaW5wdXRzXG4gICAgICAgICAgICAgICAgRE9NLiRuZXdSZXBvVXNlclswXS52YWx1ZSA9ICcnO1xuICAgICAgICAgICAgICAgIERPTS4kbmV3UmVwb1JlcG9bMF0udmFsdWUgPSAnJztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiByZXBvcztcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihzYXZlUmVwb3MpXG4gICAgICAgICAgICAudGhlbihwb3B1bGF0ZU1lbnUpXG4gICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignRXJyb3IgZmV0Y2hpbmcgcmVwby4nKTtcbiAgICAgICAgICAgIH0pO1xuICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgLy8gcG9wdWxhdGUgbW9kdWxlIHNjb3BlIHJlcG9zIGFycmF5ICYgY2FsbCBIaXRBcGkgb24gMXN0IGxvYWRcbiAgICBmdW5jdGlvbiBwb3B1bGF0ZVJlcG9zKGRhdGEpIHtcbiAgICAgICAgXG4gICAgICAgIGlmIChkYXRhICYmIGRhdGEubGVuZ3RoKSB7XG5cbiAgICAgICAgXG4gICAgICAgICAgICBkYXRhLmZvckVhY2goZnVuY3Rpb24gKHJlcG8pIHtcbiAgICAgICAgICAgICAgICByZXBvcy5wdXNoKHJlcG8pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIGNhcHR1cmUgMXN0IHJlcG8ncyBhdXRob3IgJiByZXBvIG5hbWUgaW4gYW4gYXJyYXlcbiAgICAgICAgICAgIHZhciByZXBvWmVybyA9IHJlcG9zWzBdLmZ1bGxfbmFtZS5zcGxpdCgnLycpO1xuXG4gICAgICAgICAgICAvLyBzZXQgc2VsZWN0ZWQgcmVwbyB0byBmaXJzdCByZXBvJ3MgbmFtZVxuICAgICAgICAgICAgc2VsZWN0ZWRSZXBvID0gcmVwb1plcm9bMV07XG5cbiAgICAgICAgICAgIC8vIENhbGwgSGl0QXBpIG1vZHVsZSdzIHB1YmxpYyAuZ2V0RXZlbnRzKCkgbWV0aG9kXG4gICAgICAgICAgICBIaXRBcGkuZ2V0RXZlbnRzKHJlcG9aZXJvWzBdLCByZXBvWmVyb1sxXSk7XG5cbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIFxuICAgIC8vIHNhdmUgcmVwb3MgdG8gbG9jYWwgc3RvcmFnZVxuICAgIGZ1bmN0aW9uIHNhdmVSZXBvcyhkYXRhKSB7XG4gICAgICAgIExTLnNldERhdGEoJ2Rldi1kYXNoLXJlcG9zJywgcmVwb3MpO1xuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG4gICAgXG4gICAgXG4gICAgLy8gcG9wdWxhdGUgcmVwbyBsaXN0IG1lbnVcbiAgICBmdW5jdGlvbiBwb3B1bGF0ZU1lbnUoZGF0YSkge1xuICAgICAgICBcbiAgICAgICAgLy8gY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgIFxuICAgICAgICBpZiAoZGF0YSAmJiBkYXRhLmxlbmd0aCkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBET00uJHVsLmh0bWwoJycpO1xuXG4gICAgICAgICAgICBkYXRhLmZvckVhY2goZnVuY3Rpb24gKHJlcG8sIGluZCkge1xuICAgICAgICAgICAgICAgIHZhciAkbGkgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJykpO1xuXG4gICAgICAgICAgICAgICAgJGxpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdpZCcsIGluZClcbiAgICAgICAgICAgICAgICAgICAgLmh0bWwoYDxkaXYgY2xhc3M9XCJsaS1kZXNjcmlwdGlvbnNcIiBkYXRhLXJlcG89XCIke3JlcG8ubmFtZX1cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+JHtyZXBvLm93bmVyLmxvZ2lufSAvICR7cmVwby5uYW1lfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+JHtyZXBvLmRlc2NyaXB0aW9ufTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJsaS1yZW1vdmVcIj4mIzEwMDYwPC9zcGFuPmApO1xuXG4gICAgICAgICAgICAgICAgRE9NLiR1bFxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCRsaSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmVuZGVyKCk7XG4gICAgICAgIFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ25vIHJlcG9zLCBob2xtZXMnKTtcbiAgICAgICAgICAgIHJlbmRlcigpO1xuICAgICAgICAgICAgRE9NLiRsaXN0Q29udGFpbmVyXG4gICAgICAgICAgICAgICAgLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBcbiAgICAvLyByZW5kZXJcbiAgICBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgRE9NLiRuZXdSZXBvQnRuXG4gICAgICAgICAgICAuaHRtbCgnKycpO1xuXG4gICAgICAgIERPTS4kbmV3UmVwb1VzZXJcbiAgICAgICAgICAgIC5hdHRyKCdyZXF1aXJlZCcsICd0cnVlJylcbiAgICAgICAgICAgIC5hdHRyKCdwbGFjZWhvbGRlcicsICdhdXRob3InKTtcblxuICAgICAgICBET00uJG5ld1JlcG9SZXBvXG4gICAgICAgICAgICAuYXR0cigncmVxdWlyZWQnLCAndHJ1ZScpXG4gICAgICAgICAgICAuYXR0cigncGxhY2Vob2xkZXInLCAncmVwbycpO1xuXG4gICAgICAgIERPTS4kbmV3UmVwb0Zvcm1cbiAgICAgICAgICAgIC5hZGRDbGFzcygnbmV3LXJlcG8tZm9ybScpXG4gICAgICAgICAgICAuYXBwZW5kKERPTS4kbmV3UmVwb1VzZXIpXG4gICAgICAgICAgICAuYXBwZW5kKERPTS4kbmV3UmVwb1JlcG8pXG4gICAgICAgICAgICAuYXBwZW5kKERPTS4kbmV3UmVwb0J0bik7XG5cbiAgICAgICAgRE9NLiRsaXN0Q29udGFpbmVyXG4gICAgICAgICAgICAuYWRkQ2xhc3MoJ3JlcG8tbGlzdCcpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC5hcHBlbmQoRE9NLiR1bClcbiAgICAgICAgICAgIC5hcHBlbmQoRE9NLiRuZXdSZXBvRm9ybSk7XG4gICAgICAgIFxuICAgICAgICBET00uJHBcbiAgICAgICAgICAgIC5odG1sKGBZb3UgYXJlIGN1cnJlbnRseSB2aWV3aW5nIHRoZSA8c3BhbiBjbGFzcz1cInJlcG8tc2VsZWN0LWhpZ2hsaWdodFwiPiR7c2VsZWN0ZWRSZXBvfSYjeDI1QkM7PC9zcGFuPiByZXBvc2l0b3J5LmApO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICBET00uJHNlbGVjdENvbnRhaW5lclxuICAgICAgICAgICAgLmFwcGVuZChET00uJHApXG4gICAgICAgICAgICAuYXBwZW5kKERPTS4kbGlzdENvbnRhaW5lcik7XG5cbiAgICB9XG5cblxuICAgIC8vIHB1YmxpYyBtZXRob2QgdG8ga2ljayBvZiB0aGUgd2hvbGUgbW9kdWxlXG4gICAgZnVuY3Rpb24gZ2V0UmVwb3ModXNlck5hbWUpIHtcbiAgICAgICAgXG4gICAgICAgIGlmIChjaGVja1N0b3JhZ2UpIHtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdVc2luZyBsb2NhbCBzdG9yYWdlJyk7IC8vIGRpYWdcbiAgICAgICAgICAgIHBvcHVsYXRlUmVwb3MoTFMuZ2V0RGF0YSgnZGV2LWRhc2gtcmVwb3MnKSk7IC8vIGNhY2hlICdyZXBvcycgdG8gbW9kdWxlIHNjb3BlIHZhclxuICAgICAgICAgICAgcG9wdWxhdGVNZW51KHJlcG9zKTsgIC8vIGJ1aWxkIHRoZSBsaXN0XG4gICAgICAgICAgICBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gZ2V0IHVzZXIncyBtb3N0IHJlY2VudGx5LWFjdGl2ZSByZXBvcyBmcm9tIEdpdEh1YlxuICAgICAgICAgICAgJC5nZXRKU09OKCdodHRwczovL2FwaS5naXRodWIuY29tL3VzZXJzLycgK1xuICAgICAgICAgICAgICAgICAgICAgIHVzZXJOYW1lICtcbiAgICAgICAgICAgICAgICAgICAgICAnL3JlcG9zP3NvcnQ9dXBkYXRlZCcpXG4gICAgICAgICAgICAgICAgLnRoZW4oIChyZXBvcykgPT4gcmVwb3Muc2xpY2UoMCwgMykgKSAvLyBtb3N0LXJlY2VudCAzIHJlcG9zXG4gICAgICAgICAgICAgICAgLnRoZW4ocG9wdWxhdGVSZXBvcykgIC8vIGNhY2hlIHJlcG9zIHRvIG1vZHVsZSBzY29wZSAncmVwb3MnYXJyYXlcbiAgICAgICAgICAgICAgICAudGhlbihzYXZlUmVwb3MpICAgICAgLy8gc2F2ZSB0aGVtIGluIGxvY2FsIHN0b3JhZ2VcbiAgICAgICAgICAgICAgICAudGhlbihwb3B1bGF0ZU1lbnUpOyAgLy8gYnVpbGQgdGhlIGxpc3RcbiAgICAgICAgfVxuICAgIH1cblxuICAgIFxuICAgIC8vIHB1YmxpYyBpbml0IG1ldGhvZFxuICAgIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICAgIGNhY2hlRG9tKCk7XG4gICAgICAgIGJpbmRFdmVudHMoKTtcbiAgICAgICAgRE9NLiRsaXN0Q29udGFpbmVyLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICB9XG4gICAgXG4gICAgXG4gICAgLy8gZXhwb3J0IHB1YmxpYyBtZXRob2RzXG4gICAgcmV0dXJuIHtcbiAgICAgICAgaW5pdDogaW5pdCxcbiAgICAgICAgZ2V0UmVwb3M6IGdldFJlcG9zXG4gICAgfTtcblxufShqUXVlcnkpKTtcbiIsIi8qIGpzaGludCBlc3ZlcnNpb246NiAqL1xuLyogZ2xvYmFscyBqUXVlcnksIGNvbnNvbGUsIExTICovXG5cbnZhciBCYWNrZ3JvdW5kcyA9IChmdW5jdGlvbigkKSB7XG4gICAgXG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIFxuICAgIHZhciBET00gPSB7fSxcbiAgICAgICAgYmdBcnIgPSBbJzAwMScsICcwMDInLCAnMDAzJywgJzAwNCcsICcwMDUnLCAnMDA2JywgJzAwNycsICcwMDgnXSxcbiAgICAgICAgdG9kYXkgPSBtYWtlRGF0ZSgpLFxuICAgICAgICBzdGF0ZSA9IGxvYWRTdGF0ZSgpO1xuICAgIFxuICAgIFxuICAgIC8vIGNhY2hlIERPTSBlbGVtZW50c1xuICAgIGZ1bmN0aW9uIGNhY2hlRG9tKCkge1xuICAgICAgICBET00uJGJvZHkgPSAkKCdib2R5Jyk7XG4gICAgfVxuICAgIFxuICAgIFxuICAgIC8vIG1ha2UgYW5kIGZvcm1hdCBkYXRlIHN0cmluZ1xuICAgIGZ1bmN0aW9uIG1ha2VEYXRlKCkge1xuICAgICAgICByZXR1cm4gbmV3IERhdGUoKVxuICAgICAgICAgICAgLnRvRGF0ZVN0cmluZygpICAgLy8gY29udmVydCBvYmplY3QgdG8gYSBzdHJpbmdcbiAgICAgICAgICAgIC5zbGljZSg0LCAxNSk7ICAgIC8vIGp1c3Qgd2FudCAnTU0gREQgWVlZWSdcbiAgICB9XG4gICAgXG4gICAgXG4gICAgLy8gbG9hZCBzdGF0ZSBmcm9tIHN0b3JhZ2VcbiAgICBmdW5jdGlvbiBsb2FkU3RhdGUoKSB7XG4gICAgICAgIHZhciBzdG9yZWRTdGF0ZSA9IExTLmdldERhdGEoJ2Rldi1kYXNoLWJnJyksXG4gICAgICAgICAgICBpbWdJbmR4ICA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGJnQXJyLmxlbmd0aCksXG4gICAgICAgICAgICBuZXdTdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICBpbWdOYW1lOiBiZ0FycltpbWdJbmR4XSxcbiAgICAgICAgICAgICAgICBkYXRlOiBtYWtlRGF0ZSgpXG4gICAgICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ1N0b3JlZCBTdGF0ZTogJywgc3RvcmVkU3RhdGUpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIChzdG9yZWRTdGF0ZSkgPyBzdG9yZWRTdGF0ZSA6IG5ld1N0YXRlO1xuICAgIH1cbiAgICBcbiAgICAgICAgXG4gICAgLy8gc2V0IGJhY2tncm91bmQgaW1hZ2VcbiAgICAvLyBuZXcgaW1hZ2UgZWFjaCBuZXcgZGF5LiBTbyB3ZSAxc3QgY29tcGFyZSB0b2RheSB3aXRoXG4gICAgLy8gbG9jYWwgc3RvcmFnZSBkYXRlLCB1cGRhdGUgbG9jYWwgc3RvcmFnZSBpZiBkaWZmZXJlbnQsXG4gICAgLy8gYW5kIHRoZW4gc2V0IHRoZSBiYWNrZ3JvdW5kIGltYWdlIENTUyBvbiA8Ym9keT5cbiAgICBmdW5jdGlvbiBwaWNrQmFja2dyb3VuZCgpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ1RvZGF5OiAnLCB0b2RheSk7ICAvLyBmb3IgZGlhZ1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnU3RhdGU6ICcsIHN0YXRlKTsgIC8vIGZvciBkaWFnXG4gICAgICAgIFxuICAgICAgICB2YXIgY3VybnRJbWdJbmR4ID0gYmdBcnIuaW5kZXhPZihzdGF0ZS5pbWdOYW1lKSxcbiAgICAgICAgICAgIG5ld0ltZ0luZGV4LFxuICAgICAgICAgICAgbmV3SW1nTmFtZTtcbiAgICAgICAgXG4gICAgICAgIGlmIChuZXcgRGF0ZSh0b2RheSkgPiBuZXcgRGF0ZShzdGF0ZS5kYXRlKSkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBmaW5kIG5ldyBpbWFnZSBpbmRleFxuICAgICAgICAgICAgbmV3SW1nSW5kZXggPSAoY3VybnRJbWdJbmR4ID09PSA3KSA/IDAgOiBjdXJudEltZ0luZHggKyAxO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBmaW5kIG5ldyBpbWFnZSBzdHJpbmcgbmFtZVxuICAgICAgICAgICAgbmV3SW1nTmFtZSA9IGJnQXJyW25ld0ltZ0luZGV4XTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gc2F2ZSBuZXcgaW1hZ2UgbmFtZSAmIGRhdGUgdG8gbG9jYWwgc3RvcmFnZSBcbiAgICAgICAgICAgIExTLnNldERhdGEoJ2Rldi1kYXNoLWJnJywge1xuICAgICAgICAgICAgICAgIGltZ05hbWU6IG5ld0ltZ05hbWUsXG4gICAgICAgICAgICAgICAgZGF0ZTogdG9kYXlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyB1cGRhdGUgdGhlIERPTVxuICAgICAgICAgICAgcmVuZGVyKG5ld0ltZ05hbWUpO1xuICAgICAgICAgICAgXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZW5kZXIoc3RhdGUuaW1nTmFtZSk7XG4gICAgICAgICAgICAvLyBzYXZlIGN1cnJlbnQgaW1hZ2UgbmFtZSAmIGRhdGUgdG8gbG9jYWwgc3RvcmFnZSBcbiAgICAgICAgICAgIExTLnNldERhdGEoJ2Rldi1kYXNoLWJnJywge1xuICAgICAgICAgICAgICAgIGltZ05hbWU6IHN0YXRlLmltZ05hbWUsXG4gICAgICAgICAgICAgICAgZGF0ZTogdG9kYXlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICAvLyByZW5kZXIgdG8gRE9NXG4gICAgZnVuY3Rpb24gcmVuZGVyKGltYWdlTmFtZSkge1xuICAgICAgICBET00uJGJvZHlcbiAgICAgICAgICAgIC5jc3MoJ2JhY2tncm91bmQtaW1hZ2UnLCAndXJsKGRpc3QvYXNzZXRzLycgKyBpbWFnZU5hbWUgKyAnLmpwZyknKTtcbiAgICB9XG4gICAgXG4gICAgXG4gICAgLy8gcHVibGljIGluaXQgbWV0aG9kXG4gICAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgICAgY2FjaGVEb20oKTtcbiAgICAgICAgcGlja0JhY2tncm91bmQoKTtcbiAgICB9XG4gICAgXG4gICAgXG4gICAgLy8gcmV0dXJuIHB1YmxpYyBhcGlcbiAgICByZXR1cm4ge1xuICAgICAgICBpbml0OiBpbml0XG4gICAgfTtcbiAgICBcbn0oalF1ZXJ5KSk7XG4iLCIvKiBqc2hpbnQgZXN2ZXJzaW9uOjYgKi9cbi8qIGdsb2JhbHMgJCwgZG9jdW1lbnQsIGNvbnNvbGUgKi9cblxuLyogYXBwLmpzIGNhbGwgZWFjaCBtb2R1bGUncyBwdWJsaWMgbWV0aG9kKHMpICAqL1xuXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XG4gICAgXG4gICAgQmFja2dyb3VuZHMuaW5pdCgpO1xuICAgIFxuICAgIFJlcG9TZWxlY3QuaW5pdCgpO1xuICAgIFxuICAgIEdyZWV0LmluaXQoKTtcbiAgICBcbiAgICBIaXRBcGkuaW5pdCgpO1xuICAgIFxuICAgIFJlbmRlclRhYmxlLmluaXQoKTtcblxuICAgIFJlbmRlckNoYXJ0LmluaXQoKTtcblxufSk7XG4iXX0=
