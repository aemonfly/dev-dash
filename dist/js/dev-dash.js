"use strict";$(document).ready(function(){HitApi.init(),RenderTable.init()});var HitApi=function(){function e(){o.$inputForm=$("#input-form")}function t(){o.$inputForm.submit(p)}function a(e){return{type:e.type,date:n(e.created_at),actor:e.actor.display_login,avatar:e.actor.avatar_url,payload:e.payload}}function n(e){return new Date(e).toDateString().slice(0,15).replace(/ 0/g," ")}function p(e){e.preventDefault();var t={url:"https://api.github.com/repos",user:e.currentTarget[0].value,repo:e.currentTarget[1].value,route:"events"},a=t.url+"/"+t.user+"/"+t.repo+"/"+t.route;$.getJSON(a).then(r)}function r(e){var t=["PushEvent","CommitCommentEvent"],n=["IssuesEvent","IssueCommentEvent","ProjectEvent","ProjectCardEvent","ProjectColumnEvent"],p=["CreateEvent","PullRequestEvent","PullRequestReviewEvent","PullRequestReviewCommentEvent"],r=e.filter(function(e){return t.indexOf(e.type)!==-1}).map(a),l=e.filter(function(e){return n.indexOf(e.type)!==-1}).map(a),o=e.filter(function(e){return p.indexOf(e.type)!==-1}).map(a);RenderTable.render(r,l,o)}function l(){e(),t()}var o={};return{init:l}}(),RenderTable=function(){function e(){l.$container=$(".table-container")}function t(e,t,r){l.$container.empty(),e.length>0&&a(e),t.length>0&&n(t),r.length>0&&p(r)}function a(e){var t=$(document.createElement("div")),a=$(document.createElement("ul"));e.forEach(function(e){if("PushEvent"===e.type)e.payload.commits.forEach(function(t){var n=$(document.createElement("li")),p=$(document.createElement("img")),r=$(document.createElement("p")),l=$(document.createElement("span")),o=$(document.createElement("a")),d=t.url.replace(/\/\/api./,"//").replace(/\/repos\//,"/").replace(/commits/,"commit");p.attr("src",e.avatar),o.attr("target","_blank").attr("href",d).html('<span class="bolder">'+t.sha.slice(0,6)+"</span>"),l.text('"'+t.message+'"'),r.append('<span class="bolder">'+e.actor+"</span> committed ").append(o).append(" on "+e.date+": ").append(l),n.append(p).append(r),a.append(n)});else{var t=$(document.createElement("li")),n=$(document.createElement("img")),p=$(document.createElement("p")),r=$(document.createElement("span")),l=$(document.createElement("a"));n.attr("src",e.avatar),l.attr("target","_blank").attr("href",e.payload.comment.html_url).html('<span class="bolder">'+e.payload.comment.commit_id.slice(0,6)+"</span>"),r.text('"'+e.payload.comment.body+'"'),p.append('<span class="bolder">'+e.actor+"</span> commented on ").append(l).append(" on "+e.date+": ").append(r),t.append(n).append(p),a.append(t)}}),a.addClass("col-list"),t.addClass("col-1of3").append("<h3>"+e.length+" Commit-Related Events</h3>").append(a),l.$container.append(t)}function n(e){var t=$(document.createElement("div")),a=$(document.createElement("ul"));e.forEach(function(e){var t=$(document.createElement("li")),n=$(document.createElement("img")),p=$(document.createElement("p")),r=$(document.createElement("a"));n.attr("src",e.avatar),r.attr("target","_blank"),"IssuesEvent"===e.type?(r.attr("href",e.payload.issue.html_url).html('<span class="bolder">issue '+e.payload.issue.number+"</span>"),p.append('<span class="bolder">'+e.actor+"</span> "+e.payload.action+" ").append(r).append(" on "+e.date+': "'+e.payload.issue.title+'"'),t.append(n).append(p),a.append(t)):"IssueCommentEvent"===e.type&&(r.attr("href",e.payload.comment.html_url).html('<span class="bolder">issue '+e.payload.issue.number+"</span>"),p.append('<span class="bolder">'+e.actor+"</span> commented on ").append(r).append(" on "+e.date+': "'+e.payload.comment.body+'"'),t.append(n).append(p),a.append(t))}),a.addClass("col-list"),t.addClass("col-1of3").append("<h3>"+e.length+" Todo-Related Events</h3>").append(a),l.$container.append(t)}function p(e){var t,a=$(document.createElement("div")),n=$(document.createElement("ul"));e.forEach(function(e){var a=$(document.createElement("li")),p=$(document.createElement("img")),r=$(document.createElement("p")),l=$(document.createElement("a"));p.attr("src",e.avatar),l.attr("target","_blank"),"CreateEvent"===e.type?(r.append(['<span class="bolder">'+e.actor+"</span>","created",e.payload.ref_type,'<span class="bolder">'+e.payload.ref+"</span>","on",e.date].join(" ")),a.append(p).append(r),n.append(a)):"PullRequestEvent"===e.type?(t=e.payload.pull_request.url.replace(/\/\/api./,"//").replace(/\/repos\//,"/").replace(/pulls/,"pull"),l.attr("href",t).html('<span class="bolder">pull request '+e.payload.pull_request.number+"</span>"),r.append('<span class="bolder">'+e.actor+"</span>").append(" "+e.payload.action+" ").append(l).append(" on "+e.date),a.append(p).append(r),n.append(a)):"PullRequestReviewEvent"===e.type?(l.attr("href",e.payload.pull_request.html_url).text(e.payload.pull_request.title),r.append([e.actor,e.payload.action,"review of "].join(" ")).append(l).append(" on"+e.date),a.append(p).append(r),n.append(a)):"PullRequestReviewCommentEvent"===e.type&&(l.attr("href",e.payload.comment.html_url).text(e.payload.comment.body),r.append(['<span class="bolder">'+e.actor+"</span>",e.payload.action,"pull request comment "].join(" ")).append(l).append(" on"+e.date),a.append(p).append(r),n.append(a))}),n.addClass("col-list"),a.addClass("col-1of3").append("<h3>"+e.length+" Merge-Related Events</h3>").append(n),l.$container.append(a)}function r(){e()}var l={};return{init:r,render:t}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImdldC1ldmVudHMuanMiLCJyZW5kZXItdGFibGUuanMiXSwibmFtZXMiOlsiJCIsImRvY3VtZW50IiwicmVhZHkiLCJIaXRBcGkiLCJpbml0IiwiUmVuZGVyVGFibGUiLCJjYWNoZURvbSIsIkRPTSIsIiRpbnB1dEZvcm0iLCJiaW5kRXZlbnRzIiwic3VibWl0IiwiZ2V0RXZlbnRzIiwicHJlcGFyZUV2ZW50cyIsImUiLCJ0eXBlIiwiZGF0ZSIsImZvcm1hdERhdGVzIiwiY3JlYXRlZF9hdCIsImFjdG9yIiwiZGlzcGxheV9sb2dpbiIsImF2YXRhciIsImF2YXRhcl91cmwiLCJwYXlsb2FkIiwiRGF0ZSIsInRvRGF0ZVN0cmluZyIsInNsaWNlIiwicmVwbGFjZSIsInByZXZlbnREZWZhdWx0IiwiYXBpIiwidXJsIiwidXNlciIsImN1cnJlbnRUYXJnZXQiLCJ2YWx1ZSIsInJlcG8iLCJyb3V0ZSIsInJlcG9FdmVudHMiLCJnZXRKU09OIiwidGhlbiIsImhhbmRsZVJlc3BvbnNlIiwicmVzcG9uc2UiLCJjb21taXRUeXBlcyIsInRvZG9UeXBlcyIsIm1lcmdlVHlwZXMiLCJjb21taXRFdmVudHMiLCJmaWx0ZXIiLCJpbmRleE9mIiwibWFwIiwidG9kb0V2ZW50cyIsIm1lcmdlRXZlbnRzIiwicmVuZGVyIiwiJGNvbnRhaW5lciIsImVtcHR5IiwibGVuZ3RoIiwicmVuZGVyQ29tbWl0RXZlbnRzIiwicmVuZGVyVG9kb0V2ZW50cyIsInJlbmRlck1lcmdlRXZlbnRzIiwiZXMiLCIkY29sdW1uIiwiY3JlYXRlRWxlbWVudCIsIiRsaXN0IiwiZm9yRWFjaCIsImV2dCIsImNvbW1pdHMiLCJjb21taXQiLCIkbGlzdEl0ZW0iLCIkaW1nIiwiJHBhcmFncmFwaCIsIiRwYXJhU3BhbiIsIiRhIiwiY2xlYW5VcmwiLCJhdHRyIiwiaHRtbCIsInNoYSIsInRleHQiLCJtZXNzYWdlIiwiYXBwZW5kIiwiY29tbWVudCIsImh0bWxfdXJsIiwiY29tbWl0X2lkIiwiYm9keSIsImFkZENsYXNzIiwiaXNzdWUiLCJudW1iZXIiLCJhY3Rpb24iLCJ0aXRsZSIsInJlZl90eXBlIiwicmVmIiwiam9pbiIsInB1bGxfcmVxdWVzdCJdLCJtYXBwaW5ncyI6IllBS0FBLEdBQUFDLFVBQUFDLE1BQUEsV0FNQUMsT0FBQUMsT0FFQUMsWUFBQUQsUUNWQSxJQUFBRCxRQUFBLFdBTUEsUUFBQUcsS0FDQUMsRUFBQUMsV0FBQVIsRUFBQSxlQUtBLFFBQUFTLEtBQ0FGLEVBQUFDLFdBQUFFLE9BQUFDLEdBS0EsUUFBQUMsR0FBQUMsR0FDQSxPQUNBQyxLQUFBRCxFQUFBQyxLQUNBQyxLQUFBQyxFQUFBSCxFQUFBSSxZQUNBQyxNQUFBTCxFQUFBSyxNQUFBQyxjQUNBQyxPQUFBUCxFQUFBSyxNQUFBRyxXQUNBQyxRQUFBVCxFQUFBUyxTQU1BLFFBQUFOLEdBQUFELEdBRUEsTUFBQSxJQUFBUSxNQUFBUixHQUNBUyxlQUNBQyxNQUFBLEVBQUEsSUFDQUMsUUFBQSxNQUFBLEtBS0EsUUFBQWYsR0FBQUUsR0FFQUEsRUFBQWMsZ0JBRUEsSUFBQUMsSUFDQUMsSUFBQSwrQkFDQUMsS0FBQWpCLEVBQUFrQixjQUFBLEdBQUFDLE1BQ0FDLEtBQUFwQixFQUFBa0IsY0FBQSxHQUFBQyxNQUNBRSxNQUFBLFVBRUFDLEVBQUFQLEVBQUFDLElBQUEsSUFBQUQsRUFBQUUsS0FBQSxJQUFBRixFQUFBSyxLQUFBLElBQUFMLEVBQUFNLEtBRUFsQyxHQUFBb0MsUUFBQUQsR0FBQUUsS0FBQUMsR0FLQSxRQUFBQSxHQUFBQyxHQUdBLEdBQUFDLElBQUEsWUFDQSxzQkFHQUMsR0FBQSxjQUNBLG9CQUNBLGVBQ0EsbUJBQ0Esc0JBR0FDLEdBQUEsY0FDQSxtQkFDQSx5QkFDQSxpQ0FJQUMsRUFBQUosRUFDQUssT0FBQSxTQUFBL0IsR0FBQSxNQUFBMkIsR0FBQUssUUFBQWhDLEVBQUFDLFNBQUEsSUFDQWdDLElBQUFsQyxHQUdBbUMsRUFBQVIsRUFDQUssT0FBQSxTQUFBL0IsR0FBQSxNQUFBNEIsR0FB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UUFBQTZELE9BQ0EsY0FDQUksS0FBQSxNQUNBWixPQUFBUCxHQUNBTyxPQUFBLE1BQUFkLEVBQUE5QyxNQUVBaUQsRUFDQVcsT0FBQVYsR0FDQVUsT0FBQVQsR0FFQVAsRUFDQWdCLE9BQUFYLElBRUEsa0NBQUFILEVBQUEvQyxPQUVBc0QsRUFDQUUsS0FBQSxPQUFBVCxFQUFBdkMsUUFBQXNELFFBQUFDLFVBQ0FKLEtBQUFaLEVBQUF2QyxRQUFBc0QsUUFBQUcsTUFFQWIsRUFDQVMsUUFBQSx3QkFDQWQsRUFBQTNDLE1BREEsVUFFQTJDLEVBQUF2QyxRQUFBNkQsT0FDQSx5QkFDQUksS0FBQSxNQUNBWixPQUFBUCxHQUNBTyxPQUFBLE1BQUFkLEVBQUE5QyxNQUVBaUQsRUFDQVcsT0FBQVYsR0FDQVUsT0FBQVQsR0FFQVAsRUFDQWdCLE9BQUFYLE1BS0FMLEVBQ0FxQixTQUFBLFlBRUF2QixFQUNBdUIsU0FBQSxZQUNBTCxPQUZBLE9BRUFuQixFQUFBSixPQUZBLDhCQUdBdUIsT0FBQWhCLEdBRUFwRCxFQUFBMkMsV0FBQXlCLE9BQUFsQixHQU1BLFFBQUFyRCxLQUNBRSxJQTVYQSxHQUFBQyxLQWlZQSxRQUNBSCxLQUFBQSxFQUNBNkMsT0FBQUEiLCJmaWxlIjoiZGV2LWRhc2guanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBqc2hpbnQgZXN2ZXJzaW9uOjYgKi9cbi8qIGdsb2JhbHMgJCwgZG9jdW1lbnQsIGNvbnNvbGUgKi9cblxuLyogYXBwLmpzIGNhbGwgZWFjaCBtb2R1bGUncyBwdWJsaWMgbWV0aG9kKHMpICAqL1xuXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XG4gICAgXG4gICAgLy8gQmFja2dyb3VuZHMuaW5pdCgpOyAgLy8gdG9kb1xuICAgIFxuICAgIC8vIEdyZWV0ZXIuaW5pdCgpOyAgLy8gdG9kb1xuICAgIFxuICAgIEhpdEFwaS5pbml0KCk7XG4gICAgXG4gICAgUmVuZGVyVGFibGUuaW5pdCgpO1xuXG4gICAgLy8gUmVuZGVyR3JhcGgucmVuZGVyKCk7ICAvLyB0b2RvXG5cbn0pOyIsIi8qIGpzaGludCBlc3ZlcnNpb246NiAqL1xuLyogZ2xvYmFscyAkLCBkb2N1bWVudCwgY29uc29sZSwgUmVuZGVyVGFibGUgKi9cblxudmFyIEhpdEFwaSA9IChmdW5jdGlvbiAoKSB7XG5cbiAgICB2YXIgRE9NID0ge307XG4gICAgXG4gICAgXG4gICAgLy8gY2FjaGUgRE9NIGVsZW1lbnRzXG4gICAgZnVuY3Rpb24gY2FjaGVEb20oKSB7XG4gICAgICAgIERPTS4kaW5wdXRGb3JtID0gJCgnI2lucHV0LWZvcm0nKTtcbiAgICB9XG4gICAgXG5cbiAgICAvLyBiaW5kIGV2ZW50c1xuICAgIGZ1bmN0aW9uIGJpbmRFdmVudHMoKSB7XG4gICAgICAgIERPTS4kaW5wdXRGb3JtLnN1Ym1pdChnZXRFdmVudHMpO1xuICAgIH1cblxuXG4gICAgLy8gcHJlcGFyZSBldmVudHMgcHJpb3IgdG8gY2FsbGluZyByZW5kZXJlcnNcbiAgICBmdW5jdGlvbiBwcmVwYXJlRXZlbnRzKGUpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGUgICAgOiBlLnR5cGUsXG4gICAgICAgICAgICBkYXRlICAgIDogZm9ybWF0RGF0ZXMoZS5jcmVhdGVkX2F0KSxcbiAgICAgICAgICAgIGFjdG9yICAgOiBlLmFjdG9yLmRpc3BsYXlfbG9naW4sXG4gICAgICAgICAgICBhdmF0YXIgIDogZS5hY3Rvci5hdmF0YXJfdXJsLFxuICAgICAgICAgICAgcGF5bG9hZCA6IGUucGF5bG9hZFxuICAgICAgICB9O1xuICAgIH1cblxuXG4gICAgLy8gZm9ybWF0IGRhdGVzXG4gICAgZnVuY3Rpb24gZm9ybWF0RGF0ZXMoZGF0ZSkge1xuXG4gICAgICAgIHJldHVybiBuZXcgRGF0ZShkYXRlKSAgICAgLy8gbWFrZSBkYXRlIG9iamVjdCBmb3IgZGF5ICYgbW9udGggYWJicmV2XG4gICAgICAgICAgICAudG9EYXRlU3RyaW5nKCkgICAgICAgLy8gY29udmVydCBvYmplY3QgdG8gYSBzdHJpbmdcbiAgICAgICAgICAgIC5zbGljZSgwLCAxNSkgICAgICAgICAvLyByZW1vdmUgZXZlcnl0aGluZyBhZnRlciB0aGUgWVlZWVxuICAgICAgICAgICAgLnJlcGxhY2UoLyAwL2csICcgJyk7IC8vIHJlbW92ZSBsZWFkaW5nIHplcm9zIChleC4gJzA0JyA9PiAnNCcpXG4gICAgfVxuXG4gICAgXG4gICAgLy8gZ2V0IGdpdGh1YiBldmVudHNcbiAgICBmdW5jdGlvbiBnZXRFdmVudHMoZSkge1xuICAgICAgICBcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIHZhciBhcGkgPSB7XG4gICAgICAgICAgICB1cmwgICA6ICdodHRwczovL2FwaS5naXRodWIuY29tL3JlcG9zJyxcbiAgICAgICAgICAgIHVzZXIgIDogZS5jdXJyZW50VGFyZ2V0WzBdLnZhbHVlLFxuICAgICAgICAgICAgcmVwbyAgOiBlLmN1cnJlbnRUYXJnZXRbMV0udmFsdWUsXG4gICAgICAgICAgICByb3V0ZSA6ICdldmVudHMnXG4gICAgICAgIH07XG4gICAgICAgIHZhciByZXBvRXZlbnRzID0gYCR7YXBpLnVybH0vJHthcGkudXNlcn0vJHthcGkucmVwb30vJHthcGkucm91dGV9YDtcblxuICAgICAgICAkLmdldEpTT04ocmVwb0V2ZW50cykudGhlbihoYW5kbGVSZXNwb25zZSk7XG4gICAgfVxuXG5cbiAgICAvLyBoYW5kbGUgR0ggSlNPTiByZXNwb25zZSBkYXRhXG4gICAgZnVuY3Rpb24gaGFuZGxlUmVzcG9uc2UocmVzcG9uc2UpIHtcblxuICAgICAgICAvLyB3ZSdyZSBzcGxpdHRpbmcgZXZlbnRzIGludG8gMyBjYXRlZ29yaWVzLCBiYXNlZCBvbiBldmVudCB0eXBlXG4gICAgICAgIHZhciBjb21taXRUeXBlcyA9IFsnUHVzaEV2ZW50JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICdDb21taXRDb21tZW50RXZlbnQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRvZG9UeXBlcyA9IFsnSXNzdWVzRXZlbnQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICdJc3N1ZUNvbW1lbnRFdmVudCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgJ1Byb2plY3RFdmVudCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgJ1Byb2plY3RDYXJkRXZlbnQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICdQcm9qZWN0Q29sdW1uRXZlbnQnXG4gICAgICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBtZXJnZVR5cGVzID0gWydDcmVhdGVFdmVudCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICdQdWxsUmVxdWVzdEV2ZW50JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJ1B1bGxSZXF1ZXN0UmV2aWV3RXZlbnQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAnUHVsbFJlcXVlc3RSZXZpZXdDb21tZW50RXZlbnQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gY3JlYXRlIGFycmF5IG9mIGNvbW1pdC1yZWxhdGVkIGV2ZW50c1xuICAgICAgICAgICAgY29tbWl0RXZlbnRzID0gcmVzcG9uc2VcbiAgICAgICAgICAgICAgICAuZmlsdGVyKChlKSA9PiBjb21taXRUeXBlcy5pbmRleE9mKGUudHlwZSkgIT09IC0xKVxuICAgICAgICAgICAgICAgIC5tYXAocHJlcGFyZUV2ZW50cyksXG5cbiAgICAgICAgICAgIC8vIGNyZWF0ZSBhcnJheSBvZiB0b2RvLXJlbGF0ZWQgZXZlbnRzXG4gICAgICAgICAgICB0b2RvRXZlbnRzID0gcmVzcG9uc2VcbiAgICAgICAgICAgICAgICAuZmlsdGVyKChlKSA9PiB0b2RvVHlwZXMuaW5kZXhPZihlLnR5cGUpICE9PSAtMSlcbiAgICAgICAgICAgICAgICAubWFwKHByZXBhcmVFdmVudHMpLFxuXG4gICAgICAgICAgICAvLyBjcmVhdGUgYnVpbGQgYXJyYXkgb2YgbWVyZ2UtcmVsYXRlZCBldmVudHNcbiAgICAgICAgICAgIG1lcmdlRXZlbnRzID0gcmVzcG9uc2VcbiAgICAgICAgICAgICAgICAuZmlsdGVyKChlKSA9PiBtZXJnZVR5cGVzLmluZGV4T2YoZS50eXBlKSAhPT0gLTEpXG4gICAgICAgICAgICAgICAgLm1hcChwcmVwYXJlRXZlbnRzKTtcbiAgICAgICAgXG4gICAgICAgIC8vIGNhbGwgcmVuZGVyZXJzXG4gICAgICAgIFJlbmRlclRhYmxlLnJlbmRlcihjb21taXRFdmVudHMsIHRvZG9FdmVudHMsIG1lcmdlRXZlbnRzKTtcbiAgICAgICAgLy8gUmVuZGVyR3JhcGgucmVuZGVyKGNvbW1pdEV2ZW50cywgdG9kb0V2ZW50cywgbWVyZ2VFdmVudHMpOyAgLy8gdG8gZG9cbiAgICB9XG4gICAgXG4gICAgXG4gICAgLy8gcHVibGljIGluaXQgbWV0aG9kXG4gICAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgICAgY2FjaGVEb20oKTtcbiAgICAgICAgYmluZEV2ZW50cygpO1xuICAgIH1cbiAgICBcbiAgICBcbiAgICAvLyByZXR1cm4gcHVibGljIG1ldGhvZFxuICAgIHJldHVybiB7XG4gICAgICAgIGluaXQ6IGluaXRcbiAgICB9O1xuXG59KCkpO1xuIiwiLyoganNoaW50IGVzdmVyc2lvbjo2ICovXG4vKiBnbG9iYWxzICQsIGRvY3VtZW50ICovXG5cbnZhciBSZW5kZXJUYWJsZSA9IChmdW5jdGlvbiAoKSB7XG5cbiAgICB2YXIgRE9NID0ge307XG4gICAgXG4gICAgXG4gICAgLy8gY2FjaGUgRE9NIGVsZW1lbnRzXG4gICAgZnVuY3Rpb24gY2FjaGVEb20oKSB7XG4gICAgICAgIERPTS4kY29udGFpbmVyID0gJCgnLnRhYmxlLWNvbnRhaW5lcicpO1xuICAgIH1cbiAgICAgICAgXG5cbiAgICAvLyBwdWJsaWMgcmVuZGVyIG1ldGhvZCBjYWxscyBjYXRlZ29yeSByZW5kZXJlcnMgaWYgY2F0ZWdvcnkgaGFzIGV2ZW50c1xuICAgIGZ1bmN0aW9uIHJlbmRlcihjb21taXRFdmVudHMsIHRvZG9FdmVudHMsIG1lcmdlRXZlbnRzKSB7XG5cbiAgICAgICAgLy8gY2xlYXIgcHJldmlvdXMgcmVzdWx0c1xuICAgICAgICBET00uJGNvbnRhaW5lci5lbXB0eSgpO1xuXG4gICAgICAgIGlmIChjb21taXRFdmVudHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmVuZGVyQ29tbWl0RXZlbnRzKGNvbW1pdEV2ZW50cyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodG9kb0V2ZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZW5kZXJUb2RvRXZlbnRzKHRvZG9FdmVudHMpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG1lcmdlRXZlbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHJlbmRlck1lcmdlRXZlbnRzKG1lcmdlRXZlbnRzKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgLy8gcmVuZGVyIGNvbW1pdCBldmVudHNcbiAgICBmdW5jdGlvbiByZW5kZXJDb21taXRFdmVudHMoZXMpIHtcblxuICAgICAgICAvLyBnZXRzIFB1c2hFdmVudHMgJiBDb21taXRDb21tZW50RXZlbnRzXG5cbiAgICAgICAgdmFyICRjb2x1bW4gPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpKSxcbiAgICAgICAgICAgICRsaXN0ICAgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJykpO1xuXG4gICAgICAgIGVzLmZvckVhY2goZnVuY3Rpb24gKGV2dCkge1xuXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhldnQpO1xuXG4gICAgICAgICAgICBpZiAoZXZ0LnR5cGUgPT09ICdQdXNoRXZlbnQnKSB7XG5cbiAgICAgICAgICAgICAgICAvLyB3aGVuIGl0J3MgYSBwdXNoIGV2ZW50LCBleHRyYWN0IHRoZSBjb21taXRzXG4gICAgICAgICAgICAgICAgZXZ0LnBheWxvYWQuY29tbWl0cy5mb3JFYWNoKGZ1bmN0aW9uIChjb21taXQpIHtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgJGxpc3RJdGVtICA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKSksXG4gICAgICAgICAgICAgICAgICAgICAgICAkaW1nICAgICAgID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKSksXG4gICAgICAgICAgICAgICAgICAgICAgICAkcGFyYWdyYXBoID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJykpLFxuICAgICAgICAgICAgICAgICAgICAgICAgJHBhcmFTcGFuICA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICRhICAgICAgICAgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gY29udmVydCBjb21taXQgVVJMIGludG8gcmVndWxhciBnaXRodWIuY29tIFVSTFxuICAgICAgICAgICAgICAgICAgICAvLyBmcm9tOiBodHRwczovL2FwaS5naXRodWIuY29tL3JlcG9zL3t1c2VyfS97cmVwb30vY29tbWl0cy97c2hhfVxuICAgICAgICAgICAgICAgICAgICAvLyAgIHRvOiBodHRwczovL2dpdGh1Yi5jb20ve3VzZXJ9L3tyZXBvfS9jb21taXQve3NoYX1cbiAgICAgICAgICAgICAgICAgICAgdmFyIGNsZWFuVXJsID0gKGNvbW1pdC51cmwpXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgJ2FwaS4nXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFwvXFwvYXBpLi8sICdcXC9cXC8nKVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlICdyZXBvcy8nXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFwvcmVwb3NcXC8vLCAnXFwvJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlcGxhY2UgJ2NvbW1pdHMnIHdpdGggJ2NvbW1pdCdcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9jb21taXRzLywgJ2NvbW1pdCcpO1xuXG4gICAgICAgICAgICAgICAgICAgICRpbWcuYXR0cignc3JjJywgZXZ0LmF2YXRhcik7XG5cbiAgICAgICAgICAgICAgICAgICAgJGFcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd0YXJnZXQnLCAnX2JsYW5rJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdocmVmJywgY2xlYW5VcmwpXG4gICAgICAgICAgICAgICAgICAgICAgICAuaHRtbChgPHNwYW4gY2xhc3M9XCJib2xkZXJcIj4keyhjb21taXQuc2hhKS5zbGljZSgwLDYpfTwvc3Bhbj5gKTtcblxuICAgICAgICAgICAgICAgICAgICAkcGFyYVNwYW5cbiAgICAgICAgICAgICAgICAgICAgICAgIC50ZXh0KGBcIiR7Y29tbWl0Lm1lc3NhZ2V9XCJgKTtcblxuICAgICAgICAgICAgICAgICAgICAkcGFyYWdyYXBoXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKGA8c3BhbiBjbGFzcz1cImJvbGRlclwiPiR7ZXZ0LmFjdG9yfTwvc3Bhbj4gY29tbWl0dGVkIGApXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCRhKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChgIG9uICR7ZXZ0LmRhdGV9OiBgKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkcGFyYVNwYW4pO1xuXG4gICAgICAgICAgICAgICAgICAgICRsaXN0SXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkaW1nKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkcGFyYWdyYXBoKTtcblxuICAgICAgICAgICAgICAgICAgICAkbGlzdFxuICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkbGlzdEl0ZW0pO1xuXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIH0gZWxzZSB7IC8vIGVsc2UgaXQncyBhIGNvbW1lbnRcblxuICAgICAgICAgICAgICAgIHZhciAkbGlzdEl0ZW0gID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpKSxcbiAgICAgICAgICAgICAgICAgICAgJGltZyAgICAgICA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJykpLFxuICAgICAgICAgICAgICAgICAgICAkcGFyYWdyYXBoID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJykpLFxuICAgICAgICAgICAgICAgICAgICAkcGFyYVNwYW4gID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJykpLFxuICAgICAgICAgICAgICAgICAgICAkYSAgICAgICAgID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJykpO1xuXG4gICAgICAgICAgICAgICAgJGltZy5hdHRyKCdzcmMnLCBldnQuYXZhdGFyKTtcblxuICAgICAgICAgICAgICAgICRhXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCd0YXJnZXQnLCAnX2JsYW5rJylcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2hyZWYnLCBldnQucGF5bG9hZC5jb21tZW50Lmh0bWxfdXJsKVxuICAgICAgICAgICAgICAgICAgICAuaHRtbChgPHNwYW4gY2xhc3M9XCJib2xkZXJcIj4keyhldnQucGF5bG9hZC5jb21tZW50LmNvbW1pdF9pZCkuc2xpY2UoMCw2KX08L3NwYW4+YCk7XG5cbiAgICAgICAgICAgICAgICAkcGFyYVNwYW5cbiAgICAgICAgICAgICAgICAgICAgLnRleHQoYFwiJHtldnQucGF5bG9hZC5jb21tZW50LmJvZHl9XCJgKTtcblxuICAgICAgICAgICAgICAgICRwYXJhZ3JhcGhcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChgPHNwYW4gY2xhc3M9XCJib2xkZXJcIj4ke2V2dC5hY3Rvcn08L3NwYW4+IGNvbW1lbnRlZCBvbiBgKVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCRhKVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKGAgb24gJHtldnQuZGF0ZX06IGApXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJHBhcmFTcGFuKTtcblxuICAgICAgICAgICAgICAgICRsaXN0SXRlbVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCRpbWcpXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJHBhcmFncmFwaCk7XG5cbiAgICAgICAgICAgICAgICAkbGlzdFxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCRsaXN0SXRlbSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSk7XG5cbiAgICAgICAgJGxpc3RcbiAgICAgICAgICAgIC5hZGRDbGFzcygnY29sLWxpc3QnKTtcblxuICAgICAgICAkY29sdW1uXG4gICAgICAgICAgICAuYWRkQ2xhc3MoJ2NvbC0xb2YzJylcbiAgICAgICAgICAgIC5hcHBlbmQoYDxoMz4ke2VzLmxlbmd0aH0gQ29tbWl0LVJlbGF0ZWQgRXZlbnRzPC9oMz5gKVxuICAgICAgICAgICAgLmFwcGVuZCgkbGlzdCk7XG5cbiAgICAgICAgRE9NLiRjb250YWluZXIuYXBwZW5kKCRjb2x1bW4pO1xuXG4gICAgfVxuXG5cbiAgICAvLyByZW5kZXIgdG9kbyBldmVudHNcbiAgICBmdW5jdGlvbiByZW5kZXJUb2RvRXZlbnRzKGVzKSB7XG5cbiAgICAgICAgLy8gZ2V0cyBJc3N1ZXNFdmVudHMsIElzc3VlQ29tbWVudEV2ZW50cywgUHJvamVjdEV2ZW50cyxcbiAgICAgICAgLy8gICBQcm9qZWN0Q2FyZEV2ZW50cywgYW5kIFByb2plY3RDb2x1bW5FdmVudHNcblxuICAgICAgICB2YXIgJGNvbHVtbiA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JykpLFxuICAgICAgICAgICAgJGxpc3QgICA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKSk7XG5cbiAgICAgICAgZXMuZm9yRWFjaChmdW5jdGlvbiAoZXZ0KSB7XG5cbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGV2dCk7XG5cbiAgICAgICAgICAgIHZhciAkbGlzdEl0ZW0gID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpKSxcbiAgICAgICAgICAgICAgICAkaW1nICAgICAgID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKSksXG4gICAgICAgICAgICAgICAgJHBhcmFncmFwaCA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpKSxcbiAgICAgICAgICAgICAgICAkYSAgICAgICAgID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJykpO1xuXG4gICAgICAgICAgICAkaW1nLmF0dHIoJ3NyYycsIGV2dC5hdmF0YXIpO1xuXG4gICAgICAgICAgICAkYS5hdHRyKCd0YXJnZXQnLCAnX2JsYW5rJyk7XG5cbiAgICAgICAgICAgIGlmIChldnQudHlwZSA9PT0gJ0lzc3Vlc0V2ZW50Jykge1xuXG4gICAgICAgICAgICAgICAgJGFcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2hyZWYnLCBldnQucGF5bG9hZC5pc3N1ZS5odG1sX3VybClcbiAgICAgICAgICAgICAgICAgICAgLmh0bWwoYDxzcGFuIGNsYXNzPVwiYm9sZGVyXCI+aXNzdWUgJHtldnQucGF5bG9hZC5pc3N1ZS5udW1iZXJ9PC9zcGFuPmApO1xuXG4gICAgICAgICAgICAgICAgJHBhcmFncmFwaFxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKGA8c3BhbiBjbGFzcz1cImJvbGRlclwiPiR7ZXZ0LmFjdG9yfTwvc3Bhbj4gJHtldnQucGF5bG9hZC5hY3Rpb259IGApXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJGEpXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoYCBvbiAke2V2dC5kYXRlfTogXCIke2V2dC5wYXlsb2FkLmlzc3VlLnRpdGxlfVwiYCk7XG5cbiAgICAgICAgICAgICAgICAkbGlzdEl0ZW1cbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkaW1nKVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCRwYXJhZ3JhcGgpO1xuXG4gICAgICAgICAgICAgICAgJGxpc3RcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkbGlzdEl0ZW0pO1xuXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2dC50eXBlID09PSAnSXNzdWVDb21tZW50RXZlbnQnKSB7XG5cbiAgICAgICAgICAgICAgICAkYVxuICAgICAgICAgICAgICAgICAgICAuYXR0cignaHJlZicsIGV2dC5wYXlsb2FkLmNvbW1lbnQuaHRtbF91cmwpXG4gICAgICAgICAgICAgICAgICAgIC5odG1sKGA8c3BhbiBjbGFzcz1cImJvbGRlclwiPmlzc3VlICR7ZXZ0LnBheWxvYWQuaXNzdWUubnVtYmVyfTwvc3Bhbj5gKTtcblxuICAgICAgICAgICAgICAgICRwYXJhZ3JhcGhcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChgPHNwYW4gY2xhc3M9XCJib2xkZXJcIj4ke2V2dC5hY3Rvcn08L3NwYW4+IGNvbW1lbnRlZCBvbiBgKVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCRhKVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKGAgb24gJHtldnQuZGF0ZX06IFwiJHtldnQucGF5bG9hZC5jb21tZW50LmJvZHl9XCJgKTtcblxuICAgICAgICAgICAgICAgICRsaXN0SXRlbVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCRpbWcpXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJHBhcmFncmFwaCk7XG5cbiAgICAgICAgICAgICAgICAkbGlzdFxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCRsaXN0SXRlbSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vICAgICAgICAgICAgLy8gQ0FOJ1QgR0VUIEdIIFRPIFNFTkQgVVMgUFJPSkVDVC1SRUxBVEVEIEVWRU5UUyAtIFdURj9cbiAgICAgICAgICAgIC8vICAgICAgICAgICAgfSBlbHNlIGlmIChldnQudHlwZSA9PT0gJ1Byb2plY3RFdmVudCcpIHtcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgJGxpc3RcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKGA8bGk+XG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCIke2V2dC5hdmF0YXJ9XCI+XG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+JHtldnQuYWN0b3J9ICR7ZXZ0LnBheWxvYWQuYWN0aW9ufSAke2V2dC5wYXlsb2FkLnByb2plY3QubmFtZX0gb24gJHtldnQuZGF0ZX08L3A+XG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgdGFyZ2V0PVwiX2JsYW5rXCIgaHJlZj1cIiR7ZXZ0LnBheWxvYWQucHJvamVjdC51cmx9XCI+XG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7ZXZ0LnBheWxvYWQucHJvamVjdC5ib2R5fVxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+YCk7XG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgfSBlbHNlIGlmIChldnQudHlwZSA9PT0gJ1Byb2plY3RDYXJkRXZlbnQnKSB7XG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICRsaXN0XG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChgPGxpPlxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiJHtldnQuYXZhdGFyfVwiPlxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPiR7ZXZ0LmFjdG9yfSAke2V2dC5wYXlsb2FkLmFjdGlvbn0gXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgdGFyZ2V0PVwiX2JsYW5rXCIgaHJlZj1cIiR7ZXZ0LnBheWxvYWQucHJvamVjdF9jYXJkLnVybH1cIj5cbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtldnQucGF5bG9hZC5wcm9qZWN0X2NhcmQubm90ZX1cbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb24gJHtldnQuZGF0ZX08L3A+XG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPmApO1xuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZ0LnR5cGUgPT09ICdQcm9qZWN0Q29sdW1uRXZlbnQnKSB7XG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICRsaXN0XG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChgPGxpPlxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiJHtldnQuYXZhdGFyfVwiPlxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPiR7ZXZ0LmFjdG9yfSAke2V2dC5wYXlsb2FkLmFjdGlvbn0gXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgdGFyZ2V0PVwiX2JsYW5rXCIgaHJlZj1cIiR7ZXZ0LnBheWxvYWQucHJvamVjdF9jb2x1bW4udXJsfVwiPlxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2V2dC5wYXlsb2FkLnByb2plY3RfY29sdW1uLm5hbWV9XG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uICR7ZXZ0LmRhdGV9PC9wPlxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5gKTtcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgfVxuXG4gICAgICAgIH0pO1xuXG4gICAgICAgICRsaXN0XG4gICAgICAgICAgICAuYWRkQ2xhc3MoJ2NvbC1saXN0Jyk7XG5cbiAgICAgICAgJGNvbHVtblxuICAgICAgICAgICAgLmFkZENsYXNzKCdjb2wtMW9mMycpXG4gICAgICAgICAgICAuYXBwZW5kKGA8aDM+JHtlcy5sZW5ndGh9IFRvZG8tUmVsYXRlZCBFdmVudHM8L2gzPmApXG4gICAgICAgICAgICAuYXBwZW5kKCRsaXN0KTtcblxuICAgICAgICBET00uJGNvbnRhaW5lci5hcHBlbmQoJGNvbHVtbik7XG5cbiAgICB9XG5cblxuICAgIC8vIHJlbmRlciBtZXJnZSBldmVudHNcbiAgICBmdW5jdGlvbiByZW5kZXJNZXJnZUV2ZW50cyhlcykge1xuXG4gICAgICAgIC8vIGdldHMgQ3JlYXRlRXZlbnQsIFB1bGxSZXF1ZXN0RXZlbnQsIFB1bGxSZXF1ZXN0UmV2aWV3RXZlbnRcbiAgICAgICAgLy8gICBhbmQgUHVsbFJlcXVlc3RSZXZpZXdDb21tZW50RXZlbnRcblxuICAgICAgICB2YXIgJGNvbHVtbiA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JykpLFxuICAgICAgICAgICAgJGxpc3QgICA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKSksXG4gICAgICAgICAgICBjbGVhblVybDtcblxuICAgICAgICBlcy5mb3JFYWNoKGZ1bmN0aW9uIChldnQpIHtcblxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZXZ0KTtcblxuICAgICAgICAgICAgdmFyICRsaXN0SXRlbSAgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJykpLFxuICAgICAgICAgICAgICAgICRpbWcgICAgICAgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpKSxcbiAgICAgICAgICAgICAgICAkcGFyYWdyYXBoID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJykpLFxuICAgICAgICAgICAgICAgICRhICAgICAgICAgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKSk7XG5cbiAgICAgICAgICAgICRpbWcuYXR0cignc3JjJywgZXZ0LmF2YXRhcik7XG5cbiAgICAgICAgICAgICRhLmF0dHIoJ3RhcmdldCcsICdfYmxhbmsnKTtcblxuICAgICAgICAgICAgaWYgKGV2dC50eXBlID09PSAnQ3JlYXRlRXZlbnQnKSB7XG5cbiAgICAgICAgICAgICAgICAkcGFyYWdyYXBoXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoW1xuICAgICAgICAgICAgICAgICAgICAgICAgYDxzcGFuIGNsYXNzPVwiYm9sZGVyXCI+JHtldnQuYWN0b3J9PC9zcGFuPmAsXG4gICAgICAgICAgICAgICAgICAgICAgICAnY3JlYXRlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBldnQucGF5bG9hZC5yZWZfdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGA8c3BhbiBjbGFzcz1cImJvbGRlclwiPiR7ZXZ0LnBheWxvYWQucmVmfTwvc3Bhbj5gLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ29uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2dC5kYXRlXG4gICAgICAgICAgICAgICAgICAgIF0uam9pbignICcpKTtcblxuICAgICAgICAgICAgICAgICRsaXN0SXRlbVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCRpbWcpXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJHBhcmFncmFwaCk7XG5cbiAgICAgICAgICAgICAgICAkbGlzdFxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCRsaXN0SXRlbSk7XG5cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZ0LnR5cGUgPT09ICdQdWxsUmVxdWVzdEV2ZW50Jykge1xuXG4gICAgICAgICAgICAgICAgLy8gZnJvbTogaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9yZXBvcy9iZWxjdXJ2L21lZXJrYXRfbW9tZW50dW0vcHVsbHMvMTFcbiAgICAgICAgICAgICAgICAvLyAgIHRvOiBodHRwczovL2dpdGh1Yi5jb20vYmVsY3Vydi9tZWVya2F0X21vbWVudHVtL3B1bGwvMTFcblxuICAgICAgICAgICAgICAgIGNsZWFuVXJsID0gKGV2dC5wYXlsb2FkLnB1bGxfcmVxdWVzdC51cmwpXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSAnYXBpLidcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcL1xcL2FwaS4vLCAnXFwvXFwvJylcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlICdyZXBvcy8nXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXC9yZXBvc1xcLy8sICdcXC8nKVxuICAgICAgICAgICAgICAgICAgICAvLyByZXBsYWNlICdwdWxscycgd2l0aCAncHVsbCdcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL3B1bGxzLywgJ3B1bGwnKTtcblxuICAgICAgICAgICAgICAgICRhXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdocmVmJywgY2xlYW5VcmwpXG4gICAgICAgICAgICAgICAgICAgIC5odG1sKGA8c3BhbiBjbGFzcz1cImJvbGRlclwiPnB1bGwgcmVxdWVzdCAke2V2dC5wYXlsb2FkLnB1bGxfcmVxdWVzdC5udW1iZXJ9PC9zcGFuPmApO1xuXG4gICAgICAgICAgICAgICAgJHBhcmFncmFwaFxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKGA8c3BhbiBjbGFzcz1cImJvbGRlclwiPiR7ZXZ0LmFjdG9yfTwvc3Bhbj5gKVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKGAgJHtldnQucGF5bG9hZC5hY3Rpb259IGApXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJGEpXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoYCBvbiAke2V2dC5kYXRlfWApO1xuXG4gICAgICAgICAgICAgICAgJGxpc3RJdGVtXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJGltZylcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkcGFyYWdyYXBoKTtcblxuICAgICAgICAgICAgICAgICRsaXN0XG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJGxpc3RJdGVtKTtcblxuICAgICAgICAgICAgfSBlbHNlIGlmIChldnQudHlwZSA9PT0gJ1B1bGxSZXF1ZXN0UmV2aWV3RXZlbnQnKSB7XG5cbiAgICAgICAgICAgICAgICAkYVxuICAgICAgICAgICAgICAgICAgICAuYXR0cignaHJlZicsIGV2dC5wYXlsb2FkLnB1bGxfcmVxdWVzdC5odG1sX3VybClcbiAgICAgICAgICAgICAgICAgICAgLnRleHQoZXZ0LnBheWxvYWQucHVsbF9yZXF1ZXN0LnRpdGxlKTtcblxuICAgICAgICAgICAgICAgICRwYXJhZ3JhcGhcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChbXG4gICAgICAgICAgICAgICAgICAgICAgICBldnQuYWN0b3IsXG4gICAgICAgICAgICAgICAgICAgICAgICBldnQucGF5bG9hZC5hY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAncmV2aWV3IG9mICdcbiAgICAgICAgICAgICAgICAgICAgXS5qb2luKCcgJykpXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJGEpXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJyBvbicgKyBldnQuZGF0ZSk7XG5cbiAgICAgICAgICAgICAgICAkbGlzdEl0ZW1cbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkaW1nKVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCRwYXJhZ3JhcGgpO1xuXG4gICAgICAgICAgICAgICAgJGxpc3RcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkbGlzdEl0ZW0pO1xuXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2dC50eXBlID09PSAnUHVsbFJlcXVlc3RSZXZpZXdDb21tZW50RXZlbnQnKSB7XG5cbiAgICAgICAgICAgICAgICAkYVxuICAgICAgICAgICAgICAgICAgICAuYXR0cignaHJlZicsIGV2dC5wYXlsb2FkLmNvbW1lbnQuaHRtbF91cmwpXG4gICAgICAgICAgICAgICAgICAgIC50ZXh0KGV2dC5wYXlsb2FkLmNvbW1lbnQuYm9keSk7XG5cbiAgICAgICAgICAgICAgICAkcGFyYWdyYXBoXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoW1xuICAgICAgICAgICAgICAgICAgICAgICAgYDxzcGFuIGNsYXNzPVwiYm9sZGVyXCI+JHtldnQuYWN0b3J9PC9zcGFuPmAsXG4gICAgICAgICAgICAgICAgICAgICAgICBldnQucGF5bG9hZC5hY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAncHVsbCByZXF1ZXN0IGNvbW1lbnQgJ1xuICAgICAgICAgICAgICAgICAgICBdLmpvaW4oJyAnKSlcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkYSlcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgnIG9uJyArIGV2dC5kYXRlKTtcblxuICAgICAgICAgICAgICAgICRsaXN0SXRlbVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCRpbWcpXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJHBhcmFncmFwaCk7XG5cbiAgICAgICAgICAgICAgICAkbGlzdFxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCRsaXN0SXRlbSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSk7XG5cbiAgICAgICAgJGxpc3RcbiAgICAgICAgICAgIC5hZGRDbGFzcygnY29sLWxpc3QnKTtcblxuICAgICAgICAkY29sdW1uXG4gICAgICAgICAgICAuYWRkQ2xhc3MoJ2NvbC0xb2YzJylcbiAgICAgICAgICAgIC5hcHBlbmQoYDxoMz4ke2VzLmxlbmd0aH0gTWVyZ2UtUmVsYXRlZCBFdmVudHM8L2gzPmApXG4gICAgICAgICAgICAuYXBwZW5kKCRsaXN0KTtcblxuICAgICAgICBET00uJGNvbnRhaW5lci5hcHBlbmQoJGNvbHVtbik7XG5cbiAgICB9XG4gICAgXG4gICAgXG4gICAgLy8gcHVibGljIGluaXQgbWV0aG9kXG4gICAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgICAgY2FjaGVEb20oKTtcbiAgICB9XG5cblxuICAgIC8vIHJldHVybiBwdWJsaWMgbWV0aG9kXG4gICAgcmV0dXJuIHtcbiAgICAgICAgaW5pdDogaW5pdCxcbiAgICAgICAgcmVuZGVyOiByZW5kZXJcbiAgICB9O1xuXG59KCkpOyJdfQ==
