"use strict";var HitApi=function(){function e(){l.$inputForm=$("#input-form")}function t(){l.$inputForm.submit(a)}function n(e){return{type:e.type,date:e.created_at,actor:e.actor.display_login,avatar:e.actor.avatar_url,payload:e.payload}}function a(e,t){var n="https://api.github.com/repos",a=n+"/"+e+"/"+t+"/events";$.getJSON(a).then(r)}function r(e){var t=["PushEvent","CommitCommentEvent"],a=["IssuesEvent","IssueCommentEvent","ProjectEvent","ProjectCardEvent","ProjectColumnEvent"],r=["CreateEvent","PullRequestEvent","PullRequestReviewEvent","PullRequestReviewCommentEvent"],o=e.filter(function(e){return t.indexOf(e.type)!==-1}).map(n),l=e.filter(function(e){return a.indexOf(e.type)!==-1}).map(n),p=e.filter(function(e){return r.indexOf(e.type)!==-1}).map(n);RenderTable.render(o,l,p),RenderChart.render(e.map(n))}function o(){e(),t()}var l={};return{init:o,getEvents:a}}(),Greet=function(e){function t(){m.$greeting=e(".greeting"),m.$overlay=e('<div id="overlay"></div>'),m.$modalPrompt=e(document.createElement("div")),m.$modalError=e(document.createElement("p")),m.$modalPrompt.attr("id","user-modal").addClass("user-modal").html(f),m.$modalError.addClass("user-modal-error").html("GitHub Username Not Found"),e("body").append(m.$modalPrompt)}function n(){e("#user-modal-form").submit(a)}function a(e){e.preventDefault(),u=e.currentTarget[0].value.trim(),s=e.currentTarget[1].value.trim(),r(s).then(function(t){t.login===s&&(LS.setData("dev-dash-user",{name:e.currentTarget[0].value,githubName:e.currentTarget[1].value}),p(),i())}).catch(function(e){m.$modalPrompt.append(m.$modalError)})}function r(t){return e.getJSON("https://api.github.com/users/"+t)}function o(){var e,t=new Date,n=t.getHours();return e=n<12?"morning":n>=12&&n<17?"afternoon":"evening","Good "+e+", "+u+"."}function l(){m.$overlay.show(),m.$modalPrompt.addClass("user-modal-show")}function p(){m.$overlay.hide(),m.$modalPrompt.removeClass("user-modal-show")}function d(){var e=LS.getData("dev-dash-user");e&&e.name?(u=e.name,s=e.githubName,i()):l()}function i(){m.$greeting.text(o()),RepoSelect.getRepos(s)}function c(){t(),m.$overlay.hide(),e("body").append(m.$overlay),n(),d()}var u,s,m={},f='<form id="user-modal-form" class="Grid Grid--gutters Grid--1of2" action="submit">\n                    <div class="Grid-cell InputAddOn">\n                      <span class="InputAddOn-item">Your Name:</span>\n                      <input id="user-modal-name" class="InputAddOn-field" type="text" required>\n                    </div>\n                    <div class="Grid-cell InputAddOn">\n                      <span class="InputAddOn-item">GitHub User Name:</span>\n                      <input id="user-modal-username"  class="InputAddOn-field" type="text" required>\n                    </div>\n                      <div class="Grid-cell InputAddOn">\n                      <button class="InputAddOn-item" id="user-modal-button">Go!</button>\n                    </div>\n                    </form>';return{init:c}}(jQuery),LS=function(){function e(e,t){r&&r.setItem(e,JSON.stringify(t))}function t(e){if(r)return JSON.parse(r.getItem(e))}function n(){if(r)return r.clear()}function a(e){if(r)return r.removeItem(e)}var r=function(){var e,t,n=(new Date).toString();try{return e=window.localStorage,e.setItem(n,n),t=e.getItem(n)===n,e.removeItem(n),t&&e}catch(e){console.log("Problemz!")}}();return{setData:e,getData:t,deleteData:a,clearData:n}}(),RenderTable=function(){function e(){p.$tableContainer=$(".table-container")}function t(e){return new Date(e).toDateString().slice(0,15).replace(/ 0/g," ")}function n(e,t,n){p.$tableContainer.empty(),e.length>0&&a(e),t.length>0&&r(t),n.length>0&&o(n)}function a(e){var n=$(document.createElement("div")),a=$(document.createElement("div")),r=$(document.createElement("ul"));e.forEach(function(e){if("PushEvent"===e.type)e.payload.commits.forEach(function(n){var a=$(document.createElement("li")),o=$(document.createElement("img")),l=$(document.createElement("p")),p=$(document.createElement("span")),d=$(document.createElement("a")),i=n.url.replace(/\/\/api./,"//").replace(/\/repos\//,"/").replace(/commits/,"commit");o.attr("src",e.avatar),d.attr("target","_blank").attr("href",i).html('<span class="bolder">'+n.sha.slice(0,6)+"</span>"),p.text('"'+n.message+'"'),l.append('<span class="bolder">'+e.actor+"</span> committed ").append(d).append(" on "+t(e.date)+": ").append(p),a.append(o).append(l),r.append(a)});else{var n=$(document.createElement("li")),a=$(document.createElement("img")),o=$(document.createElement("p")),l=$(document.createElement("span")),p=$(document.createElement("a"));a.attr("src",e.avatar),p.attr("target","_blank").attr("href",e.payload.comment.html_url).html('<span class="bolder">'+e.payload.comment.commit_id.slice(0,6)+"</span>"),l.text('"'+e.payload.comment.body+'"'),o.append('<span class="bolder">'+e.actor+"</span> commented on ").append(p).append(" on "+t(e.date)+": ").append(l),n.append(a).append(o),r.append(n)}}),r.addClass("col-list"),n.append(r),a.addClass("table-col").append("<h3>"+e.length+" Commit-Related Events</h3>").append(n),p.$tableContainer.append(a)}function r(e){var n=$(document.createElement("div")),a=$(document.createElement("ul"));e.forEach(function(e){var n=$(document.createElement("li")),r=$(document.createElement("img")),o=$(document.createElement("p")),l=$(document.createElement("a"));r.attr("src",e.avatar),l.attr("target","_blank"),"IssuesEvent"===e.type?(l.attr("href",e.payload.issue.html_url).html('<span class="bolder">issue '+e.payload.issue.number+"</span>"),o.append('<span class="bolder">'+e.actor+"</span> "+e.payload.action+" ").append(l).append(" on "+t(e.date)+': "'+e.payload.issue.title+'"'),n.append(r).append(o),a.append(n)):"IssueCommentEvent"===e.type&&(l.attr("href",e.payload.comment.html_url).html('<span class="bolder">issue '+e.payload.issue.number+"</span>"),o.append('<span class="bolder">'+e.actor+"</span> commented on ").append(l).append(" on "+t(e.date)+': "'+e.payload.comment.body+'"'),n.append(r).append(o),a.append(n))}),a.addClass("col-list"),n.addClass("table-col").append("<h3>"+e.length+" Todo-Related Events</h3>").append(a),p.$tableContainer.append(n)}function o(e){var n,a=$(document.createElement("div")),r=$(document.createElement("ul"));e.forEach(function(e){var a=$(document.createElement("li")),o=$(document.createElement("img")),l=$(document.createElement("p")),p=$(document.createElement("a"));o.attr("src",e.avatar),p.attr("target","_blank"),"CreateEvent"===e.type?(l.append(['<span class="bolder">'+e.actor+"</span>","created",e.payload.ref_type,'<span class="bolder">'+e.payload.ref+"</span>","on",t(e.date)].join(" ")),a.append(o).append(l),r.append(a)):"PullRequestEvent"===e.type?(n=e.payload.pull_request.url.replace(/\/\/api./,"//").replace(/\/repos\//,"/").replace(/pulls/,"pull"),p.attr("href",n).html('<span class="bolder">pull request '+e.payload.pull_request.number+"</span>"),l.append('<span class="bolder">'+e.actor+"</span>").append(" "+e.payload.action+" ").append(p).append(" on "+t(e.date)),a.append(o).append(l),r.append(a)):"PullRequestReviewEvent"===e.type?(p.attr("href",e.payload.pull_request.html_url).text(e.payload.pull_request.title),l.append([e.actor,e.payload.action,"review of "].join(" ")).append(p).append(" on"+t(e.date)),a.append(o).append(l),r.append(a)):"PullRequestReviewCommentEvent"===e.type&&(p.attr("href",e.payload.comment.html_url).text(e.payload.comment.body),l.append(['<span class="bolder">'+e.actor+"</span>",e.payload.action,"pull request comment "].join(" ")).append(p).append(" on"+t(e.date)),a.append(o).append(l),r.append(a))}),r.addClass("col-list"),a.addClass("table-col").append("<h3>"+e.length+" Merge-Related Events</h3>").append(r),p.$tableContainer.append(a)}function l(){e()}var p={};return{init:l,render:n}}(),RenderChart=function(){function e(){u.$container=$(".chart-container"),u.$svgElem=$(document.createElementNS(s,"svg"))}function t(e){return new Date(e).toDateString().slice(0,15).replace(/ 0/g," ")}function n(e){for(var n=e.map(function(e){return t(e.date)}),a=new Date(n[0]),r=new Date(n[n.length-1]),o=[],l=a;l<=r;)o.push(t(l)),l=l.addDays(1);return o}function a(e){var t,n;return t=e.reduce(function(e,t){return Math.max(e,t[1])},e[0][1]),n=Math.floor(t/4),4*(n+1)}function r(e){var a,r,o=[],l=[];return e.forEach(function(e){"PushEvent"===e.type?e.payload.commits.forEach(function(t){o.push({actor:e.actor,avatar:e.avatar,date:e.date,payload:t,type:"Commit"})}):o.push(e)}),a=o.sort(function(e,t){return new Date(e.date)-new Date(t.date)}),r=n(a),l=r.map(function(e){return[e.slice(3,10),a.filter(function(n){return t(n.date)===e}).length]})}function o(e){return 1===e.length}function l(e){var t=$(document.createElementNS(s,"g")),n=e.length-1,r=a(e),o=(m-v-g)/n,l=(f-h-g)/r,p=e.map(function(e,t){return[t*o+v,f-e[1]*l-h]});return p.forEach(function(n,a){var r=$(document.createElementNS(s,"circle")),o=$(document.createElementNS(s,"title")),l=n[0],p=n[1],d=4;r.attr("cx",l).attr("cy",p).attr("r",d),o.text(e[a][0]+" ("+e[a][1]+" events)"),r.append(o),t.addClass("chart-circle").append(r)}),t}function p(e){var t,n,r=$(document.createElementNS(s,"g")),o=e.length-1,l=a(e),p=(m-v-g)/o,d=(f-h-g)/l,i=e.map(function(e,t){return[t*p+v,f-e[1]*d-h]});for(t=0;t<i.length-1;t+=1)n=$(document.createElementNS(s,"line")),n.attr("x1",i[t][0]).attr("y1",i[t][1]).attr("x2",i[t+1][0]).attr("y2",i[t+1][1]),r.addClass("chart-line").append(n);return r}function d(e,t){var n,r,o,l,p,d,i,c,u,E,y,b=$(document.createElementNS(s,"g")),C=a(e);if(E=e.reduce(function(e,t){return Math.max(e,t[1])},e[0][1]),"y"===t){for(b.addClass("labels y-labels"),o=C>12?C/4:C,u=(f-h-g)/o,y=0;y<o+1;y+=1)c=y*C/o,i=f-h-u*y,n=$(document.createElementNS(s,"line")),n.addClass("horiz-rule").attr("x1",v).attr("y1",i).attr("x2",m-g+5).attr("y2",i),r=$(document.createElementNS(s,"text")),r.attr("x",v-20).attr("y",i+4).html(c),b.append(n).append(r);return b}if("x"===t||!t||null===t){for(b.addClass("labels x-labels"),o=e.length-1,d=(m-v-g)/o,y=0;y<e.length;y+=1)e.length>20?y%10===0&&(p=e[y][0],l=y*d,r=$(document.createElementNS(s,"text")),r.attr("x",l+v).attr("y",f-5).text(p),b.append(r)):(p=e[y][0],l=y*d,r=$(document.createElementNS(s,"text")),r.attr("x",l+v).attr("y",f-5).text(p),b.append(r));return b}}function i(e){var t;if(u.$svgElem.empty(),u.$svgElem.addClass("chart--content").attr("id","svg").attr("xmlns",s).attr("height","100%").attr("viewBox","0 0 "+m+" "+f).attr("xml:space","preserve"),e.length>0){if(t=r(e),o(t))return;u.$svgElem.append(d(t,"y")).append(d(t,"x")),u.$svgElem.append(p(t)),u.$svgElem.append(l(t)),u.$container.append(u.$svgElem)}}function c(){e()}var u={},s="http://www.w3.org/2000/svg",m=1e3,f=400,v=80,h=40,g=40;return Date.prototype.addDays=function(e){var t=new Date(this.valueOf());return t.setDate(t.getDate()+e),t},{init:c,render:i}}(),RepoSelect=function(e){function t(){f.$selectContainer=e(".repo-select"),f.$p=e(document.createElement("p")),f.$listContainer=e(document.createElement("div")),f.$ul=e(document.createElement("ul")),f.$newRepoForm=e(document.createElement("form")),f.$newRepoUser=e(document.createElement("input")),f.$newRepoRepo=e(document.createElement("input")),f.$newRepoBtn=e(document.createElement("button"))}function n(){f.$selectContainer.on("click",".repo-select-highlight",a),f.$ul.on("click","div.li-descriptions",r),f.$ul.on("click","span.li-remove",o),f.$newRepoForm.on("submit",l)}function a(e){e.stopPropagation(),f.$listContainer.toggleClass("hidden")}function r(e){e.stopPropagation();var t=e.currentTarget.children[0].innerHTML.split(" / ");m=t[1],i(v),HitApi.getEvents(t[0],t[1]),f.$listContainer.addClass("hidden")}function o(t){t.stopPropagation();var n=(t.target.previousElementSibling.dataset.repo,e(t.target).parent()),a=n.attr("id");v.splice(a,1),n.remove(),LS.setData("dev-dash-repos",v)}function l(t){t.preventDefault(),t.stopPropagation();var n="https://api.github.com/repos",a=t.currentTarget[0].value,r=t.currentTarget[1].value;e.getJSON(n+"/"+a+"/"+r).then(function(e){return v.unshift(e),f.$newRepoUser[0].value="",f.$newRepoRepo[0].value="",v}).then(d).then(i).catch(function(e){console.warn("Error fetching repo.")})}function p(e){if(e&&e.length){e.forEach(function(e){v.push(e)});var t=v[0].full_name.split("/");return m=t[1],HitApi.getEvents(t[0],t[1]),e}}function d(e){return LS.setData("dev-dash-repos",v),e}function i(t){t&&t.length?(f.$ul.html(""),t.forEach(function(t,n){var a=e(document.createElement("li"));a.attr("id",n).html('<div class="li-descriptions" data-repo="'+t.name+'">\n                             <p>'+t.owner.login+" / "+t.name+"</p>\n                             <p>"+t.description+'</p>\n                           </div>\n                           <span class="li-remove">&#10060</span>'),f.$ul.append(a)}),c()):(console.log("no repos, holmes"),c(),f.$listContainer.removeClass("hidden"))}function c(){f.$newRepoBtn.html("+"),f.$newRepoUser.attr("required","true").attr("placeholder","author"),f.$newRepoRepo.attr("required","true").attr("placeholder","repo"),f.$newRepoForm.addClass("new-repo-form").append(f.$newRepoUser).append(f.$newRepoRepo).append(f.$newRepoBtn),f.$listContainer.addClass("repo-list").append(f.$ul).append(f.$newRepoForm),f.$p.html('You are currently viewing the <span class="repo-select-highlight">'+m+"&#x25BC;</span> repository."),f.$selectContainer.append(f.$p).append(f.$listContainer)}function u(t){h?(p(LS.getData("dev-dash-repos")),i(v)):e.getJSON("https://api.github.com/users/"+t+"/repos?sort=updated").then(function(e){return e.slice(0,3)}).then(p).then(d).then(i)}function s(){t(),n(),f.$listContainer.addClass("hidden")}var m,f={},v=[],h=function(){return!!LS.getData("dev-dash-repos")}();return{init:s,getRepos:u}}(jQuery),Backgrounds=function(){function e(){l.$body=$("body")}function t(){return(new Date).toDateString().slice(4,15)}function n(){var e=LS.getData("dev-dash-bg"),n=Math.floor(Math.random()*p.length),a={imgName:p[n],date:t()};return e?e:a}function a(){var e,t,n=p.indexOf(i.imgName);new Date(d)>new Date(i.date)?(e=7===n?0:n+1,t=p[e],LS.setData("dev-dash-bg",{imgName:t,date:d}),r(t)):(r(i.imgName),LS.setData("dev-dash-bg",{imgName:i.imgName,date:d}))}function r(e){l.$body.css("background-image","url(dist/assets/"+e+".jpg)")}function o(){e(),a()}var l={},p=["001","002","003","004","005","006","007","008"],d=t(),i=n();return{init:o}}();$(document).ready(function(){Backgrounds.init(),RepoSelect.init(),Greet.init(),HitApi.init(),RenderTable.init(),RenderChart.init()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdldC1ldmVudHMuanMiLCJncmVldC5qcyIsImxvY2FsX3N0b3JhZ2UuanMiLCJyZW5kZXItdGFibGUuanMiLCJyZW5kZXItY2hhcnQuanMiLCJyZXBvLXNlbGVjdC5qcyIsImJhY2tncm91bmRzLmpzIiwiYXBwLmpzIl0sIm5hbWVzIjpbIkhpdEFwaSIsImNhY2hlRG9tIiwiRE9NIiwiJGlucHV0Rm9ybSIsIiQiLCJiaW5kRXZlbnRzIiwic3VibWl0IiwiZ2V0RXZlbnRzIiwicHJlcGFyZUV2ZW50cyIsImUiLCJ0eXBlIiwiZGF0ZSIsImNyZWF0ZWRfYXQiLCJhY3RvciIsImRpc3BsYXlfbG9naW4iLCJhdmF0YXIiLCJhdmF0YXJfdXJsIiwicGF5bG9hZCIsImF1dGhvciIsInJlcG8iLCJ1cmwiLCJyZXBvRXZlbnRzIiwiZ2V0SlNPTiIsInRoZW4iLCJoYW5kbGVSZXNwb25zZSIsInJlc3BvbnNlIiwiY29tbWl0VHlwZXMiLCJ0b2RvVHlwZXMiLCJtZXJnZVR5cGVzIiwiY29tbWl0RXZlbnRzIiwiZmlsdGVyIiwiaW5kZXhPZiIsIm1hcCIsInRvZG9FdmVudHMiLCJtZXJnZUV2ZW50cyIsIlJlbmRlclRhYmxlIiwicmVuZGVyIiwiUmVuZGVyQ2hhcnQiLCJpbml0IiwiR3JlZXQiLCIkZ3JlZXRpbmciLCIkb3ZlcmxheSIsIiRtb2RhbFByb21wdCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsIiRtb2RhbEVycm9yIiwiYXR0ciIsImFkZENsYXNzIiwiaHRtbCIsIm1vZGFsRm9ybSIsImFwcGVuZCIsImhhbmRsZVN1Ym1pdCIsInByZXZlbnREZWZhdWx0IiwibmFtZSIsImN1cnJlbnRUYXJnZXQiLCJ2YWx1ZSIsInRyaW0iLCJnaXRodWJOYW1lIiwiY2hlY2tVc2VyIiwicmVzIiwibG9naW4iLCJMUyIsInNldERhdGEiLCJoaWRlTW9kYWwiLCJkaXNwbGF5TWVzc2FnZSIsImNhdGNoIiwiZXJyIiwidSIsIm1ha2VNZXNzYWdlIiwidGltZU9mRGF5IiwidGVoRGF0ZSIsIkRhdGUiLCJpbml0aWFsSG91ciIsImdldEhvdXJzIiwic2hvd01vZGFsIiwic2hvdyIsImhpZGUiLCJyZW1vdmVDbGFzcyIsImNoZWNrU3RvcmFnZSIsInN0b3JhZ2UiLCJnZXREYXRhIiwidGV4dCIsIlJlcG9TZWxlY3QiLCJnZXRSZXBvcyIsImpRdWVyeSIsImxvYyIsInZhbCIsInNldEl0ZW0iLCJKU09OIiwic3RyaW5naWZ5IiwicGFyc2UiLCJnZXRJdGVtIiwiY2xlYXJEYXRhIiwiY2xlYXIiLCJkZWxldGVEYXRhIiwicmVtb3ZlSXRlbSIsInJlc3VsdCIsInVpZCIsInRvU3RyaW5nIiwid2luZG93IiwibG9jYWxTdG9yYWdlIiwiZXhjZXB0aW9uIiwiY29uc29sZSIsImxvZyIsIiR0YWJsZUNvbnRhaW5lciIsImZvcm1hdERhdGUiLCJ0b0RhdGVTdHJpbmciLCJzbGljZSIsInJlcGxhY2UiLCJlbXB0eSIsImxlbmd0aCIsInJlbmRlckNvbW1pdEV2ZW50cyIsInJlbmRlclRvZG9FdmVudHMiLCJyZW5kZXJNZXJnZUV2ZW50cyIsImVzIiwiJGxpc3RDb250YWluZXIiLCIkY29sdW1uIiwiJGxpc3QiLCJmb3JFYWNoIiwiZXZ0IiwiY29tbWl0cyIsImNvbW1pdCIsIiRsaXN0SXRlbSIsIiRpbWciLCIkcGFyYWdyYXBoIiwiJHBhcmFTcGFuIiwiJGEiLCJjbGVhblVybCIsInNoYSIsIm1lc3NhZ2UiLCJjb21tZW50IiwiaHRtbF91cmwiLCJjb21taXRfaWQiLCJib2R5IiwiaXNzdWUiLCJudW1iZXIiLCJhY3Rpb24iLCJ0aXRsZSIsInJlZl90eXBlIiwicmVmIiwiam9pbiIsInB1bGxfcmVxdWVzdCIsIiRjb250YWluZXIiLCIkc3ZnRWxlbSIsImNyZWF0ZUVsZW1lbnROUyIsIm5zIiwiZm9ybWF0RGF0ZXMiLCJidWlsZERhdGVSYW5nZSIsImV2ZW50cyIsIm5vcm1EYXRlcyIsInN0YXJ0RGF0ZSIsInN0b3BEYXRlIiwiZGF0ZUFycmF5IiwiY3VycmVudERhdGUiLCJwdXNoIiwiYWRkRGF5cyIsImdldENoYXJ0WU1heCIsInBvaW50cyIsIm1heE51bUV2dHMiLCJxdW90aWVudCIsInJlZHVjZSIsImEiLCJiIiwiTWF0aCIsIm1heCIsImZsb29yIiwicHJlcGFyZURhdGVFdmVudHMiLCJzb3J0ZWRFdmVudHMiLCJjaGFydERhdGEiLCJzb3J0IiwieCIsInNhbWVEYW1uRGF5IiwicG9pbnRzQXJyIiwiZ2VuZXJhdGVDaXJjbGVzIiwiZ3JvdXAiLCJudW1Qb2ludHMiLCJjaGFydFlNYXgiLCJ4TXVsdGlwbGUiLCJ3aWR0aCIsInhNYXJnaW4iLCJzcGFjZXIiLCJ5TXVsdGlwbGUiLCJoZWlnaHQiLCJ5TWFyZ2luIiwiZm9ybWF0dGVkUG9pbnRzIiwicG9pbnQiLCJpbmQiLCJjaXJjbGUiLCJjeCIsImN5IiwiciIsImdlbmVyYXRlTGluZXMiLCJpIiwibGluZSIsImdlbkF4aXNMYWJlbHMiLCJheGlzIiwibnVtQXhpc1RpY2tzIiwieFBvcyIsInhWYWx1ZSIsInlQb3MiLCJ5VmFsdWUiLCJ5U3BhY2luZyIsIm1heFl2YWwiLCJwcm90b3R5cGUiLCJkYXlzIiwiZGF0IiwidGhpcyIsInZhbHVlT2YiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsIiRzZWxlY3RDb250YWluZXIiLCIkcCIsIiR1bCIsIiRuZXdSZXBvRm9ybSIsIiRuZXdSZXBvVXNlciIsIiRuZXdSZXBvUmVwbyIsIiRuZXdSZXBvQnRuIiwib24iLCJzaG93UmVwb0xpc3QiLCJzZWxlY3RSZXBvIiwiZGVsZXRlUmVwbyIsImFkZFJlcG8iLCJzdG9wUHJvcGFnYXRpb24iLCJ0b2dnbGVDbGFzcyIsInBpY2tlZCIsImNoaWxkcmVuIiwiaW5uZXJIVE1MIiwic3BsaXQiLCJzZWxlY3RlZFJlcG8iLCJwb3B1bGF0ZU1lbnUiLCJyZXBvcyIsInNlbGVjdGVkRWxlbWVudCIsInRhcmdldCIsInByZXZpb3VzRWxlbWVudFNpYmxpbmciLCJkYXRhc2V0IiwicGFyZW50Iiwic2VsZWN0ZWRFbGVtSWQiLCJzcGxpY2UiLCJyZW1vdmUiLCJhcGlVcmwiLCJuZXdBdXRob3IiLCJuZXdSZXBvIiwidW5zaGlmdCIsInNhdmVSZXBvcyIsIndhcm4iLCJwb3B1bGF0ZVJlcG9zIiwiZGF0YSIsInJlcG9aZXJvIiwiZnVsbF9uYW1lIiwiJGxpIiwib3duZXIiLCJkZXNjcmlwdGlvbiIsInVzZXJOYW1lIiwiQmFja2dyb3VuZHMiLCIkYm9keSIsIm1ha2VEYXRlIiwibG9hZFN0YXRlIiwic3RvcmVkU3RhdGUiLCJpbWdJbmR4IiwicmFuZG9tIiwiYmdBcnIiLCJuZXdTdGF0ZSIsImltZ05hbWUiLCJwaWNrQmFja2dyb3VuZCIsIm5ld0ltZ0luZGV4IiwibmV3SW1nTmFtZSIsImN1cm50SW1nSW5keCIsInN0YXRlIiwidG9kYXkiLCJpbWFnZU5hbWUiLCJjc3MiLCJyZWFkeSJdLCJtYXBwaW5ncyI6IllBR0EsSUFBQUEsUUFBQSxXQU1BLFFBQUFDLEtBQ0FDLEVBQUFDLFdBQUFDLEVBQUEsZUFLQSxRQUFBQyxLQUNBSCxFQUFBQyxXQUFBRyxPQUFBQyxHQUtBLFFBQUFDLEdBQUFDLEdBQ0EsT0FDQUMsS0FBQUQsRUFBQUMsS0FDQUMsS0FBQUYsRUFBQUcsV0FDQUMsTUFBQUosRUFBQUksTUFBQUMsY0FDQUMsT0FBQU4sRUFBQUksTUFBQUcsV0FDQUMsUUFBQVIsRUFBQVEsU0FzQkEsUUFBQVYsR0FBQVcsRUFBQUMsR0FFQSxHQUFBQyxHQUFBLCtCQUNBQyxFQUFBRCxFQUFBLElBQUFGLEVBQUEsSUFBQUMsRUFBQSxTQUVBZixHQUFBa0IsUUFBQUQsR0FBQUUsS0FBQUMsR0FLQSxRQUFBQSxHQUFBQyxHQUdBLEdBQUFDLElBQUEsWUFDQSxzQkFHQUMsR0FBQSxjQUNBLG9CQUNBLGVBQ0EsbUJBQ0Esc0JBR0FDLEdBQUEsY0FDQSxtQkFDQSx5QkFDQSxpQ0FJQUMsRUFBQUosRUFDQUssT0FBQSxTQUFBckIsR0FBQSxNQUFBaUIsR0FBQUssUUFBQXRCLEVBQUFDLFNBQUEsSUFDQXNCLElBQUF4QixHQUdBeUIsRUFBQVIsRUFDQUssT0FBQSxTQUFBckIsR0FBQSxN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TSxFQUFBaFEsT0FHQTZQLEVBQUEsSUFBQUUsRUFBQSxFQUFBQSxFQUFBLEVBR0FELEVBQUFMLEVBQUFJLEdBR0EzTSxHQUFBQyxRQUFBLGVBQ0F3TSxRQUFBRyxFQUNBOVAsS0FBQWlRLElBSUF4TyxFQUFBcU8sS0FHQXJPLEVBQUF1TyxFQUFBTCxTQUVBek0sR0FBQUMsUUFBQSxlQUNBd00sUUFBQUssRUFBQUwsUUFDQTNQLEtBQUFpUSxLQVFBLFFBQUF4TyxHQUFBeU8sR0FDQTNRLEVBQUE0UCxNQUNBZ0IsSUFBQSxtQkFBQSxtQkFBQUQsRUFBQSxTQUtBLFFBQUF2TyxLQUNBckMsSUFDQXNRLElBdkZBLEdBQUFyUSxNQUNBa1EsR0FBQSxNQUFBLE1BQUEsTUFBQSxNQUFBLE1BQUEsTUFBQSxNQUFBLE9BQ0FRLEVBQUFiLElBQ0FZLEVBQUFYLEdBeUZBLFFBQ0ExTixLQUFBQSxLQy9GQWxDLEdBQUF1QyxVQUFBb08sTUFBQSxXQUVBbEIsWUFBQXZOLE9BRUE0QyxXQUFBNUMsT0FFQUMsTUFBQUQsT0FFQXRDLE9BQUFzQyxPQUVBSCxZQUFBRyxPQUVBRCxZQUFBQyIsImZpbGUiOiJkZXYtZGFzaC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGpzaGludCBlc3ZlcnNpb246NiAqL1xuLyogZ2xvYmFscyAkLCBkb2N1bWVudCwgY29uc29sZSwgUmVuZGVyVGFibGUsIFJlbmRlckNoYXJ0ICovXG5cbnZhciBIaXRBcGkgPSAoZnVuY3Rpb24gKCkge1xuXG4gICAgdmFyIERPTSA9IHt9O1xuICAgIFxuICAgIFxuICAgIC8vIGNhY2hlIERPTSBlbGVtZW50c1xuICAgIGZ1bmN0aW9uIGNhY2hlRG9tKCkge1xuICAgICAgICBET00uJGlucHV0Rm9ybSA9ICQoJyNpbnB1dC1mb3JtJyk7XG4gICAgfVxuICAgIFxuXG4gICAgLy8gYmluZCBldmVudHNcbiAgICBmdW5jdGlvbiBiaW5kRXZlbnRzKCkge1xuICAgICAgICBET00uJGlucHV0Rm9ybS5zdWJtaXQoZ2V0RXZlbnRzKTtcbiAgICB9XG5cblxuICAgIC8vIHByZXBhcmUgZXZlbnRzIHByaW9yIHRvIGNhbGxpbmcgcmVuZGVyZXJzXG4gICAgZnVuY3Rpb24gcHJlcGFyZUV2ZW50cyhlKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlICAgIDogZS50eXBlLFxuICAgICAgICAgICAgZGF0ZSAgICA6IGUuY3JlYXRlZF9hdCxcbiAgICAgICAgICAgIGFjdG9yICAgOiBlLmFjdG9yLmRpc3BsYXlfbG9naW4sXG4gICAgICAgICAgICBhdmF0YXIgIDogZS5hY3Rvci5hdmF0YXJfdXJsLFxuICAgICAgICAgICAgcGF5bG9hZCA6IGUucGF5bG9hZFxuICAgICAgICB9O1xuICAgIH1cblxuLy8gT0xEIGdldEV2ZW50cyB1c2VkIHdpdGggdGhlIG9sZCA8aW5wdXQ+IGVsZW1lbnRzICAgIFxuLy8gICAgLy8gZ2V0IGdpdGh1YiBldmVudHNcbi8vICAgIGZ1bmN0aW9uIGdldEV2ZW50cyhlKSB7XG4vLyAgICAgICAgXG4vLyAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuLy9cbi8vICAgICAgICB2YXIgYXBpID0ge1xuLy8gICAgICAgICAgICB1cmwgICA6ICdodHRwczovL2FwaS5naXRodWIuY29tL3JlcG9zJyxcbi8vICAgICAgICAgICAgdXNlciAgOiBlLmN1cnJlbnRUYXJnZXRbMF0udmFsdWUsXG4vLyAgICAgICAgICAgIHJlcG8gIDogZS5jdXJyZW50VGFyZ2V0WzFdLnZhbHVlLFxuLy8gICAgICAgICAgICByb3V0ZSA6ICdldmVudHMnXG4vLyAgICAgICAgfTtcbi8vICAgICAgICB2YXIgcmVwb0V2ZW50cyA9IGAke2FwaS51cmx9LyR7YXBpLnVzZXJ9LyR7YXBpLnJlcG99LyR7YXBpLnJvdXRlfWA7XG4vL1xuLy8gICAgICAgICQuZ2V0SlNPTihyZXBvRXZlbnRzKS50aGVuKGhhbmRsZVJlc3BvbnNlKTtcbi8vICAgIH1cbiAgICBcbiAgICAvLyBnZXQgZ2l0aHViIGV2ZW50c1xuICAgIGZ1bmN0aW9uIGdldEV2ZW50cyhhdXRob3IsIHJlcG8pIHtcbiAgICAgICAgXG4gICAgICAgIHZhciB1cmw9ICdodHRwczovL2FwaS5naXRodWIuY29tL3JlcG9zJyxcbiAgICAgICAgICAgIHJlcG9FdmVudHMgPSBgJHt1cmx9LyR7YXV0aG9yfS8ke3JlcG99L2V2ZW50c2A7XG5cbiAgICAgICAgJC5nZXRKU09OKHJlcG9FdmVudHMpLnRoZW4oaGFuZGxlUmVzcG9uc2UpO1xuICAgIH1cblxuXG4gICAgLy8gaGFuZGxlIEdIIEpTT04gcmVzcG9uc2UgZGF0YVxuICAgIGZ1bmN0aW9uIGhhbmRsZVJlc3BvbnNlKHJlc3BvbnNlKSB7XG4gICAgICAgIFxuICAgICAgICAvLyB3ZSdyZSBzcGxpdHRpbmcgZXZlbnRzIGludG8gMyBjYXRlZ29yaWVzLCBiYXNlZCBvbiBldmVudCB0eXBlXG4gICAgICAgIHZhciBjb21taXRUeXBlcyA9IFsnUHVzaEV2ZW50JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICdDb21taXRDb21tZW50RXZlbnQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRvZG9UeXBlcyA9IFsnSXNzdWVzRXZlbnQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICdJc3N1ZUNvbW1lbnRFdmVudCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgJ1Byb2plY3RFdmVudCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgJ1Byb2plY3RDYXJkRXZlbnQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICdQcm9qZWN0Q29sdW1uRXZlbnQnXG4gICAgICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBtZXJnZVR5cGVzID0gWydDcmVhdGVFdmVudCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICdQdWxsUmVxdWVzdEV2ZW50JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJ1B1bGxSZXF1ZXN0UmV2aWV3RXZlbnQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAnUHVsbFJlcXVlc3RSZXZpZXdDb21tZW50RXZlbnQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gY3JlYXRlIGFycmF5IG9mIGNvbW1pdC1yZWxhdGVkIGV2ZW50c1xuICAgICAgICAgICAgY29tbWl0RXZlbnRzID0gcmVzcG9uc2VcbiAgICAgICAgICAgICAgICAuZmlsdGVyKChlKSA9PiBjb21taXRUeXBlcy5pbmRleE9mKGUudHlwZSkgIT09IC0xKVxuICAgICAgICAgICAgICAgIC5tYXAocHJlcGFyZUV2ZW50cyksXG5cbiAgICAgICAgICAgIC8vIGNyZWF0ZSBhcnJheSBvZiB0b2RvLXJlbGF0ZWQgZXZlbnRzXG4gICAgICAgICAgICB0b2RvRXZlbnRzID0gcmVzcG9uc2VcbiAgICAgICAgICAgICAgICAuZmlsdGVyKChlKSA9PiB0b2RvVHlwZXMuaW5kZXhPZihlLnR5cGUpICE9PSAtMSlcbiAgICAgICAgICAgICAgICAubWFwKHByZXBhcmVFdmVudHMpLFxuXG4gICAgICAgICAgICAvLyBjcmVhdGUgYnVpbGQgYXJyYXkgb2YgbWVyZ2UtcmVsYXRlZCBldmVudHNcbiAgICAgICAgICAgIG1lcmdlRXZlbnRzID0gcmVzcG9uc2VcbiAgICAgICAgICAgICAgICAuZmlsdGVyKChlKSA9PiBtZXJnZVR5cGVzLmluZGV4T2YoZS50eXBlKSAhPT0gLTEpXG4gICAgICAgICAgICAgICAgLm1hcChwcmVwYXJlRXZlbnRzKTtcbiAgICAgICAgXG4vLyAgICAgICAgY29uc29sZS5sb2coJ0NvbW1pdCB0eXBlczogJyArIGNvbW1pdEV2ZW50cy5sZW5ndGgpO1xuLy8gICAgICAgIGNvbnNvbGUubG9nKCcgIFRvZG8gdHlwZXM6ICcgKyB0b2RvRXZlbnRzLmxlbmd0aCk7XG4vLyAgICAgICAgY29uc29sZS5sb2coJyBNZXJnZSB0eXBlczogJyArIG1lcmdlRXZlbnRzLmxlbmd0aCk7XG4gICAgICAgIFxuICAgICAgICAvLyBjYWxsIHJlbmRlcmVyc1xuICAgICAgICBSZW5kZXJUYWJsZS5yZW5kZXIoY29tbWl0RXZlbnRzLCB0b2RvRXZlbnRzLCBtZXJnZUV2ZW50cyk7XG4gICAgICAgIFJlbmRlckNoYXJ0LnJlbmRlcihyZXNwb25zZS5tYXAocHJlcGFyZUV2ZW50cykpO1xuICAgIH1cbiAgICBcbiAgICBcbiAgICAvLyBwdWJsaWMgaW5pdCBtZXRob2RcbiAgICBmdW5jdGlvbiBpbml0KCkge1xuICAgICAgICBjYWNoZURvbSgpO1xuICAgICAgICBiaW5kRXZlbnRzKCk7XG4gICAgfVxuICAgIFxuICAgIFxuICAgIC8vIHJldHVybiBwdWJsaWMgbWV0aG9kXG4gICAgcmV0dXJuIHtcbiAgICAgICAgaW5pdDogaW5pdCxcbiAgICAgICAgZ2V0RXZlbnRzOiBnZXRFdmVudHNcbiAgICB9O1xuXG59KCkpO1xuIiwiLyoganNoaW50IGVzdmVyc2lvbjo2ICovXG4vKiBnbG9iYWxzIGpRdWVyeSwgZG9jdW1lbnQsIGNvbnNvbGUsIExTLCBSZXBvU2VsZWN0ICovXG5cbnZhciBHcmVldCA9IChmdW5jdGlvbigkKSB7XG4gICAgXG4gICAgdmFyIG5hbWUsXG4gICAgICAgIGdpdGh1Yk5hbWUsXG4gICAgICAgIERPTSA9IHt9LFxuICAgICAgICBcbiAgICAgICAgLy8gbW9kYWwgcHJvbXB0IHRlbXBsYXRlXG4gICAgICAgIG1vZGFsRm9ybSA9IGA8Zm9ybSBpZD1cInVzZXItbW9kYWwtZm9ybVwiIGNsYXNzPVwiR3JpZCBHcmlkLS1ndXR0ZXJzIEdyaWQtLTFvZjJcIiBhY3Rpb249XCJzdWJtaXRcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIkdyaWQtY2VsbCBJbnB1dEFkZE9uXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJJbnB1dEFkZE9uLWl0ZW1cIj5Zb3VyIE5hbWU6PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBpZD1cInVzZXItbW9kYWwtbmFtZVwiIGNsYXNzPVwiSW5wdXRBZGRPbi1maWVsZFwiIHR5cGU9XCJ0ZXh0XCIgcmVxdWlyZWQ+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiR3JpZC1jZWxsIElucHV0QWRkT25cIj5cbiAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIklucHV0QWRkT24taXRlbVwiPkdpdEh1YiBVc2VyIE5hbWU6PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBpZD1cInVzZXItbW9kYWwtdXNlcm5hbWVcIiAgY2xhc3M9XCJJbnB1dEFkZE9uLWZpZWxkXCIgdHlwZT1cInRleHRcIiByZXF1aXJlZD5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIkdyaWQtY2VsbCBJbnB1dEFkZE9uXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cIklucHV0QWRkT24taXRlbVwiIGlkPVwidXNlci1tb2RhbC1idXR0b25cIj5HbyE8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZm9ybT5gO1xuICAgIFxuICAgIFxuICAgIC8vIGNhY2hlIERPTSBlbGVtZW50c1xuICAgIGZ1bmN0aW9uIGNhY2hlRG9tKCkge1xuICAgICAgICBET00uJGdyZWV0aW5nICAgID0gJCgnLmdyZWV0aW5nJyk7XG4gICAgICAgIERPTS4kb3ZlcmxheSAgICAgPSAkKCc8ZGl2IGlkPVwib3ZlcmxheVwiPjwvZGl2PicpO1xuICAgICAgICBET00uJG1vZGFsUHJvbXB0ID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSk7XG4gICAgICAgIERPTS4kbW9kYWxFcnJvciAgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKSk7XG5cbiAgICAgICAgRE9NLiRtb2RhbFByb21wdFxuICAgICAgICAgICAgLmF0dHIoJ2lkJywgJ3VzZXItbW9kYWwnKVxuICAgICAgICAgICAgLmFkZENsYXNzKCd1c2VyLW1vZGFsJylcbiAgICAgICAgICAgIC5odG1sKG1vZGFsRm9ybSk7XG4gICAgICAgIFxuICAgICAgICBET00uJG1vZGFsRXJyb3JcbiAgICAgICAgICAgIC5hZGRDbGFzcygndXNlci1tb2RhbC1lcnJvcicpXG4gICAgICAgICAgICAuaHRtbCgnR2l0SHViIFVzZXJuYW1lIE5vdCBGb3VuZCcpO1xuICAgICAgICBcbiAgICAgICAgJCgnYm9keScpXG4gICAgICAgICAgICAuYXBwZW5kKERPTS4kbW9kYWxQcm9tcHQpO1xuICAgIH1cbiAgICBcbiAgICBcbiAgICAvLyBiaW5kIGV2ZW50c1xuICAgIGZ1bmN0aW9uIGJpbmRFdmVudHMoKSB7XG4gICAgICAgICQoJyN1c2VyLW1vZGFsLWZvcm0nKS5zdWJtaXQoaGFuZGxlU3VibWl0KTtcbiAgICB9XG4gICAgXG4gICAgXG4gICAgLy8gaGFuZGxlIG1vZGFsIHN1Ym1pdFxuICAgIGZ1bmN0aW9uIGhhbmRsZVN1Ym1pdChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIHNldCBtb2R1bGUgc2NvcGUgbmFtZXMgdG8gaW5wdXQgbmFtZXNcbiAgICAgICAgbmFtZSA9IGUuY3VycmVudFRhcmdldFswXS52YWx1ZS50cmltKCk7XG4gICAgICAgIGdpdGh1Yk5hbWUgPSBlLmN1cnJlbnRUYXJnZXRbMV0udmFsdWUudHJpbSgpO1xuICAgICAgICBcbiAgICAgICAgY2hlY2tVc2VyKGdpdGh1Yk5hbWUpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlcy5sb2dpbiA9PT0gZ2l0aHViTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gc2F2ZSB1c2VyIGRldGFpbHMgdG8gbG9jYWwgc3RvcmFnZVxuICAgICAgICAgICAgICAgICAgICBMUy5zZXREYXRhKCdkZXYtZGFzaC11c2VyJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSAgICAgOiBlLmN1cnJlbnRUYXJnZXRbMF0udmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBnaXRodWJOYW1lIDogZS5jdXJyZW50VGFyZ2V0WzFdLnZhbHVlXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIHJldHJhY3QgdGhlIG1vZGFsIHBhbmVsXG4gICAgICAgICAgICAgICAgICAgIGhpZGVNb2RhbCgpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIGNhbGwgZGlzcGxheSBtZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXlNZXNzYWdlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyB3YXJuIHVzZXJcbiAgICAgICAgICAgICAgICBET00uJG1vZGFsUHJvbXB0XG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoRE9NLiRtb2RhbEVycm9yKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIFxuICAgIC8vIGNoZWNrIEdpdGh1YiB1c2VybmFtZVxuICAgIGZ1bmN0aW9uIGNoZWNrVXNlcih1KSB7XG4gICAgICAgIHJldHVybiAkLmdldEpTT04oJ2h0dHBzOi8vYXBpLmdpdGh1Yi5jb20vdXNlcnMvJyArIHUpO1xuICAgIH1cbiAgICBcbiAgICBcbiAgICAvLyBhc3NlbWJsZSB0aW1lLWJhc2VkIG1lc3NhZ2UgdG8gZ3JlZXQgdXNlclxuICAgIGZ1bmN0aW9uIG1ha2VNZXNzYWdlKCkge1xuICAgICAgICB2YXIgdGltZU9mRGF5LFxuICAgICAgICAgICAgdGVoRGF0ZSA9IG5ldyBEYXRlKCksXG4gICAgICAgICAgICBpbml0aWFsSG91ciA9IHRlaERhdGUuZ2V0SG91cnMoKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChpbml0aWFsSG91ciA8IDEyKSB7XG4gICAgICAgICAgICB0aW1lT2ZEYXkgPSBcIm1vcm5pbmdcIjtcbiAgICAgICAgfSBlbHNlIGlmIChpbml0aWFsSG91ciA+PSAxMiAmJiBpbml0aWFsSG91ciA8IDE3KSB7XG4gICAgICAgICAgICB0aW1lT2ZEYXkgPSBcImFmdGVybm9vblwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGltZU9mRGF5ID0gXCJldmVuaW5nXCI7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYEdvb2QgJHt0aW1lT2ZEYXl9LCAke25hbWV9LmA7XG4gICAgfVxuICAgIFxuICAgIFxuICAgIC8vIHNob3cgbW9kYWwgcGFuZWwuIFNsaWRlcyBkb3duIGZyb20gdG9wXG4gICAgZnVuY3Rpb24gc2hvd01vZGFsKCkge1xuICAgICAgICBcbiAgICAgICAgLy8gc2hvdyBvdmVybGF5XG4gICAgICAgIERPTS4kb3ZlcmxheS5zaG93KCk7XG4gICAgICAgIFxuICAgICAgICAvLyBzaG93IG1vZGFsXG4gICAgICAgIERPTS4kbW9kYWxQcm9tcHRcbiAgICAgICAgICAgIC5hZGRDbGFzcygndXNlci1tb2RhbC1zaG93Jyk7XG4gICAgfVxuICAgIFxuICAgIFxuICAgIC8vIHJldHJhY3QgbW9kYWwgcGFuZWxcbiAgICBmdW5jdGlvbiBoaWRlTW9kYWwoKSB7XG4gICAgICAgIFxuICAgICAgICAvLyBzaG93IG92ZXJsYXlcbiAgICAgICAgRE9NLiRvdmVybGF5LmhpZGUoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIGhpZGUgbW9kYWxcbiAgICAgICAgRE9NLiRtb2RhbFByb21wdFxuICAgICAgICAgICAgLnJlbW92ZUNsYXNzKCd1c2VyLW1vZGFsLXNob3cnKTtcbiAgICB9XG4gICAgXG4gICAgXG4gICAgLy8gY2hlY2sgbG9jYWwgc3RvcmFnZSBmb3IgdXNlclxuICAgIGZ1bmN0aW9uIGNoZWNrU3RvcmFnZSgpIHtcbiAgICAgICAgXG4gICAgICAgIHZhciBzdG9yYWdlID0gTFMuZ2V0RGF0YSgnZGV2LWRhc2gtdXNlcicpO1xuICAgICAgICBcbiAgICAgICAgLy8gaWYgdXNlciBmb3VuZCBpbiBsb2NhbCBzdG9yYWdlLCBnbyBzdHJhaWdodCB0byBncmVldGluZy5cbiAgICAgICAgLy8gb3RoZXJ3aXNlLCBzaG93IG1vZGFsICYgcHJvbXB0IHVzZXIgZm9yIGRldGFpbHNcbiAgICAgICAgaWYgKHN0b3JhZ2UgJiYgc3RvcmFnZS5uYW1lKSB7XG4gICAgICAgICAgICBuYW1lID0gc3RvcmFnZS5uYW1lO1xuICAgICAgICAgICAgZ2l0aHViTmFtZSA9IHN0b3JhZ2UuZ2l0aHViTmFtZTtcbiAgICAgICAgICAgIGRpc3BsYXlNZXNzYWdlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzaG93TW9kYWwoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcblxuICAgIC8vIHJlbmRlciBET00gYW5kIGNhbGwgUmVwb1NlbGVjdC5nZXRSZXBvcygpXG4gICAgZnVuY3Rpb24gZGlzcGxheU1lc3NhZ2UoKSB7XG4gICAgICAgIERPTS4kZ3JlZXRpbmcudGV4dChtYWtlTWVzc2FnZSgpKTtcbiAgICAgICAgUmVwb1NlbGVjdC5nZXRSZXBvcyhnaXRodWJOYW1lKTtcbiAgICB9XG4gICAgXG4gICAgXG4gICAgLy8gcHVibGljIGluaXQgbWV0aG9kXG4gICAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgICAgY2FjaGVEb20oKTtcbiAgICAgICAgXG4gICAgICAgIERPTS4kb3ZlcmxheS5oaWRlKCk7XG4gICAgICAgICQoJ2JvZHknKS5hcHBlbmQoRE9NLiRvdmVybGF5KTsgLy8gdGhlbiBhcHBlbmQgaXQgdG8gRE9NXG4gICAgICAgIFxuICAgICAgICBiaW5kRXZlbnRzKCk7XG4gICAgICAgIFxuICAgICAgICBjaGVja1N0b3JhZ2UoKTtcbiAgICB9XG4gICAgXG4gICAgXG4gICAgLy8gZXhwb3J0IHB1YmxpYyBtZXRob2RzXG4gICAgcmV0dXJuIHtcbiAgICAgICAgaW5pdDogaW5pdFxuICAgIH07XG4gICAgXG59KGpRdWVyeSkpO1xuIiwiLyoganNoaW50IGVzdmVyc2lvbjo2ICovXG4vKiBnbG9iYWxzIHdpbmRvdyAqL1xuXG52YXIgTFMgPSAoZnVuY3Rpb24oKSB7XG5cbiAgIC8qKiBcbiAgICAqIGxvY2FsU3RvcmFnZSBmZWF0dXJlIGRldGVjdCAmIHJldHVybiBsb2NhbCByZWZlcmVuY2VcbiAgICAqIEBwYXJhbSAgICAgICBbbm9uZV1cbiAgICAqIEByZXR1cm5zICAgICBbQk9PTEVBTl0gICBbcmV0dXJucyB0cnVlIGlmIHN0b3JlZCBzdHJpbmcgPT09IHVpZF1cbiAgICAqL1xuICAgdmFyIHN0b3JhZ2UgPSAoZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgdWlkID0gbmV3IERhdGUoKS50b1N0cmluZygpLCAvLyBkYXRlIG11c3QgYmUgYSBzdHJpbmdcbiAgICAgICAgIHN0b3JhZ2UsXG4gICAgICAgICByZXN1bHQ7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgICBzdG9yYWdlID0gd2luZG93LmxvY2FsU3RvcmFnZTtcbiAgICAgICAgIHN0b3JhZ2Uuc2V0SXRlbSh1aWQsIHVpZCk7XG4gICAgICAgICByZXN1bHQgPSBzdG9yYWdlLmdldEl0ZW0odWlkKSA9PT0gdWlkO1xuICAgICAgICAgc3RvcmFnZS5yZW1vdmVJdGVtKHVpZCk7XG4gICAgICAgICByZXR1cm4gcmVzdWx0ICYmIHN0b3JhZ2U7XG4gICAgICB9IGNhdGNoIChleGNlcHRpb24pIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnUHJvYmxlbXohJyk7XG4gICAgICB9XG4gICB9KCkpO1xuXG4gICAvKiogXG4gICAgKiBTdG9yZSBpdGVtIGluIGxvY2FsIHN0b3JhZ2UgaWYgc3RvcmFnZSBleGlzdHNcbiAgICAqIEBwYXJhbSAgICAgICBbc3RyaW5nXSAgICBsb2MgICAgICAgICBbbG9jYWwgc3RvcmFnZSBzdWItbG9jYXRpb25dXG4gICAgKiBAcGFyYW0gICAgICAgW3N0cmluZ10gICAgdmFsICAgICAgICAgW3N0cmluZyB0byBiZSBzdG9yZWRdXG4gICAgKiBAcGFyYW0gICAgICAgW2Z1bmN0aW9uXSAgc3RvcmFnZSAgICAgW2xvY2FsU3RvcmFnZSBmZWF0dXJlIGRldGVjdCAmIGxvY2FsIHJlZl1cbiAgICAqL1xuICAgZnVuY3Rpb24gc2V0RGF0YShsb2MsIHZhbCkge1xuICAgICAgaWYgKHN0b3JhZ2UpIHtcbiAgICAgICAgIHN0b3JhZ2Uuc2V0SXRlbShsb2MsIEpTT04uc3RyaW5naWZ5KHZhbCkpO1xuICAgICAgfVxuICAgfVxuXG4gICAvKiogXG4gICAgKiBHZXQgbG9jYWwgc3RvcmFnZSBpZiBzdG9yYWdlIGV4aXN0c1xuICAgICogQHBhcmFtICAgICAgIFtzdHJpbmddICAgIGxvYyAgICAgICAgIFtsb2NhbCBzdG9yYWdlIHN1Yi1sb2NhdGlvbl1cbiAgICAqIEBwYXJhbSAgICAgICBbZnVuY3Rpb25dICBzdG9yYWdlICAgICBbbG9jYWxTdG9yYWdlIGZlYXR1cmUgZGV0ZWN0ICYgbG9jYWwgcmVmXVxuICAgICogQHJldHVybnMgICAgIFtKU09OIHN0cmluZ10gICAgICAgICAgIFtmZXRjaCBzdG9yZWQgc3RyaW5nLCByZXR1cm4gSlNPTl1cbiAgICAqL1xuICAgZnVuY3Rpb24gZ2V0RGF0YShsb2MpIHtcbiAgICAgIGlmIChzdG9yYWdlKSB7XG4gICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShzdG9yYWdlLmdldEl0ZW0obG9jKSk7XG4gICAgICB9XG4gICB9XG5cbiAgIC8qKiBcbiAgICAqIERlbGV0ZSBBTEwga2V5cyBmcm9tIGxvY2FsIHN0b3JhZ2UgaWYgcGFzc1xuICAgICogQHBhcmFtICAgICAgIFtmdW5jdGlvbl0gIHN0b3JhZ2UgICAgIFtsb2NhbFN0b3JhZ2UgZmVhdHVyZSBkZXRlY3QgJiBsb2NhbCByZWZdXG4gICAgKiBAcmV0dXJucyAgICAgW2Z1bmN0aW9uXSAgLmNsZWFyICAgICAgW3dpcGVzIGxvY2FsIHN0b3JhZ2VdXG4gICAgKi9cbiAgIGZ1bmN0aW9uIGNsZWFyRGF0YSgpIHtcbiAgICAgIGlmIChzdG9yYWdlKSB7XG4gICAgICAgICByZXR1cm4gc3RvcmFnZS5jbGVhcigpO1xuICAgICAgfVxuICAgfVxuXG4gICAvKiogXG4gICAgKiBEZWxldGUgT05FIGtleSBmcm9tIGxvY2FsIHN0b3JhZ2UgaWYgcGFzc1xuICAgICogQHBhcmFtICAgICAgIFtzdHJpbmddICAgIGxvYyAgICAgICAgIFt0aGUga2V5IHRvIGRlbGV0ZSBmcm9tIGxvY2FsU3RvcmFnZV1cbiAgICAqIEBwYXJhbSAgICAgICBbZnVuY3Rpb25dICBzdG9yYWdlICAgICBbbG9jYWxTdG9yYWdlIGZlYXR1cmUgZGV0ZWN0ICYgbG9jYWwgcmVmXVxuICAgICogQHJldHVybnMgICAgIFtmdW5jdGlvbl0gIC5jbGVhciAgICAgIFt3aXBlcyBsb2NhbCBzdG9yYWdlXVxuICAgICovXG4gICBmdW5jdGlvbiBkZWxldGVEYXRhKGxvYykge1xuICAgICAgaWYgKHN0b3JhZ2UpIHtcbiAgICAgICAgIHJldHVybiBzdG9yYWdlLnJlbW92ZUl0ZW0obG9jKTtcbiAgICAgIH1cbiAgIH1cblxuICAgcmV0dXJuIHtcbiAgICAgIHNldERhdGE6IHNldERhdGEsXG4gICAgICBnZXREYXRhOiBnZXREYXRhLFxuICAgICAgZGVsZXRlRGF0YTogZGVsZXRlRGF0YSxcbiAgICAgIGNsZWFyRGF0YTogY2xlYXJEYXRhXG4gICB9O1xuXG59KCkpOyIsIi8qIGpzaGludCBlc3ZlcnNpb246NiAqL1xuLyogZ2xvYmFscyAkLCBkb2N1bWVudCAqL1xuXG52YXIgUmVuZGVyVGFibGUgPSAoZnVuY3Rpb24gKCkge1xuXG4gICAgdmFyIERPTSA9IHt9O1xuICAgIFxuICAgIFxuICAgIC8vIGNhY2hlIERPTSBlbGVtZW50c1xuICAgIGZ1bmN0aW9uIGNhY2hlRG9tKCkge1xuICAgICAgICBET00uJHRhYmxlQ29udGFpbmVyID0gJCgnLnRhYmxlLWNvbnRhaW5lcicpO1xuICAgIH1cbiAgICBcbiAgICBcbiAgICAvLyBmb3JtYXQgZGF0ZXNcbiAgICBmdW5jdGlvbiBmb3JtYXREYXRlKGRhdGUpIHtcblxuICAgICAgICByZXR1cm4gbmV3IERhdGUoZGF0ZSkgICAgIC8vIG1ha2UgZGF0ZSBvYmplY3QgZm9yIGRheSAmIG1vbnRoIGFiYnJldlxuICAgICAgICAgICAgLnRvRGF0ZVN0cmluZygpICAgICAgIC8vIGNvbnZlcnQgb2JqZWN0IHRvIGEgc3RyaW5nXG4gICAgICAgICAgICAuc2xpY2UoMCwgMTUpICAgICAgICAgLy8gcmVtb3ZlIGV2ZXJ5dGhpbmcgYWZ0ZXIgdGhlIFlZWVlcbiAgICAgICAgICAgIC5yZXBsYWNlKC8gMC9nLCAnICcpOyAvLyByZW1vdmUgbGVhZGluZyB6ZXJvcyAoZXguICcwNCcgPT4gJzQnKVxuICAgIH1cblxuXG4gICAgLy8gcHVibGljIHJlbmRlciBtZXRob2QgY2FsbHMgY2F0ZWdvcnkgcmVuZGVyZXJzIGlmIGNhdGVnb3J5IGhhcyBldmVudHNcbiAgICBmdW5jdGlvbiByZW5kZXIoY29tbWl0RXZlbnRzLCB0b2RvRXZlbnRzLCBtZXJnZUV2ZW50cykge1xuXG4gICAgICAgIC8vIGNsZWFyIHByZXZpb3VzIHJlc3VsdHNcbiAgICAgICAgRE9NLiR0YWJsZUNvbnRhaW5lclxuICAgICAgICAgICAgLmVtcHR5KCk7XG4gICAgICAgIFxuICAgICAgICBpZiAoY29tbWl0RXZlbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHJlbmRlckNvbW1pdEV2ZW50cyhjb21taXRFdmVudHMpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRvZG9FdmVudHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmVuZGVyVG9kb0V2ZW50cyh0b2RvRXZlbnRzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChtZXJnZUV2ZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZW5kZXJNZXJnZUV2ZW50cyhtZXJnZUV2ZW50cyk7XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIC8vIHJlbmRlciBjb21taXQgZXZlbnRzXG4gICAgZnVuY3Rpb24gcmVuZGVyQ29tbWl0RXZlbnRzKGVzKSB7XG5cbiAgICAgICAgLy8gZ2V0cyBQdXNoRXZlbnRzICYgQ29tbWl0Q29tbWVudEV2ZW50c1xuXG4gICAgICAgIHZhciAkbGlzdENvbnRhaW5lciA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JykpLFxuICAgICAgICAgICAgJGNvbHVtbiAgICAgICA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JykpLFxuICAgICAgICAgICAgJGxpc3QgICAgICAgICA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKSk7XG5cbiAgICAgICAgZXMuZm9yRWFjaChmdW5jdGlvbiAoZXZ0KSB7XG5cbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGV2dCk7XG5cbiAgICAgICAgICAgIGlmIChldnQudHlwZSA9PT0gJ1B1c2hFdmVudCcpIHtcblxuICAgICAgICAgICAgICAgIC8vIHdoZW4gaXQncyBhIHB1c2ggZXZlbnQsIGV4dHJhY3QgdGhlIGNvbW1pdHNcbiAgICAgICAgICAgICAgICBldnQucGF5bG9hZC5jb21taXRzLmZvckVhY2goZnVuY3Rpb24gKGNvbW1pdCkge1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciAkbGlzdEl0ZW0gID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICRpbWcgICAgICAgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICRwYXJhZ3JhcGggPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKSksXG4gICAgICAgICAgICAgICAgICAgICAgICAkcGFyYVNwYW4gID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJykpLFxuICAgICAgICAgICAgICAgICAgICAgICAgJGEgICAgICAgICA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBjb252ZXJ0IGNvbW1pdCBVUkwgaW50byByZWd1bGFyIGdpdGh1Yi5jb20gVVJMXG4gICAgICAgICAgICAgICAgICAgIC8vIGZyb206IGh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3Mve3VzZXJ9L3tyZXBvfS9jb21taXRzL3tzaGF9XG4gICAgICAgICAgICAgICAgICAgIC8vICAgdG86IGh0dHBzOi8vZ2l0aHViLmNvbS97dXNlcn0ve3JlcG99L2NvbW1pdC97c2hhfVxuICAgICAgICAgICAgICAgICAgICB2YXIgY2xlYW5VcmwgPSAoY29tbWl0LnVybClcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSAnYXBpLidcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXC9cXC9hcGkuLywgJ1xcL1xcLycpXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgJ3JlcG9zLydcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXC9yZXBvc1xcLy8sICdcXC8nKVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVwbGFjZSAnY29tbWl0cycgd2l0aCAnY29tbWl0J1xuICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL2NvbW1pdHMvLCAnY29tbWl0Jyk7XG5cbiAgICAgICAgICAgICAgICAgICAgJGltZy5hdHRyKCdzcmMnLCBldnQuYXZhdGFyKTtcblxuICAgICAgICAgICAgICAgICAgICAkYVxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3RhcmdldCcsICdfYmxhbmsnKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2hyZWYnLCBjbGVhblVybClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5odG1sKGA8c3BhbiBjbGFzcz1cImJvbGRlclwiPiR7KGNvbW1pdC5zaGEpLnNsaWNlKDAsNil9PC9zcGFuPmApO1xuXG4gICAgICAgICAgICAgICAgICAgICRwYXJhU3BhblxuICAgICAgICAgICAgICAgICAgICAgICAgLnRleHQoYFwiJHtjb21taXQubWVzc2FnZX1cImApO1xuXG4gICAgICAgICAgICAgICAgICAgICRwYXJhZ3JhcGhcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoYDxzcGFuIGNsYXNzPVwiYm9sZGVyXCI+JHtldnQuYWN0b3J9PC9zcGFuPiBjb21taXR0ZWQgYClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJGEpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKGAgb24gJHtmb3JtYXREYXRlKGV2dC5kYXRlKX06IGApXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCRwYXJhU3Bhbik7XG5cbiAgICAgICAgICAgICAgICAgICAgJGxpc3RJdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCRpbWcpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCRwYXJhZ3JhcGgpO1xuXG4gICAgICAgICAgICAgICAgICAgICRsaXN0XG4gICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCRsaXN0SXRlbSk7XG5cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgfSBlbHNlIHsgLy8gZWxzZSBpdCdzIGEgY29tbWVudFxuXG4gICAgICAgICAgICAgICAgdmFyICRsaXN0SXRlbSAgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJykpLFxuICAgICAgICAgICAgICAgICAgICAkaW1nICAgICAgID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKSksXG4gICAgICAgICAgICAgICAgICAgICRwYXJhZ3JhcGggPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKSksXG4gICAgICAgICAgICAgICAgICAgICRwYXJhU3BhbiAgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKSksXG4gICAgICAgICAgICAgICAgICAgICRhICAgICAgICAgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKSk7XG5cbiAgICAgICAgICAgICAgICAkaW1nLmF0dHIoJ3NyYycsIGV2dC5hdmF0YXIpO1xuXG4gICAgICAgICAgICAgICAgJGFcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3RhcmdldCcsICdfYmxhbmsnKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cignaHJlZicsIGV2dC5wYXlsb2FkLmNvbW1lbnQuaHRtbF91cmwpXG4gICAgICAgICAgICAgICAgICAgIC5odG1sKGA8c3BhbiBjbGFzcz1cImJvbGRlclwiPiR7KGV2dC5wYXlsb2FkLmNvbW1lbnQuY29tbWl0X2lkKS5zbGljZSgwLDYpfTwvc3Bhbj5gKTtcblxuICAgICAgICAgICAgICAgICRwYXJhU3BhblxuICAgICAgICAgICAgICAgICAgICAudGV4dChgXCIke2V2dC5wYXlsb2FkLmNvbW1lbnQuYm9keX1cImApO1xuXG4gICAgICAgICAgICAgICAgJHBhcmFncmFwaFxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKGA8c3BhbiBjbGFzcz1cImJvbGRlclwiPiR7ZXZ0LmFjdG9yfTwvc3Bhbj4gY29tbWVudGVkIG9uIGApXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJGEpXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoYCBvbiAke2Zvcm1hdERhdGUoZXZ0LmRhdGUpfTogYClcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkcGFyYVNwYW4pO1xuXG4gICAgICAgICAgICAgICAgJGxpc3RJdGVtXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJGltZylcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkcGFyYWdyYXBoKTtcblxuICAgICAgICAgICAgICAgICRsaXN0XG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJGxpc3RJdGVtKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9KTtcblxuICAgICAgICAkbGlzdFxuICAgICAgICAgICAgLmFkZENsYXNzKCdjb2wtbGlzdCcpO1xuICAgICAgICBcbiAgICAgICAgJGxpc3RDb250YWluZXJcbiAgICAgICAgICAgIC5hcHBlbmQoJGxpc3QpO1xuXG4gICAgICAgICRjb2x1bW5cbiAgICAgICAgICAgIC5hZGRDbGFzcygndGFibGUtY29sJylcbiAgICAgICAgICAgIC5hcHBlbmQoYDxoMz4ke2VzLmxlbmd0aH0gQ29tbWl0LVJlbGF0ZWQgRXZlbnRzPC9oMz5gKVxuICAgICAgICAgICAgLmFwcGVuZCgkbGlzdENvbnRhaW5lcik7XG5cbiAgICAgICAgRE9NLiR0YWJsZUNvbnRhaW5lclxuICAgICAgICAgICAgLmFwcGVuZCgkY29sdW1uKTtcblxuICAgIH1cblxuXG4gICAgLy8gcmVuZGVyIHRvZG8gZXZlbnRzXG4gICAgZnVuY3Rpb24gcmVuZGVyVG9kb0V2ZW50cyhlcykge1xuXG4gICAgICAgIC8vIGdldHMgSXNzdWVzRXZlbnRzLCBJc3N1ZUNvbW1lbnRFdmVudHMsIFByb2plY3RFdmVudHMsXG4gICAgICAgIC8vICAgUHJvamVjdENhcmRFdmVudHMsIGFuZCBQcm9qZWN0Q29sdW1uRXZlbnRzXG5cbiAgICAgICAgdmFyICRjb2x1bW4gPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpKSxcbiAgICAgICAgICAgICRsaXN0ICAgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJykpO1xuXG4gICAgICAgIGVzLmZvckVhY2goZnVuY3Rpb24gKGV2dCkge1xuXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhldnQpO1xuXG4gICAgICAgICAgICB2YXIgJGxpc3RJdGVtICA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKSksXG4gICAgICAgICAgICAgICAgJGltZyAgICAgICA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJykpLFxuICAgICAgICAgICAgICAgICRwYXJhZ3JhcGggPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKSksXG4gICAgICAgICAgICAgICAgJGEgICAgICAgICA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpKTtcblxuICAgICAgICAgICAgJGltZy5hdHRyKCdzcmMnLCBldnQuYXZhdGFyKTtcblxuICAgICAgICAgICAgJGEuYXR0cigndGFyZ2V0JywgJ19ibGFuaycpO1xuXG4gICAgICAgICAgICBpZiAoZXZ0LnR5cGUgPT09ICdJc3N1ZXNFdmVudCcpIHtcblxuICAgICAgICAgICAgICAgICRhXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdocmVmJywgZXZ0LnBheWxvYWQuaXNzdWUuaHRtbF91cmwpXG4gICAgICAgICAgICAgICAgICAgIC5odG1sKGA8c3BhbiBjbGFzcz1cImJvbGRlclwiPmlzc3VlICR7ZXZ0LnBheWxvYWQuaXNzdWUubnVtYmVyfTwvc3Bhbj5gKTtcblxuICAgICAgICAgICAgICAgICRwYXJhZ3JhcGhcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChgPHNwYW4gY2xhc3M9XCJib2xkZXJcIj4ke2V2dC5hY3Rvcn08L3NwYW4+ICR7ZXZ0LnBheWxvYWQuYWN0aW9ufSBgKVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCRhKVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKGAgb24gJHtmb3JtYXREYXRlKGV2dC5kYXRlKX06IFwiJHtldnQucGF5bG9hZC5pc3N1ZS50aXRsZX1cImApO1xuXG4gICAgICAgICAgICAgICAgJGxpc3RJdGVtXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJGltZylcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkcGFyYWdyYXBoKTtcblxuICAgICAgICAgICAgICAgICRsaXN0XG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJGxpc3RJdGVtKTtcblxuICAgICAgICAgICAgfSBlbHNlIGlmIChldnQudHlwZSA9PT0gJ0lzc3VlQ29tbWVudEV2ZW50Jykge1xuXG4gICAgICAgICAgICAgICAgJGFcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2hyZWYnLCBldnQucGF5bG9hZC5jb21tZW50Lmh0bWxfdXJsKVxuICAgICAgICAgICAgICAgICAgICAuaHRtbChgPHNwYW4gY2xhc3M9XCJib2xkZXJcIj5pc3N1ZSAke2V2dC5wYXlsb2FkLmlzc3VlLm51bWJlcn08L3NwYW4+YCk7XG5cbiAgICAgICAgICAgICAgICAkcGFyYWdyYXBoXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoYDxzcGFuIGNsYXNzPVwiYm9sZGVyXCI+JHtldnQuYWN0b3J9PC9zcGFuPiBjb21tZW50ZWQgb24gYClcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkYSlcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChgIG9uICR7Zm9ybWF0RGF0ZShldnQuZGF0ZSl9OiBcIiR7ZXZ0LnBheWxvYWQuY29tbWVudC5ib2R5fVwiYCk7XG5cbiAgICAgICAgICAgICAgICAkbGlzdEl0ZW1cbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkaW1nKVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCRwYXJhZ3JhcGgpO1xuXG4gICAgICAgICAgICAgICAgJGxpc3RcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkbGlzdEl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAkbGlzdFxuICAgICAgICAgICAgLmFkZENsYXNzKCdjb2wtbGlzdCcpO1xuXG4gICAgICAgICRjb2x1bW5cbiAgICAgICAgICAgIC5hZGRDbGFzcygndGFibGUtY29sJylcbiAgICAgICAgICAgIC5hcHBlbmQoYDxoMz4ke2VzLmxlbmd0aH0gVG9kby1SZWxhdGVkIEV2ZW50czwvaDM+YClcbiAgICAgICAgICAgIC5hcHBlbmQoJGxpc3QpO1xuXG4gICAgICAgIERPTS4kdGFibGVDb250YWluZXJcbiAgICAgICAgICAgIC5hcHBlbmQoJGNvbHVtbik7XG5cbiAgICB9XG5cblxuICAgIC8vIHJlbmRlciBtZXJnZSBldmVudHNcbiAgICBmdW5jdGlvbiByZW5kZXJNZXJnZUV2ZW50cyhlcykge1xuXG4gICAgICAgIC8vIGdldHMgQ3JlYXRlRXZlbnQsIFB1bGxSZXF1ZXN0RXZlbnQsIFB1bGxSZXF1ZXN0UmV2aWV3RXZlbnRcbiAgICAgICAgLy8gICBhbmQgUHVsbFJlcXVlc3RSZXZpZXdDb21tZW50RXZlbnRcblxuICAgICAgICB2YXIgJGNvbHVtbiA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JykpLFxuICAgICAgICAgICAgJGxpc3QgICA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKSksXG4gICAgICAgICAgICBjbGVhblVybDtcblxuICAgICAgICBlcy5mb3JFYWNoKGZ1bmN0aW9uIChldnQpIHtcblxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZXZ0KTtcblxuICAgICAgICAgICAgdmFyICRsaXN0SXRlbSAgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJykpLFxuICAgICAgICAgICAgICAgICRpbWcgICAgICAgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpKSxcbiAgICAgICAgICAgICAgICAkcGFyYWdyYXBoID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJykpLFxuICAgICAgICAgICAgICAgICRhICAgICAgICAgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKSk7XG5cbiAgICAgICAgICAgICRpbWcuYXR0cignc3JjJywgZXZ0LmF2YXRhcik7XG5cbiAgICAgICAgICAgICRhLmF0dHIoJ3RhcmdldCcsICdfYmxhbmsnKTtcblxuICAgICAgICAgICAgaWYgKGV2dC50eXBlID09PSAnQ3JlYXRlRXZlbnQnKSB7XG5cbiAgICAgICAgICAgICAgICAkcGFyYWdyYXBoXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoW1xuICAgICAgICAgICAgICAgICAgICAgICAgYDxzcGFuIGNsYXNzPVwiYm9sZGVyXCI+JHtldnQuYWN0b3J9PC9zcGFuPmAsXG4gICAgICAgICAgICAgICAgICAgICAgICAnY3JlYXRlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBldnQucGF5bG9hZC5yZWZfdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGA8c3BhbiBjbGFzcz1cImJvbGRlclwiPiR7ZXZ0LnBheWxvYWQucmVmfTwvc3Bhbj5gLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ29uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdERhdGUoZXZ0LmRhdGUpXG4gICAgICAgICAgICAgICAgICAgIF0uam9pbignICcpKTtcblxuICAgICAgICAgICAgICAgICRsaXN0SXRlbVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCRpbWcpXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJHBhcmFncmFwaCk7XG5cbiAgICAgICAgICAgICAgICAkbGlzdFxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCRsaXN0SXRlbSk7XG5cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZ0LnR5cGUgPT09ICdQdWxsUmVxdWVzdEV2ZW50Jykge1xuXG4gICAgICAgICAgICAgICAgLy8gZnJvbTogaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9yZXBvcy9iZWxjdXJ2L21lZXJrYXRfbW9tZW50dW0vcHVsbHMvMTFcbiAgICAgICAgICAgICAgICAvLyAgIHRvOiBodHRwczovL2dpdGh1Yi5jb20vYmVsY3Vydi9tZWVya2F0X21vbWVudHVtL3B1bGwvMTFcblxuICAgICAgICAgICAgICAgIGNsZWFuVXJsID0gKGV2dC5wYXlsb2FkLnB1bGxfcmVxdWVzdC51cmwpXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSAnYXBpLidcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcL1xcL2FwaS4vLCAnXFwvXFwvJylcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlICdyZXBvcy8nXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXC9yZXBvc1xcLy8sICdcXC8nKVxuICAgICAgICAgICAgICAgICAgICAvLyByZXBsYWNlICdwdWxscycgd2l0aCAncHVsbCdcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL3B1bGxzLywgJ3B1bGwnKTtcblxuICAgICAgICAgICAgICAgICRhXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdocmVmJywgY2xlYW5VcmwpXG4gICAgICAgICAgICAgICAgICAgIC5odG1sKGA8c3BhbiBjbGFzcz1cImJvbGRlclwiPnB1bGwgcmVxdWVzdCAke2V2dC5wYXlsb2FkLnB1bGxfcmVxdWVzdC5udW1iZXJ9PC9zcGFuPmApO1xuXG4gICAgICAgICAgICAgICAgJHBhcmFncmFwaFxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKGA8c3BhbiBjbGFzcz1cImJvbGRlclwiPiR7ZXZ0LmFjdG9yfTwvc3Bhbj5gKVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKGAgJHtldnQucGF5bG9hZC5hY3Rpb259IGApXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJGEpXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoYCBvbiAke2Zvcm1hdERhdGUoZXZ0LmRhdGUpfWApO1xuXG4gICAgICAgICAgICAgICAgJGxpc3RJdGVtXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJGltZylcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkcGFyYWdyYXBoKTtcblxuICAgICAgICAgICAgICAgICRsaXN0XG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJGxpc3RJdGVtKTtcblxuICAgICAgICAgICAgfSBlbHNlIGlmIChldnQudHlwZSA9PT0gJ1B1bGxSZXF1ZXN0UmV2aWV3RXZlbnQnKSB7XG5cbiAgICAgICAgICAgICAgICAkYVxuICAgICAgICAgICAgICAgICAgICAuYXR0cignaHJlZicsIGV2dC5wYXlsb2FkLnB1bGxfcmVxdWVzdC5odG1sX3VybClcbiAgICAgICAgICAgICAgICAgICAgLnRleHQoZXZ0LnBheWxvYWQucHVsbF9yZXF1ZXN0LnRpdGxlKTtcblxuICAgICAgICAgICAgICAgICRwYXJhZ3JhcGhcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChbXG4gICAgICAgICAgICAgICAgICAgICAgICBldnQuYWN0b3IsXG4gICAgICAgICAgICAgICAgICAgICAgICBldnQucGF5bG9hZC5hY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAncmV2aWV3IG9mICdcbiAgICAgICAgICAgICAgICAgICAgXS5qb2luKCcgJykpXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJGEpXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJyBvbicgKyBmb3JtYXREYXRlKGV2dC5kYXRlKSk7XG5cbiAgICAgICAgICAgICAgICAkbGlzdEl0ZW1cbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkaW1nKVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCRwYXJhZ3JhcGgpO1xuXG4gICAgICAgICAgICAgICAgJGxpc3RcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkbGlzdEl0ZW0pO1xuXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2dC50eXBlID09PSAnUHVsbFJlcXVlc3RSZXZpZXdDb21tZW50RXZlbnQnKSB7XG5cbiAgICAgICAgICAgICAgICAkYVxuICAgICAgICAgICAgICAgICAgICAuYXR0cignaHJlZicsIGV2dC5wYXlsb2FkLmNvbW1lbnQuaHRtbF91cmwpXG4gICAgICAgICAgICAgICAgICAgIC50ZXh0KGV2dC5wYXlsb2FkLmNvbW1lbnQuYm9keSk7XG5cbiAgICAgICAgICAgICAgICAkcGFyYWdyYXBoXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoW1xuICAgICAgICAgICAgICAgICAgICAgICAgYDxzcGFuIGNsYXNzPVwiYm9sZGVyXCI+JHtldnQuYWN0b3J9PC9zcGFuPmAsXG4gICAgICAgICAgICAgICAgICAgICAgICBldnQucGF5bG9hZC5hY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAncHVsbCByZXF1ZXN0IGNvbW1lbnQgJ1xuICAgICAgICAgICAgICAgICAgICBdLmpvaW4oJyAnKSlcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkYSlcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgnIG9uJyArIGZvcm1hdERhdGUoZXZ0LmRhdGUpKTtcblxuICAgICAgICAgICAgICAgICRsaXN0SXRlbVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCRpbWcpXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJHBhcmFncmFwaCk7XG5cbiAgICAgICAgICAgICAgICAkbGlzdFxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCRsaXN0SXRlbSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSk7XG5cbiAgICAgICAgJGxpc3RcbiAgICAgICAgICAgIC5hZGRDbGFzcygnY29sLWxpc3QnKTtcblxuICAgICAgICAkY29sdW1uXG4gICAgICAgICAgICAuYWRkQ2xhc3MoJ3RhYmxlLWNvbCcpXG4gICAgICAgICAgICAuYXBwZW5kKGA8aDM+JHtlcy5sZW5ndGh9IE1lcmdlLVJlbGF0ZWQgRXZlbnRzPC9oMz5gKVxuICAgICAgICAgICAgLmFwcGVuZCgkbGlzdCk7XG5cbiAgICAgICAgRE9NLiR0YWJsZUNvbnRhaW5lclxuICAgICAgICAgICAgLmFwcGVuZCgkY29sdW1uKTtcblxuICAgIH1cbiAgICBcbiAgICBcbiAgICAvLyBwdWJsaWMgaW5pdCBtZXRob2RcbiAgICBmdW5jdGlvbiBpbml0KCkge1xuICAgICAgICBjYWNoZURvbSgpO1xuICAgIH1cblxuXG4gICAgLy8gcmV0dXJuIHB1YmxpYyBtZXRob2RcbiAgICByZXR1cm4ge1xuICAgICAgICBpbml0OiBpbml0LFxuICAgICAgICByZW5kZXI6IHJlbmRlclxuICAgIH07XG5cbn0oKSk7IiwiLyogTm90ZTogdGhlIGNoYXJ0IGlzIE9OTFkgcmVuZGVyZWQgd2hlbiBldmVudHMgb2NjdXIgb24gbW9yZSB0aGFuIDEgZGF5XG4gKiBJZiB0aGV5IGFsbCBvY2N1ciBvbiB0aGUgc2FtZSBkYXksIHRoZSBjaGFydCB3b3VsZCBqdXN0IGJlIDEgcG9pbnQhICovXG5cbi8qIGpzaGludCBlc3ZlcnNpb246NiAqL1xuLyogZ2xvYmFscyAkLCBjb25zb2xlLCBkb2N1bWVudCAqL1xuXG52YXIgUmVuZGVyQ2hhcnQgPSAoZnVuY3Rpb24gKCkge1xuXG4gICAgdmFyIFxuICAgICAgICAvLyBwbGFjZWhvbGRlciBvYmplY3QgZm9yIGNhY2hlZCBET00gZWxlbWVudHNcbiAgICAgICAgRE9NID0ge30sXG4gICAgICAgIFxuICAgICAgICAvLyBYTUwgbmFtZXNwYWNlIGZvciBTVkcgZWxlbWVudHNcbiAgICAgICAgbnMgID0gJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyxcbiAgICAgICAgXG4gICAgICAgIC8vIGNoYXJ0IGxheW91dCBhdHRyaWJ1dGVzXG4gICAgICAgIHdpZHRoICAgPSAxMDAwLFxuICAgICAgICBoZWlnaHQgID0gNDAwLFxuICAgICAgICB4TWFyZ2luID0gODAsXG4gICAgICAgIHlNYXJnaW4gPSA0MCxcbiAgICAgICAgc3BhY2VyICA9IDQwO1xuICAgICAgICBcblxuICAgIC8vIENhY2hlIERPTSBlbGVtZW50c1xuICAgIGZ1bmN0aW9uIGNhY2hlRG9tKCkge1xuICAgICAgICBET00uJGNvbnRhaW5lciA9ICQoJy5jaGFydC1jb250YWluZXInKTtcbiAgICAgICAgRE9NLiRzdmdFbGVtICAgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhucywgJ3N2ZycpKTtcbiAgICB9XG4gICAgXG4gICAgXG4gICAgLyogRm9ybWF0IGRhdGVzXG4gICAgICpcbiAgICAgKiBAcGFyYW1zICAgW3N0cmluZ10gICBkYXRlICAgW3N0cmluZyBmb3JtYXR0ZWQgZGF0ZV1cbiAgICAgKiBAcmV0dXJucyAgW3N0cmluZ10gICAgICAgICAgW2Zvcm1hdHRlZCBkYXRlIHN0cmluZ11cbiAgICAqL1xuICAgIGZ1bmN0aW9uIGZvcm1hdERhdGVzKGRhdGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGRhdGUpICAgICAvLyBtYWtlIGRhdGUgb2JqZWN0IGZvciBkYXkgJiBtb250aCBhYmJyZXZcbiAgICAgICAgICAgIC50b0RhdGVTdHJpbmcoKSAgICAgICAvLyBjb252ZXJ0IG9iamVjdCB0byBhIHN0cmluZ1xuICAgICAgICAgICAgLnNsaWNlKDAsIDE1KSAgICAgICAgIC8vIHJlbW92ZSBldmVyeXRoaW5nIGFmdGVyIHRoZSBZWVlZXG4gICAgICAgICAgICAucmVwbGFjZSgvIDAvZywgJyAnKTsgLy8gcmVtb3ZlIGxlYWRpbmcgemVyb3MgKGV4LiAnMDQnID0+ICc0JylcbiAgICB9XG5cblxuICAgIC8vIFRlYWNoIERhdGUgYSBuZXcgbWV0aG9kXG4gICAgRGF0ZS5wcm90b3R5cGUuYWRkRGF5cyA9IGZ1bmN0aW9uKGRheXMpIHtcbiAgICAgICAgdmFyIGRhdCA9IG5ldyBEYXRlKHRoaXMudmFsdWVPZigpKTtcbiAgICAgICAgZGF0LnNldERhdGUoZGF0LmdldERhdGUoKSArIGRheXMpO1xuICAgICAgICByZXR1cm4gZGF0O1xuICAgIH07XG4gICAgXG5cbiAgICAvKiBCdWlsZCBkYXRlIHJhbmdlXG4gICAgICpcbiAgICAgKiBAcGFyYW1zICAgW2FycmF5XSAgIGV2ZW50cyAgIFtzb3J0ZWQgYXJyYXkgb2YgZXZlbnRzXVxuICAgICAqIEByZXR1cm5zICBbYXJyYXldICAgICAgICAgICAgW3JhbmdlIG9mIGRhdGVzIGZyb20gZWFybGllc3QgPiByZWNlbnRdXG4gICAgKi9cbiAgICBmdW5jdGlvbiBidWlsZERhdGVSYW5nZShldmVudHMpIHtcbiAgICAgICAgXG4gICAgICAgIHZhciBub3JtRGF0ZXMgICA9IGV2ZW50cy5tYXAoIChlKSA9PiAoZm9ybWF0RGF0ZXMoZS5kYXRlKSkgKSxcbiAgICAgICAgICAgIHN0YXJ0RGF0ZSAgID0gbmV3IERhdGUobm9ybURhdGVzWzBdKSxcbiAgICAgICAgICAgIHN0b3BEYXRlICAgID0gbmV3IERhdGUobm9ybURhdGVzW25vcm1EYXRlcy5sZW5ndGggLSAxXSksXG4gICAgICAgICAgICBkYXRlQXJyYXkgICA9IFtdLFxuICAgICAgICAgICAgY3VycmVudERhdGUgPSBzdGFydERhdGU7XG4gICAgICAgIFxuICAgICAgICAvLyBjb25zb2xlLmxvZyhub3JtRGF0ZXMpO1xuICAgICAgICBcbiAgICAgICAgd2hpbGUgKGN1cnJlbnREYXRlIDw9IHN0b3BEYXRlKSB7XG4gICAgICAgICAgICBkYXRlQXJyYXkucHVzaCggZm9ybWF0RGF0ZXMoY3VycmVudERhdGUpICk7XG4gICAgICAgICAgICBjdXJyZW50RGF0ZSA9IGN1cnJlbnREYXRlLmFkZERheXMoMSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBmYW5jeSBzdGF0c1xuLy8gICAgICAgIGNvbnNvbGUubG9nKCc9PT09PT09PT0gREFURSBTUEVDUyA9PT09PT09PT0nKTtcbi8vICAgICAgICBjb25zb2xlLmxvZygnRGF5cyBpbiByYW5nZTogJyArIGRhdGVBcnJheS5sZW5ndGgpO1xuLy8gICAgICAgIGNvbnNvbGUubG9nKCcgICBTdGFydCBkYXRlOiAnICsgc3RhcnREYXRlKTtcbi8vICAgICAgICBjb25zb2xlLmxvZygnICAgIFN0b3AgZGF0ZTogJyArIHN0b3BEYXRlKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBkYXRlQXJyYXk7XG4gICAgfVxuICAgICAgICBcbiAgICBcbiAgICAvKiBDYWxjdWxhdGUgbWF4IGNoYXJ0IFkgYXhpcyB2YWx1ZVxuICAgICAqIE1heCBZIGlzIG11bHRpcGxlIG9mIDUgdG8gbWFrZSB0aGUgY2hhcnQgbG9vayBuaWNlXG4gICAgICpcbiAgICAgKiBAcGFyYW1zICAgW2FycmF5XSAgIHBvaW50cyAgIFtzb3J0ZWQgZXZlbnRzIGFycmF5XVxuICAgICAqIEByZXR1cm5zICBbbnVtYmVyXSAgICAgICAgICAgW2NhbGN1bGF0ZWQgbWF4IFkgYXhpcyB2YWx1ZV1cbiAgICAqL1xuICAgIGZ1bmN0aW9uIGdldENoYXJ0WU1heChwb2ludHMpIHtcbiAgICAgICAgdmFyIG1heE51bUV2dHMsXG4gICAgICAgICAgICBxdW90aWVudDtcblxuICAgICAgICBtYXhOdW1FdnRzID0gcG9pbnRzLnJlZHVjZShmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgcmV0dXJuIE1hdGgubWF4KGEsIGJbMV0pO1xuICAgICAgICB9LCBwb2ludHNbMF1bMV0pO1xuXG4gICAgICAgIHF1b3RpZW50ID0gTWF0aC5mbG9vcihtYXhOdW1FdnRzIC8gNCk7XG5cbiAgICAgICAgLy8gY29uc29sZS5sb2coJ01heCBkYWlseSBldmVudHM6ICcgKyBtYXhOdW1FdnRzKTtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJy4uIHNvIFkgYXhpcyBtYXg6ICcgKyAoKHF1b3RpZW50ICsgMSkgKiA0KSk7XG5cbiAgICAgICAgLy8gcmV0dXJuIDEgbW9yZSB0aGFuIHRoZSBxdW90aWVudCwgKiA1XG4gICAgICAgIHJldHVybiAoKHF1b3RpZW50ICsgMSkgKiA0KTtcbiAgICB9XG4gICAgXG4gICAgXG4gICAgLyogUmVmb3JtYXQgZXZlbnRzIGFycmF5IGZvciBjaGFydGluZy5cbiAgICAgKiBBbGwgZXZlbnRzIGFyZSBhbHJlYWR5IHVuaXF1ZSBleGNlcHQgcHVzaCBldmVudHMsIGJlY2F1c2UgdGhleSBjb250YWluXG4gICAgICogYXJyYXlzIG9mIGNvbW1pdHMuIFdlIG1ha2UgZWFjaCBjb21taXQgYSBzZXBhcmF0ZSBlbGVtZW50LiAgVGhlblxuICAgICAqIGdldCBudW0gb2YgZXZlbnRzIGZvciBlYWNoIGRhdGUgKCBzb3J0ZWRBcnIuZmlsdGVyKCkubGVuZ3RoKCkgKS5cbiAgICAgKlxuICAgICAqIEBwYXJhbXMgICBbYXJyYXldICAgZXMgICBbcmF3IGV2ZW50cyBhcnJheV1cbiAgICAgKiBAcmV0dXJucyAgW2FycmF5XSAgICAgICAgW2FycmF5IG9mIGRhdGUgJiBudW1iZXIgb2YgZXZlbnRzXVxuICAgICovXG4gICAgZnVuY3Rpb24gcHJlcGFyZURhdGVFdmVudHMoZXMpIHtcblxuICAgICAgICB2YXIgZXZlbnRzID0gW10sXG4gICAgICAgICAgICBzb3J0ZWRFdmVudHMsXG4gICAgICAgICAgICBkYXRlQXJyYXksXG4gICAgICAgICAgICBjaGFydERhdGEgPSBbXTtcbiAgICAgICAgXG4gICAgICAgIGVzLmZvckVhY2goZnVuY3Rpb24gKGV2dCkge1xuXG4gICAgICAgICAgICAvLyAgY29uc29sZS5sb2coZXZ0KTsgIC8vIGRpYWdcblxuICAgICAgICAgICAgaWYgKGV2dC50eXBlID09PSAnUHVzaEV2ZW50Jykge1xuXG4gICAgICAgICAgICAgICAgLy8gd2hlbiBpdCdzIGEgcHVzaCBldmVudCwgZXh0cmFjdCB0aGUgY29tbWl0c1xuICAgICAgICAgICAgICAgIGV2dC5wYXlsb2FkLmNvbW1pdHMuZm9yRWFjaChmdW5jdGlvbiAoY29tbWl0KSB7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBldmVudHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RvcjogZXZ0LmFjdG9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXZhdGFyOiBldnQuYXZhdGFyLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogZXZ0LmRhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXlsb2FkOiBjb21taXQsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIkNvbW1pdFwiXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGV2ZW50cy5wdXNoKGV2dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAvLyBzb3J0IGV2ZW50cyBhc2NlbmRpbmdcbiAgICAgICAgc29ydGVkRXZlbnRzID0gZXZlbnRzLnNvcnQoIChhLCBiKSA9PiBuZXcgRGF0ZShhLmRhdGUpIC0gbmV3IERhdGUoYi5kYXRlKSApO1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhzb3J0ZWRFdmVudHMpOyAvLyBva1xuICAgICAgICBcbiAgICAgICAgLy8gZ2V0IGFycmF5IG9mIGFsbCBkYXRlcyBpbiByYW5nZVxuICAgICAgICBkYXRlQXJyYXkgPSBidWlsZERhdGVSYW5nZShzb3J0ZWRFdmVudHMpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhkYXRlQXJyYXkpO1xuICAgICAgICBcbiAgICAgICAgLy8gYnVpbGQgYXJyYXkgb2YgZGF0YSBwb2ludHM6IFtkYXRlLCAjZXZlbnRzIHBlciBkYXRlXVxuICAgICAgICBjaGFydERhdGEgPSBkYXRlQXJyYXkubWFwKGZ1bmN0aW9uIChkYXRlKSB7XG4gICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIHRoZSBkYXRlLCBhcyBNb250aCBhbmQgRGF5XG4gICAgICAgICAgICAgICAgZGF0ZS5zbGljZSgzLCAxMCksXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gbnVtYmVyIG9mIGV2ZW50cyBwZXIgZGF0ZVxuICAgICAgICAgICAgICAgIHNvcnRlZEV2ZW50cy5maWx0ZXIoICh4KSA9PiBmb3JtYXREYXRlcyh4LmRhdGUpID09PSBkYXRlICkubGVuZ3RoXG4gICAgICAgICAgICBdOyAgICAgICAgICAgIFxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGNoYXJ0RGF0YSk7ICAvLyBkaWFnXG4gICAgXG4gICAgICAgIHJldHVybiBjaGFydERhdGE7XG4gICAgfVxuICAgIFxuICAgIFxuICAgIC8qIGNoZWNrIGlmIGFsbCBldmVudHMgb2NjdXIgb24gdGhlIHNhbWUgZGF5XG4gICAgICpcbiAgICAgKiBAcGFyYW1zICAgW2FycmF5XSAgIHBvaW50c0FyciAgIFtldmVudHMgY29vcmRpbmF0ZSBkYXRhIHBvaW50c11cbiAgICAgKiBAcmV1dHJucyAgW2Jvb2xlYW5dICAgICAgICAgICAgIFtyZXQgdHJ1ZSBpZiBhbGwgZXZlbnRzIG9uIDEgZGF5XVxuICAgICovXG4gICAgZnVuY3Rpb24gc2FtZURhbW5EYXkocG9pbnRzQXJyKSB7XG4gICAgICAgIHJldHVybiBwb2ludHNBcnIubGVuZ3RoID09PSAxO1xuICAgIH1cbiAgICBcbiAgICBcbiAgICAvKiBnZW5lcmF0ZSBjaGFydCBwb2ludHNcbiAgICAgKlxuICAgICAqIEBwYXJhbXMgIFthcnJheV0gICAgcG9pbnRzICBbYXJyYXkgb2YgY29vcmRpbmF0ZSBwb2ludHNdXG4gICAgICogQHJldHVybnMgW29iamVjdF0gICAgICAgICAgIFs8Zz5yb3VwIG9mIDxjaXJjbGU+IGVsZW1lbnRzXVxuICAgICovXG4gICAgZnVuY3Rpb24gZ2VuZXJhdGVDaXJjbGVzKHBvaW50cykge1xuXG4gICAgICAgIC8vIGluaXQgdmFyc1xuICAgICAgICB2YXIgZ3JvdXAgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhucywgJ2cnKSksXG4gICAgICAgICAgICBjdXJyZW50UG9pbnQsXG4gICAgICAgICAgICBudW1Qb2ludHMgPSBwb2ludHMubGVuZ3RoIC0gMSxcbiAgICAgICAgICAgIGNoYXJ0WU1heCA9IGdldENoYXJ0WU1heChwb2ludHMpLFxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBtdWx0aXBsaWVycyBzY2FsZSB0aGUgb3V0cHV0IHggJiB5IGNvb3Jkc1xuICAgICAgICAgICAgeE11bHRpcGxlID0gKHdpZHRoIC0geE1hcmdpbiAtIHNwYWNlcikgLyBudW1Qb2ludHMsXG4gICAgICAgICAgICB5TXVsdGlwbGUgPSAoaGVpZ2h0IC0geU1hcmdpbiAtIHNwYWNlcikgLyBjaGFydFlNYXgsXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIGZvcm1hdCB2YWx1ZXMgdG8gYWxpZ24gd2l0aCBjaGFydCBleHRlbnRzXG4gICAgICAgICAgICBmb3JtYXR0ZWRQb2ludHMgPSBwb2ludHMubWFwKGZ1bmN0aW9uKHBvaW50LCBpbmQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgICAgICAoaW5kICogeE11bHRpcGxlKSArIHhNYXJnaW4sXG4gICAgICAgICAgICAgICAgICAgIChoZWlnaHQgLSAocG9pbnRbMV0gKiB5TXVsdGlwbGUpKSAtIHlNYXJnaW5cbiAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBsb29wIHRocm91Z2ggcG9pbnRzIGFycmF5IGFwcGVuZGluZyBjaXJjbGVzIHRvIGdyb3VwXG4gICAgICAgIGZvcm1hdHRlZFBvaW50cy5mb3JFYWNoKGZ1bmN0aW9uIChwb2ludCwgaW5kKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciBjaXJjbGUgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhucywgJ2NpcmNsZScpKSxcbiAgICAgICAgICAgICAgICB0aXRsZSAgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhucywgJ3RpdGxlJykpLFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIDxjaXJjbGU+IHdhbnRzIGF0dHJzOiBjeCwgY3ksIHJcbiAgICAgICAgICAgICAgICBjeCA9IHBvaW50WzBdLFxuICAgICAgICAgICAgICAgIGN5ID0gcG9pbnRbMV0sXG4gICAgICAgICAgICAgICAgciAgPSA0O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjaXJjbGVcbiAgICAgICAgICAgICAgICAuYXR0cignY3gnLCBjeClcbiAgICAgICAgICAgICAgICAuYXR0cignY3knLCBjeSlcbiAgICAgICAgICAgICAgICAuYXR0cigncicsIHIpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyA8dGl0bGU+IGFkZHMgJ3Rvb2wgdGlwJyBvbiBob3ZlclxuICAgICAgICAgICAgdGl0bGUudGV4dChwb2ludHNbaW5kXVswXSArICcgKCcgKyBwb2ludHNbaW5kXVsxXSArICcgZXZlbnRzKScpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBhcHBlbmQgdGl0bGUgdG8gY2lyY2xlXG4gICAgICAgICAgICBjaXJjbGUuYXBwZW5kKHRpdGxlKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gYXBwZW5kIGNpcmNsZSB0byBncm91cFxuICAgICAgICAgICAgZ3JvdXBcbiAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoJ2NoYXJ0LWNpcmNsZScpXG4gICAgICAgICAgICAgICAgLmFwcGVuZChjaXJjbGUpOyBcblxuICAgICAgICB9KTtcbiAgICBcbiAgICByZXR1cm4gZ3JvdXA7XG4gICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIC8qIGdlbmVyYXRlIGNoYXJ0IGxpbmVcbiAgICAgKlxuICAgICAqIEBwYXJhbXMgIFthcnJheV0gICAgcG9pbnRzICBbYXJyYXkgb2YgY29vcmRpbmF0ZSBwb2ludHNdXG4gICAgICogQHJldHVybnMgW29iamVjdF0gICAgICAgICAgIFs8Zz5yb3VwIG9mIDxsaW5lPiBzZWdtZW50c11cbiAgICAqL1xuICAgIGZ1bmN0aW9uIGdlbmVyYXRlTGluZXMocG9pbnRzKSB7XG4gICAgICAgIFxuICAgICAgICAvLyBpbml0IHZhcnNcbiAgICAgICAgdmFyIGdyb3VwID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMobnMsICdnJykpLFxuICAgICAgICAgICAgY3VycmVudFBvaW50LFxuICAgICAgICAgICAgaSxcbiAgICAgICAgICAgIGxpbmUsXG4gICAgICAgICAgICBudW1Qb2ludHMgPSBwb2ludHMubGVuZ3RoIC0gMSxcbiAgICAgICAgICAgIGNoYXJ0WU1heCA9IGdldENoYXJ0WU1heChwb2ludHMpLFxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBtdWx0aXBsaWVycyBzY2FsZSB0aGUgb3V0cHV0IHggJiB5IGNvb3Jkc1xuICAgICAgICAgICAgeE11bHRpcGxlID0gKHdpZHRoIC0geE1hcmdpbiAtIHNwYWNlcikgLyBudW1Qb2ludHMsXG4gICAgICAgICAgICB5TXVsdGlwbGUgPSAoaGVpZ2h0IC0geU1hcmdpbiAtIHNwYWNlcikgLyBjaGFydFlNYXgsXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIGZvcm1hdCB2YWx1ZXMgdG8gYWxpZ24gd2l0aCBjaGFydCBleHRlbnRzXG4gICAgICAgICAgICBmb3JtYXR0ZWRQb2ludHMgPSBwb2ludHMubWFwKGZ1bmN0aW9uKHBvaW50LCBpbmQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgICAgICAoaW5kICogeE11bHRpcGxlKSArIHhNYXJnaW4sXG4gICAgICAgICAgICAgICAgICAgIChoZWlnaHQgLSAocG9pbnRbMV0gKiB5TXVsdGlwbGUpKSAtIHlNYXJnaW5cbiAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBsb29wIHRocm91Z2ggcG9pbnRzIGFycmF5IGFwcGVuZGluZyBsaW5lcyB0byBncm91cFxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgZm9ybWF0dGVkUG9pbnRzLmxlbmd0aCAtIDE7IGkgKz0gMSkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBsaW5lID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMobnMsICdsaW5lJykpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBkZXNjcmliZSA8bGluZT5cbiAgICAgICAgICAgIGxpbmVcbiAgICAgICAgICAgICAgICAuYXR0cigneDEnLCBmb3JtYXR0ZWRQb2ludHNbaV1bMF0pXG4gICAgICAgICAgICAgICAgLmF0dHIoJ3kxJywgZm9ybWF0dGVkUG9pbnRzW2ldWzFdKVxuICAgICAgICAgICAgICAgIC5hdHRyKCd4MicsIGZvcm1hdHRlZFBvaW50c1tpICsgMV1bMF0pXG4gICAgICAgICAgICAgICAgLmF0dHIoJ3kyJywgZm9ybWF0dGVkUG9pbnRzW2kgKyAxXVsxXSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBhcHBlbmQgPGxpbmU+IHRvIDxnPnJvdXBcbiAgICAgICAgICAgIGdyb3VwXG4gICAgICAgICAgICAgICAgLmFkZENsYXNzKCdjaGFydC1saW5lJylcbiAgICAgICAgICAgICAgICAuYXBwZW5kKGxpbmUpO1xuICAgICAgICB9XG4gICAgXG4gICAgcmV0dXJuIGdyb3VwO1xuICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICAvKiBnZW5lcmF0ZSBheGlzIGxhYmVsc1xuICAgICAqXG4gICAgICogQHBhcmFtcyAgW2FycmF5XSAgICBwb2ludHMgIFthcnJheSBvZiBjb29yZGluYXRlIHBvaW50c11cbiAgICAgKiBAcGFyYW1zICBbc3RyaW5nXSAgIGF4aXMgICAgWyd5JyBvciAneCcgc3BlY2lmaWVzIGNvbmRpdGlvbmFsIHBhdGhdXG4gICAgICogQHJldHVybnMgW29iamVjdF0gICAgICAgICAgIFs8Zz5yb3VwIG9mIGF4aXMgPGxpbmU+IGFuZCA8dGV4dD4gZWxzXVxuICAgICovXG4gICAgZnVuY3Rpb24gZ2VuQXhpc0xhYmVscyhwb2ludHMsIGF4aXMpIHtcbiAgICAgICAgXG4gICAgICAgIHZhciBncm91cCA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKG5zLCAnZycpKSxcbiAgICAgICAgICAgIGxpbmUsIC8vIHBsYWNlaG9sZGVyIGZvciA8bGluZT4gZWxlbWVudCBidWlsdCBpbiBsb29wXG4gICAgICAgICAgICB0ZXh0LCAvLyBwbGFjZWhvbGRlciBmb3IgPHRleHQ+IGVsZW1lbnQgYnVpbHQgaW4gbG9vcFxuICAgICAgICAgICAgbnVtQXhpc1RpY2tzLFxuICAgICAgICAgICAgeFBvcywgeFZhbHVlLCB4TXVsdGlwbGUsXG4gICAgICAgICAgICB5UG9zLCB5VmFsdWUsIHlTcGFjaW5nLFxuICAgICAgICAgICAgbWF4WXZhbCxcbiAgICAgICAgICAgIGNoYXJ0WU1heCA9IGdldENoYXJ0WU1heChwb2ludHMpLFxuICAgICAgICAgICAgaTtcbiAgICAgICAgXG4gICAgICAgIG1heFl2YWwgPSBwb2ludHMucmVkdWNlKGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5tYXgoYSwgYlsxXSk7XG4gICAgICAgIH0sIHBvaW50c1swXVsxXSk7XG4gICAgICAgIFxuICAgICAgICAvLyBjb25kaXRpb25hbGx5IGhhbmRsZSBwYXNzZWQgYXhpcyBwYXJhbVxuICAgICAgICBpZiAoYXhpcyA9PT0gJ3knKSB7XG4gICAgICAgICAgICAvLyBhZGQgQ1NTIGNsYXNzIHRvIDxnPiBlbGVtZW50XG4gICAgICAgICAgICBncm91cC5hZGRDbGFzcygnbGFiZWxzIHktbGFiZWxzJyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIGxpbWl0IHF0eSBvZiBZIGF4aXMgbGFiZWxzIGJhc2VkIG9uIGNoYXJ0WU1heFxuICAgICAgICAgICAgbnVtQXhpc1RpY2tzID0gKGNoYXJ0WU1heCA+IDEyKSA/IGNoYXJ0WU1heCAvIDQgOiBjaGFydFlNYXg7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSByZWxhdGl2ZSBzcGFjZSBiZXR3ZWVuIGVhY2ggWSBheGlzIGxhYmVsXG4gICAgICAgICAgICB5U3BhY2luZyA9IChoZWlnaHQgLSB5TWFyZ2luIC0gc3BhY2VyKSAvIG51bUF4aXNUaWNrcztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gbG9vcCB0aHJvdWdoIG51bUF4aXNUaWNrcywgZ2VuZXJhdGUgPGxpbmU+IGFuZCA8dGV4dD4gZWxlbWVudHMsXG4gICAgICAgICAgICAvLyB0aGVuIGFwcGVuZCBlYWNoIG9mIHRoZW0gdG8gb3VyIDxnPnJvdXBcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBudW1BeGlzVGlja3MgKyAxOyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBjYWxjdWxhdGUgeSBheGlzIGxhYmVsIHZhbHVlXG4gICAgICAgICAgICAgICAgeVZhbHVlID0gaSAqIGNoYXJ0WU1heCAvIG51bUF4aXNUaWNrcztcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBjYWxjdWxhdGUgeSBheGlzIGxhYmVsIHBvc2l0aW9uXG4gICAgICAgICAgICAgICAgeVBvcyA9IGhlaWdodCAtIHlNYXJnaW4gLSAoeVNwYWNpbmcgKiBpKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBjcmVhdGUgbmV3IDxsaW5lPiBlbGVtZW50XG4gICAgICAgICAgICAgICAgbGluZSA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKG5zLCAnbGluZScpKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBhZGQgYXR0cmlidXRlcyB0byA8bGluZT4gZWxlbWVudFxuICAgICAgICAgICAgICAgIGxpbmUuYWRkQ2xhc3MoJ2hvcml6LXJ1bGUnKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cigneDEnLCB4TWFyZ2luKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cigneTEnLCB5UG9zKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cigneDInLCAod2lkdGggLSBzcGFjZXIgKyA1KSlcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3kyJywgeVBvcyk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gY3JlYXRlIG5ldyA8dGV4dD4gZWxlbWVudFxuICAgICAgICAgICAgICAgIHRleHQgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhucywgJ3RleHQnKSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gYWRkIGF0dHJpYnV0ZXMgdG8gPHRleHQ+IGVsZW1lbnRcbiAgICAgICAgICAgICAgICB0ZXh0XG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCd4JywgKHhNYXJnaW4gLSAyMCkpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCd5JywgKHlQb3MgKyA0KSlcbiAgICAgICAgICAgICAgICAgICAgLmh0bWwoeVZhbHVlKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBncm91cFxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKGxpbmUpXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQodGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZ3JvdXA7XG4gICAgICAgIFxuICAgICAgICB9IGVsc2UgaWYgKGF4aXMgPT09ICd4JyB8fCAhYXhpcyB8fCBheGlzID09PSBudWxsKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIGFkZCBDU1MgY2xhc3MgdG8gdGhlIDxnPnJvdXBcbiAgICAgICAgICAgIGdyb3VwLmFkZENsYXNzKCdsYWJlbHMgeC1sYWJlbHMnKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbnVtQXhpc1RpY2tzID0gcG9pbnRzLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICB4TXVsdGlwbGUgPSAod2lkdGggLSB4TWFyZ2luIC0gc3BhY2VyKSAvIG51bUF4aXNUaWNrcztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gbG9vcCB0aHJvdWdoIHBvaW50cywgZ2VuZXJhdGUgPGxpbmU+IGFuZCA8dGV4dD4gZWxlbWVudHMsXG4gICAgICAgICAgICAvLyBhbmQgYXBwZW5kIGVhY2ggb2YgdGhlbSB0byBvdXIgPGc+IGdyb3VwXG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgcG9pbnRzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gZm9yIGxhcmdlIGRhdGFzZXRzLCBvbmx5IGFwcGVuZCBldmVyeSAxMHRoIGRhdGVcbiAgICAgICAgICAgICAgICBpZiAocG9pbnRzLmxlbmd0aCA+IDIwKSB7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoaSAlIDEwID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxjdWxhdGUgeSBheGlzIGxhYmVsIHZhbHVlc1xuICAgICAgICAgICAgICAgICAgICAgICAgeFZhbHVlID0gcG9pbnRzW2ldWzBdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxjdWxhdGUgeSBwb3NpdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgeFBvcyA9IGkgKiB4TXVsdGlwbGU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNyZWF0ZSBuZXcgPHRleHQ+IGVsZW1lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhucywgJ3RleHQnKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFkZCBhdHRyaWJ1dGVzIHRvIDx0ZXh0PiBlbGVtZW50XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3gnLCAoeFBvcyArIHhNYXJnaW4pKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd5JywgKGhlaWdodCAtIDUpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50ZXh0KHhWYWx1ZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCh0ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9IGVsc2UgeyAgICAgICAgICAgICAgICBcblxuICAgICAgICAgICAgICAgICAgICAvLyBjYWxjdWxhdGUgeSBheGlzIGxhYmVsIHZhbHVlc1xuICAgICAgICAgICAgICAgICAgICB4VmFsdWUgPSBwb2ludHNbaV1bMF07XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gY2FsY3VsYXRlIHkgcG9zaXRpb25cbiAgICAgICAgICAgICAgICAgICAgeFBvcyA9IGkgKiB4TXVsdGlwbGU7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gY3JlYXRlIG5ldyA8dGV4dD4gZWxlbWVudFxuICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMobnMsICd0ZXh0JykpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIGFkZCBhdHRyaWJ1dGVzIHRvIDx0ZXh0PiBlbGVtZW50XG4gICAgICAgICAgICAgICAgICAgIHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd4JywgKHhQb3MgKyB4TWFyZ2luKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd5JywgKGhlaWdodCAtIDUpKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRleHQoeFZhbHVlKTtcblxuICAgICAgICAgICAgICAgICAgICBncm91cFxuICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCh0ZXh0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZ3JvdXA7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgfVxuXG4gICAgXG4gICAgLy8gTUFJTiBSRU5ERVJFUlxuICAgIC8vIFJlY2VpdmVzIEFMTCBldmVudHMgZnJvbSAnZ2V0LWV2ZW50cy5qcydcbiAgICBmdW5jdGlvbiByZW5kZXIoZXZlbnRzKSB7XG4gICAgICAgIFxuICAgICAgICB2YXIgcG9pbnRzO1xuICAgICAgICBcbiAgICAgICAgLy8gZW1wdHkgcGFyZW50IFNWRyBlbGVtZW50IGJlZm9yZSBlYWNoIHJlbmRlclxuICAgICAgICBET00uJHN2Z0VsZW0uZW1wdHkoKTtcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICAvLyBhZGQgQ1NTIGNsYXNzLCBuYW1lc3BhY2UgYW5kIGF0dHJpYnV0ZXMgdG8gbWFpbiA8c3ZnPiBlbGVtZW50XG4gICAgICAgIERPTS4kc3ZnRWxlbVxuICAgICAgICAgICAgLmFkZENsYXNzKCdjaGFydC0tY29udGVudCcpXG4gICAgICAgICAgICAuYXR0cignaWQnLCAnc3ZnJylcbiAgICAgICAgICAgIC5hdHRyKCd4bWxucycsIG5zKVxuICAgICAgICAgICAgLy8gLmF0dHIoJ3dpZHRoJywgJzEwMCUnKVxuICAgICAgICAgICAgLmF0dHIoJ2hlaWdodCcsICcxMDAlJylcbiAgICAgICAgICAgIC5hdHRyKCd2aWV3Qm94JywgJzAgMCAnICsgd2lkdGggKyAnICcgKyBoZWlnaHQpXG4gICAgICAgICAgICAuYXR0cigneG1sOnNwYWNlJywgJ3ByZXNlcnZlJyk7XG4gICAgICAgIFxuICAgICAgICBpZiAoZXZlbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gZm9ybWF0IGV2ZW50cyB0byB1c2FibGUgcG9pbnRzXG4gICAgICAgICAgICBwb2ludHMgPSBwcmVwYXJlRGF0ZUV2ZW50cyhldmVudHMpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBjaGVjayBpZiBBTEwgZXZlbnRzIG9jY3VyIG9uIHRoZSBzYW1lIGRheSFcbiAgICAgICAgICAgIGlmIChzYW1lRGFtbkRheShwb2ludHMpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBhcHBlbmQgYXhpcyBsYWJlbCA8dGV4dD4gPGc+cm91cHNcbiAgICAgICAgICAgIERPTS4kc3ZnRWxlbVxuICAgICAgICAgICAgICAgIC5hcHBlbmQoZ2VuQXhpc0xhYmVscyhwb2ludHMsICd5JykpXG4gICAgICAgICAgICAgICAgLmFwcGVuZChnZW5BeGlzTGFiZWxzKHBvaW50cywgJ3gnKSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIGFwcGVuZCBsaW5lXG4gICAgICAgICAgICBET00uJHN2Z0VsZW1cbiAgICAgICAgICAgICAgICAuYXBwZW5kKGdlbmVyYXRlTGluZXMocG9pbnRzKSk7XG5cbiAgICAgICAgICAgIC8vIGFwcGVuZCBwb2ludHMvY2lyY2xlcyA8Zz5yb3VwXG4gICAgICAgICAgICBET00uJHN2Z0VsZW1cbiAgICAgICAgICAgICAgICAuYXBwZW5kKGdlbmVyYXRlQ2lyY2xlcyhwb2ludHMpKTtcblxuICAgICAgICAgICAgLy8gYXBwZW5kIFNWRyB0byBjb250YWluZXJcbiAgICAgICAgICAgIERPTS4kY29udGFpbmVyXG4gICAgICAgICAgICAgICAgLmFwcGVuZChET00uJHN2Z0VsZW0pO1xuICAgICAgICAgICAgXG4gICAgICAgIH0gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICAvLyBwdWJsaWMgaW5pdCBtZXRob2RcbiAgICBmdW5jdGlvbiBpbml0KCkge1xuICAgICAgICBjYWNoZURvbSgpO1xuICAgIH1cblxuXG4gICAgLy8gcmV0dXJuIHB1YmxpYyBhcGlcbiAgICByZXR1cm4ge1xuICAgICAgICBpbml0OiBpbml0LFxuICAgICAgICByZW5kZXI6IHJlbmRlclxuICAgIH07XG5cbn0oKSk7IiwiLyoganNoaW50IGVzdmVyc2lvbjo2ICovXG4vKiBnbG9iYWxzIGpRdWVyeSwgZG9jdW1lbnQsIGNvbnNvbGUsIExTLCBIaXRBcGkgKi9cblxuLy8gR29hbDogXCJZb3UgYXJlIGN1cnJlbnRseSB2aWV3aW5nIHtSZXBvTmFtZX0gXFwvIHJlcG9zaXRvcnkuXCJcblxudmFyIFJlcG9TZWxlY3QgPSAoZnVuY3Rpb24gKCQpIHtcblxuICAgIHZhciBET00gPSB7fSxcbiAgICAgICAgcmVwb3MgPSBbXSxcbiAgICAgICAgc2VsZWN0ZWRSZXBvO1xuICAgIFxuICAgIFxuICAgIC8vIHV0aWwgY2hlY2tzIGxvY2FsIHN0b3JhZ2UgZm9yIHByZXZpb3VzbHkgc2F2ZWQgbGlzdCBvZiByZXBvc1xuICAgIHZhciBjaGVja1N0b3JhZ2UgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBMUy5nZXREYXRhKCdkZXYtZGFzaC1yZXBvcycpID8gdHJ1ZSA6IGZhbHNlO1xuICAgIH0oKSk7XG5cblxuICAgIC8vIGNhY2hlIERPTSBlbGVtZW50c1xuICAgIGZ1bmN0aW9uIGNhY2hlRG9tKCkge1xuICAgICAgICBET00uJHNlbGVjdENvbnRhaW5lciA9ICQoJy5yZXBvLXNlbGVjdCcpO1xuICAgICAgICBET00uJHAgICAgICAgICAgICAgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKSk7XG4gICAgICAgIERPTS4kbGlzdENvbnRhaW5lciA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JykpO1xuICAgICAgICBET00uJHVsICAgICAgICAgICAgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJykpO1xuICAgICAgICBET00uJG5ld1JlcG9Gb3JtICAgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Zvcm0nKSk7XG4gICAgICAgIERPTS4kbmV3UmVwb1VzZXIgICA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKSk7XG4gICAgICAgIERPTS4kbmV3UmVwb1JlcG8gICA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKSk7XG4gICAgICAgIERPTS4kbmV3UmVwb0J0biAgICA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJykpO1xuICAgIH1cblxuXG4gICAgLy8gYmluZCBldmVudHNcbiAgICBmdW5jdGlvbiBiaW5kRXZlbnRzKCkge1xuICAgICAgICBET00uJHNlbGVjdENvbnRhaW5lci5vbignY2xpY2snLCAnLnJlcG8tc2VsZWN0LWhpZ2hsaWdodCcsIHNob3dSZXBvTGlzdCk7XG4gICAgICAgIERPTS4kdWwub24oJ2NsaWNrJywgJ2Rpdi5saS1kZXNjcmlwdGlvbnMnLCBzZWxlY3RSZXBvKTtcbiAgICAgICAgRE9NLiR1bC5vbignY2xpY2snLCAnc3Bhbi5saS1yZW1vdmUnLCBkZWxldGVSZXBvKTtcbiAgICAgICAgRE9NLiRuZXdSZXBvRm9ybS5vbignc3VibWl0JywgYWRkUmVwbyk7XG4gICAgfVxuICAgIFxuICAgIFxuICAgIC8vIHNob3cvaGlkZSByZXBvIGxpc3RcbiAgICBmdW5jdGlvbiBzaG93UmVwb0xpc3QoZSkge1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgIERPTS4kbGlzdENvbnRhaW5lclxuICAgICAgICAgICAgLnRvZ2dsZUNsYXNzKCdoaWRkZW4nKTtcbiAgICB9XG4gICAgXG4gICAgXG4gICAgLy8gc2VsZWN0IGEgcmVwbyB0byB2aWV3XG4gICAgZnVuY3Rpb24gc2VsZWN0UmVwbyhlKSB7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIFxuICAgICAgICB2YXIgcGlja2VkID0gZS5jdXJyZW50VGFyZ2V0LmNoaWxkcmVuWzBdLmlubmVySFRNTC5zcGxpdCgnIC8gJyk7XG4gICAgICAgIFxuICAgICAgICBzZWxlY3RlZFJlcG8gPSBwaWNrZWRbMV07XG4gICAgICAgIFxuICAgICAgICAvLyBjb25zb2xlLmxvZyhwaWNrZWQpOyAvLyBkaWFnXG4gICAgICAgIHBvcHVsYXRlTWVudShyZXBvcyk7XG4gICAgICAgICAgICBcbiAgICAgICAgLy8gQ2FsbCBIaXRBcGkgbW9kdWxlJ3MgcHVibGljIC5nZXRFdmVudHMoKSBtZXRob2RcbiAgICAgICAgSGl0QXBpLmdldEV2ZW50cyhwaWNrZWRbMF0sIHBpY2tlZFsxXSk7XG4gICAgICAgIFxuICAgICAgICAvLyByZXRyYWN0IHJlcG8gbGlzdFxuICAgICAgICBET00uJGxpc3RDb250YWluZXJcbiAgICAgICAgICAgIC5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgfVxuICAgIFxuICAgIFxuICAgIC8vIGRlbGV0ZSByZXBvIGZyb20gdGhlIGxpc3RcbiAgICBmdW5jdGlvbiBkZWxldGVSZXBvKGUpIHtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgXG4gICAgICAgIHZhciBhdXRob3JBbmRSZXBvID0gZS50YXJnZXQucHJldmlvdXNFbGVtZW50U2libGluZy5kYXRhc2V0LnJlcG8sXG4gICAgICAgICAgICBzZWxlY3RlZEVsZW1lbnQgPSAkKGUudGFyZ2V0KS5wYXJlbnQoKSxcbiAgICAgICAgICAgIHNlbGVjdGVkRWxlbUlkICA9IHNlbGVjdGVkRWxlbWVudC5hdHRyKCdpZCcpO1xuICAgICAgICBcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ0RlbGV0ZTogJyArIGF1dGhvckFuZFJlcG8pOyAvLyBkaWFnXG4gICAgICAgIFxuICAgICAgICByZXBvcy5zcGxpY2Uoc2VsZWN0ZWRFbGVtSWQsIDEpO1xuICAgICAgICBzZWxlY3RlZEVsZW1lbnQucmVtb3ZlKCk7XG4gICAgICAgIExTLnNldERhdGEoJ2Rldi1kYXNoLXJlcG9zJywgcmVwb3MpO1xuICAgIH1cbiAgICBcbiAgICBcbiAgICAvLyBhZGQgcmVwbyB0byB0aGUgbGlzdFxuICAgIGZ1bmN0aW9uIGFkZFJlcG8oZSkge1xuICAgICAgICBcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICBcbiAgICAgICAgdmFyIGFwaVVybCAgICA9ICdodHRwczovL2FwaS5naXRodWIuY29tL3JlcG9zJyxcbiAgICAgICAgICAgIG5ld0F1dGhvciA9IGUuY3VycmVudFRhcmdldFswXS52YWx1ZSxcbiAgICAgICAgICAgIG5ld1JlcG8gICA9IGUuY3VycmVudFRhcmdldFsxXS52YWx1ZTtcbiAgICAgICAgXG4gICAgICAgICQuZ2V0SlNPTihgJHthcGlVcmx9LyR7bmV3QXV0aG9yfS8ke25ld1JlcG99YClcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXBvKSB7XG4gICAgICAgICAgICAgICAgcmVwb3MudW5zaGlmdChyZXBvKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIGNsZWFyIGlucHV0c1xuICAgICAgICAgICAgICAgIERPTS4kbmV3UmVwb1VzZXJbMF0udmFsdWUgPSAnJztcbiAgICAgICAgICAgICAgICBET00uJG5ld1JlcG9SZXBvWzBdLnZhbHVlID0gJyc7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVwb3M7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4oc2F2ZVJlcG9zKVxuICAgICAgICAgICAgLnRoZW4ocG9wdWxhdGVNZW51KVxuICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0Vycm9yIGZldGNoaW5nIHJlcG8uJyk7XG4gICAgICAgICAgICB9KTtcbiAgICBcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIC8vIHBvcHVsYXRlIG1vZHVsZSBzY29wZSByZXBvcyBhcnJheSAmIGNhbGwgSGl0QXBpIG9uIDFzdCBsb2FkXG4gICAgZnVuY3Rpb24gcG9wdWxhdGVSZXBvcyhkYXRhKSB7XG4gICAgICAgIFxuICAgICAgICBpZiAoZGF0YSAmJiBkYXRhLmxlbmd0aCkge1xuXG4gICAgICAgIFxuICAgICAgICAgICAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChyZXBvKSB7XG4gICAgICAgICAgICAgICAgcmVwb3MucHVzaChyZXBvKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBjYXB0dXJlIDFzdCByZXBvJ3MgYXV0aG9yICYgcmVwbyBuYW1lIGluIGFuIGFycmF5XG4gICAgICAgICAgICB2YXIgcmVwb1plcm8gPSByZXBvc1swXS5mdWxsX25hbWUuc3BsaXQoJy8nKTtcblxuICAgICAgICAgICAgLy8gc2V0IHNlbGVjdGVkIHJlcG8gdG8gZmlyc3QgcmVwbydzIG5hbWVcbiAgICAgICAgICAgIHNlbGVjdGVkUmVwbyA9IHJlcG9aZXJvWzFdO1xuXG4gICAgICAgICAgICAvLyBDYWxsIEhpdEFwaSBtb2R1bGUncyBwdWJsaWMgLmdldEV2ZW50cygpIG1ldGhvZFxuICAgICAgICAgICAgSGl0QXBpLmdldEV2ZW50cyhyZXBvWmVyb1swXSwgcmVwb1plcm9bMV0pO1xuXG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBcbiAgICAvLyBzYXZlIHJlcG9zIHRvIGxvY2FsIHN0b3JhZ2VcbiAgICBmdW5jdGlvbiBzYXZlUmVwb3MoZGF0YSkge1xuICAgICAgICBMUy5zZXREYXRhKCdkZXYtZGFzaC1yZXBvcycsIHJlcG9zKTtcbiAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfVxuICAgIFxuICAgIFxuICAgIC8vIHBvcHVsYXRlIHJlcG8gbGlzdCBtZW51XG4gICAgZnVuY3Rpb24gcG9wdWxhdGVNZW51KGRhdGEpIHtcbiAgICAgICAgXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICBcbiAgICAgICAgaWYgKGRhdGEgJiYgZGF0YS5sZW5ndGgpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgRE9NLiR1bC5odG1sKCcnKTtcblxuICAgICAgICAgICAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChyZXBvLCBpbmQpIHtcbiAgICAgICAgICAgICAgICB2YXIgJGxpID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpKTtcblxuICAgICAgICAgICAgICAgICRsaVxuICAgICAgICAgICAgICAgICAgICAuYXR0cignaWQnLCBpbmQpXG4gICAgICAgICAgICAgICAgICAgIC5odG1sKGA8ZGl2IGNsYXNzPVwibGktZGVzY3JpcHRpb25zXCIgZGF0YS1yZXBvPVwiJHtyZXBvLm5hbWV9XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPiR7cmVwby5vd25lci5sb2dpbn0gLyAke3JlcG8ubmFtZX08L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPiR7cmVwby5kZXNjcmlwdGlvbn08L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibGktcmVtb3ZlXCI+JiMxMDA2MDwvc3Bhbj5gKTtcblxuICAgICAgICAgICAgICAgIERPTS4kdWxcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkbGkpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJlbmRlcigpO1xuICAgICAgICBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdubyByZXBvcywgaG9sbWVzJyk7XG4gICAgICAgICAgICByZW5kZXIoKTtcbiAgICAgICAgICAgIERPTS4kbGlzdENvbnRhaW5lclxuICAgICAgICAgICAgICAgIC5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgXG4gICAgLy8gcmVuZGVyXG4gICAgZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgIERPTS4kbmV3UmVwb0J0blxuICAgICAgICAgICAgLmh0bWwoJysnKTtcblxuICAgICAgICBET00uJG5ld1JlcG9Vc2VyXG4gICAgICAgICAgICAuYXR0cigncmVxdWlyZWQnLCAndHJ1ZScpXG4gICAgICAgICAgICAuYXR0cigncGxhY2Vob2xkZXInLCAnYXV0aG9yJyk7XG5cbiAgICAgICAgRE9NLiRuZXdSZXBvUmVwb1xuICAgICAgICAgICAgLmF0dHIoJ3JlcXVpcmVkJywgJ3RydWUnKVxuICAgICAgICAgICAgLmF0dHIoJ3BsYWNlaG9sZGVyJywgJ3JlcG8nKTtcblxuICAgICAgICBET00uJG5ld1JlcG9Gb3JtXG4gICAgICAgICAgICAuYWRkQ2xhc3MoJ25ldy1yZXBvLWZvcm0nKVxuICAgICAgICAgICAgLmFwcGVuZChET00uJG5ld1JlcG9Vc2VyKVxuICAgICAgICAgICAgLmFwcGVuZChET00uJG5ld1JlcG9SZXBvKVxuICAgICAgICAgICAgLmFwcGVuZChET00uJG5ld1JlcG9CdG4pO1xuXG4gICAgICAgIERPTS4kbGlzdENvbnRhaW5lclxuICAgICAgICAgICAgLmFkZENsYXNzKCdyZXBvLWxpc3QnKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAuYXBwZW5kKERPTS4kdWwpXG4gICAgICAgICAgICAuYXBwZW5kKERPTS4kbmV3UmVwb0Zvcm0pO1xuICAgICAgICBcbiAgICAgICAgRE9NLiRwXG4gICAgICAgICAgICAuaHRtbChgWW91IGFyZSBjdXJyZW50bHkgdmlld2luZyB0aGUgPHNwYW4gY2xhc3M9XCJyZXBvLXNlbGVjdC1oaWdobGlnaHRcIj4ke3NlbGVjdGVkUmVwb30mI3gyNUJDOzwvc3Bhbj4gcmVwb3NpdG9yeS5gKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgRE9NLiRzZWxlY3RDb250YWluZXJcbiAgICAgICAgICAgIC5hcHBlbmQoRE9NLiRwKVxuICAgICAgICAgICAgLmFwcGVuZChET00uJGxpc3RDb250YWluZXIpO1xuXG4gICAgfVxuXG5cbiAgICBmdW5jdGlvbiBnZXRSZXBvcyh1c2VyTmFtZSkge1xuICAgICAgICBcbiAgICAgICAgaWYgKGNoZWNrU3RvcmFnZSkge1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ1VzaW5nIGxvY2FsIHN0b3JhZ2UnKTsgLy8gZGlhZ1xuICAgICAgICAgICAgcG9wdWxhdGVSZXBvcyhMUy5nZXREYXRhKCdkZXYtZGFzaC1yZXBvcycpKTsgLy8gY2FjaGUgJ3JlcG9zJyB0byBtb2R1bGUgc2NvcGUgdmFyXG4gICAgICAgICAgICBwb3B1bGF0ZU1lbnUocmVwb3MpOyAgLy8gYnVpbGQgdGhlIGxpc3RcbiAgICAgICAgICAgIFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBnZXQgdXNlcidzIG1vc3QgcmVjZW50bHktYWN0aXZlIHJlcG9zIGZyb20gR2l0SHViXG4gICAgICAgICAgICAkLmdldEpTT04oJ2h0dHBzOi8vYXBpLmdpdGh1Yi5jb20vdXNlcnMvJyArXG4gICAgICAgICAgICAgICAgICAgICAgdXNlck5hbWUgK1xuICAgICAgICAgICAgICAgICAgICAgICcvcmVwb3M/c29ydD11cGRhdGVkJylcbiAgICAgICAgICAgICAgICAudGhlbiggKHJlcG9zKSA9PiByZXBvcy5zbGljZSgwLCAzKSApIC8vIG1vc3QtcmVjZW50IDMgcmVwb3NcbiAgICAgICAgICAgICAgICAudGhlbihwb3B1bGF0ZVJlcG9zKSAgLy8gY2FjaGUgcmVwb3MgdG8gbW9kdWxlIHNjb3BlICdyZXBvcydhcnJheVxuICAgICAgICAgICAgICAgIC50aGVuKHNhdmVSZXBvcykgICAgICAvLyBzYXZlIHRoZW0gaW4gbG9jYWwgc3RvcmFnZVxuICAgICAgICAgICAgICAgIC50aGVuKHBvcHVsYXRlTWVudSk7ICAvLyBidWlsZCB0aGUgbGlzdFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgXG4gICAgLy8gcHVibGljIGluaXQgbWV0aG9kXG4gICAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgICAgY2FjaGVEb20oKTtcbiAgICAgICAgYmluZEV2ZW50cygpO1xuICAgICAgICBcbiAgICAgICAgRE9NLiRsaXN0Q29udGFpbmVyLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIC8vIGV4cG9ydCBwdWJsaWMgYXBpXG4gICAgcmV0dXJuIHtcbiAgICAgICAgaW5pdDogaW5pdCxcbiAgICAgICAgZ2V0UmVwb3M6IGdldFJlcG9zXG4gICAgfTtcbiAgICBcblxufShqUXVlcnkpKTsiLCIvKiBqc2hpbnQgZXN2ZXJzaW9uOjYgKi9cbi8qIGdsb2JhbHMgJCwgY29uc29sZSwgTFMgKi9cblxudmFyIEJhY2tncm91bmRzID0gKGZ1bmN0aW9uKCkge1xuICAgIFxuICAgICd1c2Ugc3RyaWN0JztcbiAgICBcbiAgICB2YXIgRE9NID0ge30sXG4gICAgICAgIGJnQXJyID0gWycwMDEnLCAnMDAyJywgJzAwMycsICcwMDQnLCAnMDA1JywgJzAwNicsICcwMDcnLCAnMDA4J10sXG4gICAgICAgIHRvZGF5ID0gbWFrZURhdGUoKSxcbiAgICAgICAgc3RhdGUgPSBsb2FkU3RhdGUoKTtcbiAgICBcbiAgICBcbiAgICAvLyBjYWNoZSBET00gZWxlbWVudHNcbiAgICBmdW5jdGlvbiBjYWNoZURvbSgpIHtcbiAgICAgICAgRE9NLiRib2R5ID0gJCgnYm9keScpO1xuICAgIH1cbiAgICBcbiAgICBcbiAgICAvLyBtYWtlIGFuZCBmb3JtYXQgZGF0ZSBzdHJpbmdcbiAgICBmdW5jdGlvbiBtYWtlRGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKClcbiAgICAgICAgICAgIC50b0RhdGVTdHJpbmcoKSAgIC8vIGNvbnZlcnQgb2JqZWN0IHRvIGEgc3RyaW5nXG4gICAgICAgICAgICAuc2xpY2UoNCwgMTUpOyAgICAvLyBqdXN0IHdhbnQgJ01NIEREIFlZWVknXG4gICAgfVxuICAgIFxuICAgIFxuICAgIC8vIGxvYWQgc3RhdGUgZnJvbSBzdG9yYWdlXG4gICAgZnVuY3Rpb24gbG9hZFN0YXRlKCkge1xuICAgICAgICB2YXIgc3RvcmVkU3RhdGUgPSBMUy5nZXREYXRhKCdkZXYtZGFzaC1iZycpLFxuICAgICAgICAgICAgaW1nSW5keCAgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBiZ0Fyci5sZW5ndGgpLFxuICAgICAgICAgICAgbmV3U3RhdGUgPSB7XG4gICAgICAgICAgICAgICAgaW1nTmFtZTogYmdBcnJbaW1nSW5keF0sXG4gICAgICAgICAgICAgICAgZGF0ZTogbWFrZURhdGUoKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdTdG9yZWQgU3RhdGU6ICcsIHN0b3JlZFN0YXRlKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiAoc3RvcmVkU3RhdGUpID8gc3RvcmVkU3RhdGUgOiBuZXdTdGF0ZTtcbiAgICB9XG4gICAgXG4gICAgICAgIFxuICAgIC8vIHNldCBiYWNrZ3JvdW5kIGltYWdlXG4gICAgLy8gbmV3IGltYWdlIGVhY2ggbmV3IGRheS4gU28gd2UgMXN0IGNvbXBhcmUgdG9kYXkgd2l0aFxuICAgIC8vIGxvY2FsIHN0b3JhZ2UgZGF0ZSwgdXBkYXRlIGxvY2FsIHN0b3JhZ2UgaWYgZGlmZmVyZW50LFxuICAgIC8vIGFuZCB0aGVuIHNldCB0aGUgYmFja2dyb3VuZCBpbWFnZSBDU1Mgb24gPGJvZHk+XG4gICAgZnVuY3Rpb24gcGlja0JhY2tncm91bmQoKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdUb2RheTogJywgdG9kYXkpOyAgLy8gZm9yIGRpYWdcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ1N0YXRlOiAnLCBzdGF0ZSk7ICAvLyBmb3IgZGlhZ1xuICAgICAgICBcbiAgICAgICAgdmFyIGN1cm50SW1nSW5keCA9IGJnQXJyLmluZGV4T2Yoc3RhdGUuaW1nTmFtZSksXG4gICAgICAgICAgICBuZXdJbWdJbmRleCxcbiAgICAgICAgICAgIG5ld0ltZ05hbWU7XG4gICAgICAgIFxuICAgICAgICBpZiAobmV3IERhdGUodG9kYXkpID4gbmV3IERhdGUoc3RhdGUuZGF0ZSkpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gZmluZCBuZXcgaW1hZ2UgaW5kZXhcbiAgICAgICAgICAgIG5ld0ltZ0luZGV4ID0gKGN1cm50SW1nSW5keCA9PT0gNykgPyAwIDogY3VybnRJbWdJbmR4ICsgMTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gZmluZCBuZXcgaW1hZ2Ugc3RyaW5nIG5hbWVcbiAgICAgICAgICAgIG5ld0ltZ05hbWUgPSBiZ0FycltuZXdJbWdJbmRleF07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIHNhdmUgbmV3IGltYWdlIG5hbWUgJiBkYXRlIHRvIGxvY2FsIHN0b3JhZ2UgXG4gICAgICAgICAgICBMUy5zZXREYXRhKCdkZXYtZGFzaC1iZycsIHtcbiAgICAgICAgICAgICAgICBpbWdOYW1lOiBuZXdJbWdOYW1lLFxuICAgICAgICAgICAgICAgIGRhdGU6IHRvZGF5XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gdXBkYXRlIHRoZSBET01cbiAgICAgICAgICAgIHJlbmRlcihuZXdJbWdOYW1lKTtcbiAgICAgICAgICAgIFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVuZGVyKHN0YXRlLmltZ05hbWUpO1xuICAgICAgICAgICAgLy8gc2F2ZSBjdXJyZW50IGltYWdlIG5hbWUgJiBkYXRlIHRvIGxvY2FsIHN0b3JhZ2UgXG4gICAgICAgICAgICBMUy5zZXREYXRhKCdkZXYtZGFzaC1iZycsIHtcbiAgICAgICAgICAgICAgICBpbWdOYW1lOiBzdGF0ZS5pbWdOYW1lLFxuICAgICAgICAgICAgICAgIGRhdGU6IHRvZGF5XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgLy8gcmVuZGVyIHRvIERPTVxuICAgIGZ1bmN0aW9uIHJlbmRlcihpbWFnZU5hbWUpIHtcbiAgICAgICAgRE9NLiRib2R5XG4gICAgICAgICAgICAuY3NzKCdiYWNrZ3JvdW5kLWltYWdlJywgJ3VybChkaXN0L2Fzc2V0cy8nICsgaW1hZ2VOYW1lICsgJy5qcGcpJyk7XG4gICAgfVxuICAgIFxuICAgIFxuICAgIC8vIHB1YmxpYyBpbml0IG1ldGhvZFxuICAgIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICAgIGNhY2hlRG9tKCk7XG4gICAgICAgIHBpY2tCYWNrZ3JvdW5kKCk7XG4gICAgfVxuICAgIFxuICAgIFxuICAgIC8vIHJldHVybiBwdWJsaWMgYXBpXG4gICAgcmV0dXJuIHtcbiAgICAgICAgaW5pdDogaW5pdFxuICAgIH07XG4gICAgXG59KCkpOyIsIi8qIGpzaGludCBlc3ZlcnNpb246NiAqL1xuLyogZ2xvYmFscyAkLCBkb2N1bWVudCwgY29uc29sZSAqL1xuXG4vKiBhcHAuanMgY2FsbCBlYWNoIG1vZHVsZSdzIHB1YmxpYyBtZXRob2QocykgICovXG5cbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgICBcbiAgICBCYWNrZ3JvdW5kcy5pbml0KCk7XG4gICAgXG4gICAgUmVwb1NlbGVjdC5pbml0KCk7XG4gICAgXG4gICAgR3JlZXQuaW5pdCgpO1xuICAgIFxuICAgIEhpdEFwaS5pbml0KCk7XG4gICAgXG4gICAgUmVuZGVyVGFibGUuaW5pdCgpO1xuXG4gICAgUmVuZGVyQ2hhcnQuaW5pdCgpO1xuXG59KTsiXX0=
