"use strict";$(document).ready(function(){HitApi.getEvents(),RenderTable.render()});var HitApi=function(){function e(e){return{type:e.type,date:t(e.created_at),actor:e.actor.display_login,avatar:e.actor.avatar_url,payload:e.payload}}function t(e){return new Date(e).toDateString().slice(0,15).replace(/ 0/g," ")}function a(e){e.preventDefault();var t={url:"https://api.github.com/repos",user:e.currentTarget[0].value,repo:e.currentTarget[1].value,route:"events"},a=t.url+"/"+t.user+"/"+t.repo+"/"+t.route;$.getJSON(a).then(n)}function n(t){var a=["PushEvent","CommitCommentEvent"],n=["IssuesEvent","IssueCommentEvent","ProjectEvent","ProjectCardEvent","ProjectColumnEvent"],p=["CreateEvent","PullRequestEvent","PullRequestReviewEvent","PullRequestReviewCommentEvent"],r=t.filter(function(e){return a.indexOf(e.type)!==-1}).map(e),l=t.filter(function(e){return n.indexOf(e.type)!==-1}).map(e),d=t.filter(function(e){return p.indexOf(e.type)!==-1}).map(e);RenderTable.render(r,l,d)}var p=$("#input-form");return p.submit(a),{getEvents:a}}(),RenderTable=function(){function e(e,r,l){p.empty(),e.length>0&&t(e),r.length>0&&a(r),l.length>0&&n(l)}function t(e){var t=$(document.createElement("div")),a=$(document.createElement("ul"));e.forEach(function(e){if("PushEvent"===e.type)e.payload.commits.forEach(function(t){var n=$(document.createElement("li")),p=$(document.createElement("img")),r=$(document.createElement("p")),l=$(document.createElement("span")),d=$(document.createElement("a")),o=t.url.replace(/\/\/api./,"//").replace(/\/repos\//,"/").replace(/commits/,"commit");p.attr("src",e.avatar),d.attr("target","_blank").attr("href",o).html('<span class="bolder">'+t.sha.slice(0,6)+"</span>"),l.text('"'+t.message+'"'),r.append('<span class="bolder">'+e.actor+"</span> committed ").append(d).append(" on "+e.date+": ").append(l),n.append(p).append(r),a.append(n)});else{var t=$(document.createElement("li")),n=$(document.createElement("img")),p=$(document.createElement("p")),r=$(document.createElement("span")),l=$(document.createElement("a"));n.attr("src",e.avatar),l.attr("target","_blank").attr("href",e.payload.comment.html_url).html('<span class="bolder">'+e.payload.comment.commit_id.slice(0,6)+"</span>"),r.text('"'+e.payload.comment.body+'"'),p.append('<span class="bolder">'+e.actor+"</span> commented on ").append(l).append(" on "+e.date+": ").append(r),t.append(n).append(p),a.append(t)}}),a.addClass("col-list"),t.addClass("col-1of3").append("<h3>"+e.length+" Commit-Related Events</h3>").append(a),p.append(t)}function a(e){var t=$(document.createElement("div")),a=$(document.createElement("ul"));e.forEach(function(e){var t=$(document.createElement("li")),n=$(document.createElement("img")),p=$(document.createElement("p")),r=$(document.createElement("a"));n.attr("src",e.avatar),r.attr("target","_blank"),"IssuesEvent"===e.type?(r.attr("href",e.payload.issue.html_url).html('<span class="bolder">issue '+e.payload.issue.number+"</span>"),p.append('<span class="bolder">'+e.actor+"</span> "+e.payload.action+" ").append(r).append(" on "+e.date+': "'+e.payload.issue.title+'"'),t.append(n).append(p),a.append(t)):"IssueCommentEvent"===e.type&&(r.attr("href",e.payload.comment.html_url).html('<span class="bolder">issue '+e.payload.issue.number+"</span>"),p.append('<span class="bolder">'+e.actor+"</span> commented on ").append(r).append(" on "+e.date+': "'+e.payload.comment.body+'"'),t.append(n).append(p),a.append(t))}),a.addClass("col-list"),t.addClass("col-1of3").append("<h3>"+e.length+" Todo-Related Events</h3>").append(a),p.append(t)}function n(e){var t,a=$(document.createElement("div")),n=$(document.createElement("ul"));e.forEach(function(e){var a=$(document.createElement("li")),p=$(document.createElement("img")),r=$(document.createElement("p")),l=$(document.createElement("a"));p.attr("src",e.avatar),l.attr("target","_blank"),"CreateEvent"===e.type?(r.append(['<span class="bolder">'+e.actor+"</span>","created",e.payload.ref_type,'<span class="bolder">'+e.payload.ref+"</span>","on",e.date].join(" ")),a.append(p).append(r),n.append(a)):"PullRequestEvent"===e.type?(t=e.payload.pull_request.url.replace(/\/\/api./,"//").replace(/\/repos\//,"/").replace(/pulls/,"pull"),l.attr("href",t).html('<span class="bolder">pull request '+e.payload.pull_request.number+"</span>"),r.append('<span class="bolder">'+e.actor+"</span>").append(" "+e.payload.action+" ").append(l).append(" on "+e.date),a.append(p).append(r),n.append(a)):"PullRequestReviewEvent"===e.type?(l.attr("href",e.payload.pull_request.html_url).text(e.payload.pull_request.title),r.append([e.actor,e.payload.action,"review of "].join(" ")).append(l).append(" on"+e.date),a.append(p).append(r),n.append(a)):"PullRequestReviewCommentEvent"===e.type&&(l.attr("href",e.payload.comment.html_url).text(e.payload.comment.body),r.append(['<span class="bolder">'+e.actor+"</span>",e.payload.action,"pull request comment "].join(" ")).append(l).append(" on"+e.date),a.append(p).append(r),n.append(a))}),n.addClass("col-list"),a.addClass("col-1of3").append("<h3>"+e.length+" Merge-Related Events</h3>").append(n),p.append(a)}var p=$(".container");return{render:e}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImdldC1ldmVudHMuanMiLCJyZW5kZXItdGFibGUuanMiXSwibmFtZXMiOlsiJCIsImRvY3VtZW50IiwicmVhZHkiLCJIaXRBcGkiLCJnZXRFdmVudHMiLCJSZW5kZXJUYWJsZSIsInJlbmRlciIsInByZXBhcmVFdmVudHMiLCJlIiwidHlwZSIsImRhdGUiLCJmb3JtYXREYXRlcyIsImNyZWF0ZWRfYXQiLCJhY3RvciIsImRpc3BsYXlfbG9naW4iLCJhdmF0YXIiLCJhdmF0YXJfdXJsIiwicGF5bG9hZCIsIkRhdGUiLCJ0b0RhdGVTdHJpbmciLCJzbGljZSIsInJlcGxhY2UiLCJwcmV2ZW50RGVmYXVsdCIsImFwaSIsInVybCIsInVzZXIiLCJjdXJyZW50VGFyZ2V0IiwidmFsdWUiLCJyZXBvIiwicm91dGUiLCJyZXBvRXZlbnRzIiwiZ2V0SlNPTiIsInRoZW4iLCJoYW5kbGVSZXNwb25zZSIsInJlc3BvbnNlIiwiY29tbWl0VHlwZXMiLCJ0b2RvVHlwZXMiLCJtZXJnZVR5cGVzIiwiY29tbWl0RXZlbnRzIiwiZmlsdGVyIiwiaW5kZXhPZiIsIm1hcCIsInRvZG9FdmVudHMiLCJtZXJnZUV2ZW50cyIsIiRpbnB1dEZvcm0iLCJzdWJtaXQiLCIkY29udGFpbmVyIiwiZW1wdHkiLCJsZW5ndGgiLCJyZW5kZXJDb21taXRFdmVudHMiLCJyZW5kZXJUb2RvRXZlbnRzIiwicmVuZGVyTWVyZ2VFdmVudHMiLCJlcyIsIiRjb2x1bW4iLCJjcmVhdGVFbGVtZW50IiwiJGxpc3QiLCJmb3JFYWNoIiwiZXZ0IiwiY29tbWl0cyIsImNvbW1pdCIsIiRsaXN0SXRlbSIsIiRpbWciLCIkcGFyYWdyYXBoIiwiJHBhcmFTcGFuIiwiJGEiLCJjbGVhblVybCIsImF0dHIiLCJodG1sIiwic2hhIiwidGV4dCIsIm1lc3NhZ2UiLCJhcHBlbmQiLCJjb21tZW50IiwiaHRtbF91cmwiLCJjb21taXRfaWQiLCJib2R5IiwiYWRkQ2xhc3MiLCJpc3N1ZSIsIm51bWJlciIs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eEMsUUFBQXVELFFBQUFDLFVBQ0FKLEtBQUFaLEVBQUF4QyxRQUFBdUQsUUFBQUcsTUFFQWIsRUFDQVMsUUFBQSx3QkFDQWQsRUFBQTVDLE1BREEsVUFFQTRDLEVBQUF4QyxRQUFBOEQsT0FDQSx5QkFDQUksS0FBQSxNQUNBWixPQUFBUCxHQUNBTyxPQUFBLE1BQUFkLEVBQUEvQyxNQUVBa0QsRUFDQVcsT0FBQVYsR0FDQVUsT0FBQVQsR0FFQVAsRUFDQWdCLE9BQUFYLE1BS0FMLEVBQ0FxQixTQUFBLFlBRUF2QixFQUNBdUIsU0FBQSxZQUNBTCxPQUZBLE9BRUFuQixFQUFBSixPQUZBLDhCQUdBdUIsT0FBQWhCLEdBRUFULEVBQUF5QixPQUFBbEIsR0EvV0EsR0FBQVAsR0FBQTlDLEVBQUEsYUFxWEEsUUFDQU0sT0FBQUEiLCJmaWxlIjoiZGV2LWRhc2guanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBqc2hpbnQgZXN2ZXJzaW9uOjYgKi9cbi8qIGdsb2JhbHMgJCwgZG9jdW1lbnQsIGNvbnNvbGUgKi9cblxuLyogYXBwLmpzIGNhbGwgZWFjaCBtb2R1bGUncyBwdWJsaWMgbWV0aG9kKHMpICAqL1xuXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XG4gICAgXG4gICAgLy8gQmFja2dyb3VuZHMuaW5pdCgpOyAgLy8gdG9kb1xuICAgIFxuICAgIC8vIEdyZWV0ZXIuaW5pdCgpOyAgLy8gdG9kb1xuICAgIFxuICAgIEhpdEFwaS5nZXRFdmVudHMoKTtcbiAgICBcbiAgICBSZW5kZXJUYWJsZS5yZW5kZXIoKTtcblxuICAgIC8vIFJlbmRlckdyYXBoLnJlbmRlcigpOyAgLy8gdG9kb1xuXG59KTsiLCIvKiBqc2hpbnQgZXN2ZXJzaW9uOjYgKi9cbi8qIGdsb2JhbHMgJCwgZG9jdW1lbnQsIGNvbnNvbGUgKi9cblxudmFyIEhpdEFwaSA9IChmdW5jdGlvbiAoKSB7XG5cbiAgICAvLyBjYWNoZSBET00gZWxlbWVudHNcbiAgICB2YXIgJGlucHV0Rm9ybSA9ICQoJyNpbnB1dC1mb3JtJyk7XG5cbiAgICAvLyBiaW5kIGV2ZW50c1xuICAgICRpbnB1dEZvcm0uc3VibWl0KGdldEV2ZW50cyk7XG5cblxuICAgIC8vIHByZXBhcmUgZXZlbnRzIHByaW9yIHRvIGNhbGxpbmcgcmVuZGVyZXJzXG4gICAgZnVuY3Rpb24gcHJlcGFyZUV2ZW50cyhlKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlICAgIDogZS50eXBlLFxuICAgICAgICAgICAgZGF0ZSAgICA6IGZvcm1hdERhdGVzKGUuY3JlYXRlZF9hdCksXG4gICAgICAgICAgICBhY3RvciAgIDogZS5hY3Rvci5kaXNwbGF5X2xvZ2luLFxuICAgICAgICAgICAgYXZhdGFyICA6IGUuYWN0b3IuYXZhdGFyX3VybCxcbiAgICAgICAgICAgIHBheWxvYWQgOiBlLnBheWxvYWRcbiAgICAgICAgfTtcbiAgICB9XG5cblxuICAgIC8vIGZvcm1hdCBkYXRlc1xuICAgIGZ1bmN0aW9uIGZvcm1hdERhdGVzKGRhdGUpIHtcblxuICAgICAgICByZXR1cm4gbmV3IERhdGUoZGF0ZSkgICAgIC8vIG1ha2UgZGF0ZSBvYmplY3QgZm9yIGRheSAmIG1vbnRoIGFiYnJldlxuICAgICAgICAgICAgLnRvRGF0ZVN0cmluZygpICAgICAgIC8vIGNvbnZlcnQgb2JqZWN0IHRvIGEgc3RyaW5nXG4gICAgICAgICAgICAuc2xpY2UoMCwgMTUpICAgICAgICAgLy8gcmVtb3ZlIGV2ZXJ5dGhpbmcgYWZ0ZXIgdGhlIFlZWVlcbiAgICAgICAgICAgIC5yZXBsYWNlKC8gMC9nLCAnICcpOyAvLyByZW1vdmUgbGVhZGluZyB6ZXJvcyAoZXguICcwNCcgPT4gJzQnKVxuICAgIH1cblxuICAgIFxuICAgIC8vIGdldCBnaXRodWIgZXZlbnRzXG4gICAgZnVuY3Rpb24gZ2V0RXZlbnRzKGUpIHtcblxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgdmFyIGFwaSA9IHtcbiAgICAgICAgICAgIHVybCAgIDogJ2h0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3MnLFxuICAgICAgICAgICAgdXNlciAgOiBlLmN1cnJlbnRUYXJnZXRbMF0udmFsdWUsXG4gICAgICAgICAgICByZXBvICA6IGUuY3VycmVudFRhcmdldFsxXS52YWx1ZSxcbiAgICAgICAgICAgIHJvdXRlIDogJ2V2ZW50cydcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIHJlcG9FdmVudHMgPSBgJHthcGkudXJsfS8ke2FwaS51c2VyfS8ke2FwaS5yZXBvfS8ke2FwaS5yb3V0ZX1gO1xuXG4gICAgICAgICQuZ2V0SlNPTihyZXBvRXZlbnRzKS50aGVuKGhhbmRsZVJlc3BvbnNlKTtcbiAgICB9XG5cblxuICAgIC8vIGhhbmRsZSBHSCBKU09OIHJlc3BvbnNlIGRhdGFcbiAgICBmdW5jdGlvbiBoYW5kbGVSZXNwb25zZShyZXNwb25zZSkge1xuXG4gICAgICAgIC8vIHdlJ3JlIHNwbGl0dGluZyBldmVudHMgaW50byAzIGNhdGVnb3JpZXMsIGJhc2VkIG9uIGV2ZW50IHR5cGVcbiAgICAgICAgdmFyIGNvbW1pdFR5cGVzID0gWydQdXNoRXZlbnQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbW1pdENvbW1lbnRFdmVudCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdG9kb1R5cGVzID0gWydJc3N1ZXNFdmVudCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgJ0lzc3VlQ29tbWVudEV2ZW50JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAnUHJvamVjdEV2ZW50JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAnUHJvamVjdENhcmRFdmVudCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgJ1Byb2plY3RDb2x1bW5FdmVudCdcbiAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIG1lcmdlVHlwZXMgPSBbJ0NyZWF0ZUV2ZW50JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJ1B1bGxSZXF1ZXN0RXZlbnQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAnUHVsbFJlcXVlc3RSZXZpZXdFdmVudCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICdQdWxsUmVxdWVzdFJldmlld0NvbW1lbnRFdmVudCdcbiAgICAgICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBjcmVhdGUgYXJyYXkgb2YgY29tbWl0LXJlbGF0ZWQgZXZlbnRzXG4gICAgICAgICAgICBjb21taXRFdmVudHMgPSByZXNwb25zZVxuICAgICAgICAgICAgICAgIC5maWx0ZXIoKGUpID0+IGNvbW1pdFR5cGVzLmluZGV4T2YoZS50eXBlKSAhPT0gLTEpXG4gICAgICAgICAgICAgICAgLm1hcChwcmVwYXJlRXZlbnRzKSxcblxuICAgICAgICAgICAgLy8gY3JlYXRlIGFycmF5IG9mIHRvZG8tcmVsYXRlZCBldmVudHNcbiAgICAgICAgICAgIHRvZG9FdmVudHMgPSByZXNwb25zZVxuICAgICAgICAgICAgICAgIC5maWx0ZXIoKGUpID0+IHRvZG9UeXBlcy5pbmRleE9mKGUudHlwZSkgIT09IC0xKVxuICAgICAgICAgICAgICAgIC5tYXAocHJlcGFyZUV2ZW50cyksXG5cbiAgICAgICAgICAgIC8vIGNyZWF0ZSBidWlsZCBhcnJheSBvZiBtZXJnZS1yZWxhdGVkIGV2ZW50c1xuICAgICAgICAgICAgbWVyZ2VFdmVudHMgPSByZXNwb25zZVxuICAgICAgICAgICAgICAgIC5maWx0ZXIoKGUpID0+IG1lcmdlVHlwZXMuaW5kZXhPZihlLnR5cGUpICE9PSAtMSlcbiAgICAgICAgICAgICAgICAubWFwKHByZXBhcmVFdmVudHMpO1xuICAgICAgICBcbiAgICAgICAgLy8gY2FsbCByZW5kZXJlcnNcbiAgICAgICAgUmVuZGVyVGFibGUucmVuZGVyKGNvbW1pdEV2ZW50cywgdG9kb0V2ZW50cywgbWVyZ2VFdmVudHMpO1xuICAgICAgICAvLyBSZW5kZXJHcmFwaC5yZW5kZXIoY29tbWl0RXZlbnRzLCB0b2RvRXZlbnRzLCBtZXJnZUV2ZW50cyk7ICAvLyB0byBkb1xuICAgIH1cbiAgICBcbiAgICBcbiAgICAvLyByZXR1cm4gcHVibGljIG1ldGhvZFxuICAgIHJldHVybiB7XG4gICAgICAgIGdldEV2ZW50czogZ2V0RXZlbnRzXG4gICAgfTtcblxufSgpKTtcbiIsIi8qIGpzaGludCBlc3ZlcnNpb246NiAqL1xuLyogZ2xvYmFscyAkLCBkb2N1bWVudCAqL1xuXG52YXIgUmVuZGVyVGFibGUgPSAoZnVuY3Rpb24gKCkge1xuXG4gICAgLy8gY2FjaGUgRE9NIGVsZW1lbnRzXG4gICAgdmFyICRjb250YWluZXIgPSAkKCcuY29udGFpbmVyJyk7XG5cblxuICAgIC8vIHB1YmxpYyByZW5kZXIgbWV0aG9kIGNhbGxzIGNhdGVnb3J5IHJlbmRlcmVycyBpZiBjYXRlZ29yeSBoYXMgZXZlbnRzXG4gICAgZnVuY3Rpb24gcmVuZGVyKGNvbW1pdEV2ZW50cywgdG9kb0V2ZW50cywgbWVyZ2VFdmVudHMpIHtcblxuICAgICAgICAvLyBjbGVhciBwcmV2aW91cyByZXN1bHRzXG4gICAgICAgICRjb250YWluZXIuZW1wdHkoKTtcblxuICAgICAgICBpZiAoY29tbWl0RXZlbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHJlbmRlckNvbW1pdEV2ZW50cyhjb21taXRFdmVudHMpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRvZG9FdmVudHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmVuZGVyVG9kb0V2ZW50cyh0b2RvRXZlbnRzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChtZXJnZUV2ZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZW5kZXJNZXJnZUV2ZW50cyhtZXJnZUV2ZW50cyk7XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIC8vIHJlbmRlciBjb21taXQgZXZlbnRzXG4gICAgZnVuY3Rpb24gcmVuZGVyQ29tbWl0RXZlbnRzKGVzKSB7XG5cbiAgICAgICAgLy8gZ2V0cyBQdXNoRXZlbnRzICYgQ29tbWl0Q29tbWVudEV2ZW50c1xuXG4gICAgICAgIHZhciAkY29sdW1uID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSksXG4gICAgICAgICAgICAkbGlzdCAgID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpKTtcblxuICAgICAgICBlcy5mb3JFYWNoKGZ1bmN0aW9uIChldnQpIHtcblxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZXZ0KTtcblxuICAgICAgICAgICAgaWYgKGV2dC50eXBlID09PSAnUHVzaEV2ZW50Jykge1xuXG4gICAgICAgICAgICAgICAgLy8gd2hlbiBpdCdzIGEgcHVzaCBldmVudCwgZXh0cmFjdCB0aGUgY29tbWl0c1xuICAgICAgICAgICAgICAgIGV2dC5wYXlsb2FkLmNvbW1pdHMuZm9yRWFjaChmdW5jdGlvbiAoY29tbWl0KSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyICRsaXN0SXRlbSAgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJykpLFxuICAgICAgICAgICAgICAgICAgICAgICAgJGltZyAgICAgICA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJykpLFxuICAgICAgICAgICAgICAgICAgICAgICAgJHBhcmFncmFwaCA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICRwYXJhU3BhbiAgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKSksXG4gICAgICAgICAgICAgICAgICAgICAgICAkYSAgICAgICAgID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJykpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnZlcnQgY29tbWl0IFVSTCBpbnRvIHJlZ3VsYXIgZ2l0aHViLmNvbSBVUkxcbiAgICAgICAgICAgICAgICAgICAgLy8gZnJvbTogaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9yZXBvcy97dXNlcn0ve3JlcG99L2NvbW1pdHMve3NoYX1cbiAgICAgICAgICAgICAgICAgICAgLy8gICB0bzogaHR0cHM6Ly9naXRodWIuY29tL3t1c2VyfS97cmVwb30vY29tbWl0L3tzaGF9XG4gICAgICAgICAgICAgICAgICAgIHZhciBjbGVhblVybCA9IChjb21taXQudXJsKVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlICdhcGkuJ1xuICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcL1xcL2FwaS4vLCAnXFwvXFwvJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSAncmVwb3MvJ1xuICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcL3JlcG9zXFwvLywgJ1xcLycpXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyByZXBsYWNlICdjb21taXRzJyB3aXRoICdjb21taXQnXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvY29tbWl0cy8sICdjb21taXQnKTtcblxuICAgICAgICAgICAgICAgICAgICAkaW1nLmF0dHIoJ3NyYycsIGV2dC5hdmF0YXIpO1xuXG4gICAgICAgICAgICAgICAgICAgICRhXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigndGFyZ2V0JywgJ19ibGFuaycpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignaHJlZicsIGNsZWFuVXJsKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmh0bWwoYDxzcGFuIGNsYXNzPVwiYm9sZGVyXCI+JHsoY29tbWl0LnNoYSkuc2xpY2UoMCw2KX08L3NwYW4+YCk7XG5cbiAgICAgICAgICAgICAgICAgICAgJHBhcmFTcGFuXG4gICAgICAgICAgICAgICAgICAgICAgICAudGV4dChgXCIke2NvbW1pdC5tZXNzYWdlfVwiYCk7XG5cbiAgICAgICAgICAgICAgICAgICAgJHBhcmFncmFwaFxuICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChgPHNwYW4gY2xhc3M9XCJib2xkZXJcIj4ke2V2dC5hY3Rvcn08L3NwYW4+IGNvbW1pdHRlZCBgKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkYSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoYCBvbiAke2V2dC5kYXRlfTogYClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJHBhcmFTcGFuKTtcblxuICAgICAgICAgICAgICAgICAgICAkbGlzdEl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJGltZylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJHBhcmFncmFwaCk7XG5cbiAgICAgICAgICAgICAgICAgICAgJGxpc3RcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJGxpc3RJdGVtKTtcblxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB9IGVsc2UgeyAvLyBlbHNlIGl0J3MgYSBjb21tZW50XG5cbiAgICAgICAgICAgICAgICB2YXIgJGxpc3RJdGVtICA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKSksXG4gICAgICAgICAgICAgICAgICAgICRpbWcgICAgICAgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpKSxcbiAgICAgICAgICAgICAgICAgICAgJHBhcmFncmFwaCA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpKSxcbiAgICAgICAgICAgICAgICAgICAgJHBhcmFTcGFuICA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpKSxcbiAgICAgICAgICAgICAgICAgICAgJGEgICAgICAgICA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpKTtcblxuICAgICAgICAgICAgICAgICRpbWcuYXR0cignc3JjJywgZXZ0LmF2YXRhcik7XG5cbiAgICAgICAgICAgICAgICAkYVxuICAgICAgICAgICAgICAgICAgICAuYXR0cigndGFyZ2V0JywgJ19ibGFuaycpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdocmVmJywgZXZ0LnBheWxvYWQuY29tbWVudC5odG1sX3VybClcbiAgICAgICAgICAgICAgICAgICAgLmh0bWwoYDxzcGFuIGNsYXNzPVwiYm9sZGVyXCI+JHsoZXZ0LnBheWxvYWQuY29tbWVudC5jb21taXRfaWQpLnNsaWNlKDAsNil9PC9zcGFuPmApO1xuXG4gICAgICAgICAgICAgICAgJHBhcmFTcGFuXG4gICAgICAgICAgICAgICAgICAgIC50ZXh0KGBcIiR7ZXZ0LnBheWxvYWQuY29tbWVudC5ib2R5fVwiYCk7XG5cbiAgICAgICAgICAgICAgICAkcGFyYWdyYXBoXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoYDxzcGFuIGNsYXNzPVwiYm9sZGVyXCI+JHtldnQuYWN0b3J9PC9zcGFuPiBjb21tZW50ZWQgb24gYClcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkYSlcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChgIG9uICR7ZXZ0LmRhdGV9OiBgKVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCRwYXJhU3Bhbik7XG5cbiAgICAgICAgICAgICAgICAkbGlzdEl0ZW1cbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkaW1nKVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCRwYXJhZ3JhcGgpO1xuXG4gICAgICAgICAgICAgICAgJGxpc3RcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkbGlzdEl0ZW0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0pO1xuXG4gICAgICAgICRsaXN0XG4gICAgICAgICAgICAuYWRkQ2xhc3MoJ2NvbC1saXN0Jyk7XG5cbiAgICAgICAgJGNvbHVtblxuICAgICAgICAgICAgLmFkZENsYXNzKCdjb2wtMW9mMycpXG4gICAgICAgICAgICAuYXBwZW5kKGA8aDM+JHtlcy5sZW5ndGh9IENvbW1pdC1SZWxhdGVkIEV2ZW50czwvaDM+YClcbiAgICAgICAgICAgIC5hcHBlbmQoJGxpc3QpO1xuXG4gICAgICAgICRjb250YWluZXIuYXBwZW5kKCRjb2x1bW4pO1xuXG4gICAgfVxuXG5cbiAgICAvLyByZW5kZXIgdG9kbyBldmVudHNcbiAgICBmdW5jdGlvbiByZW5kZXJUb2RvRXZlbnRzKGVzKSB7XG5cbiAgICAgICAgLy8gZ2V0cyBJc3N1ZXNFdmVudHMsIElzc3VlQ29tbWVudEV2ZW50cywgUHJvamVjdEV2ZW50cyxcbiAgICAgICAgLy8gICBQcm9qZWN0Q2FyZEV2ZW50cywgYW5kIFByb2plY3RDb2x1bW5FdmVudHNcblxuICAgICAgICB2YXIgJGNvbHVtbiA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JykpLFxuICAgICAgICAgICAgJGxpc3QgICA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKSk7XG5cbiAgICAgICAgZXMuZm9yRWFjaChmdW5jdGlvbiAoZXZ0KSB7XG5cbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGV2dCk7XG5cbiAgICAgICAgICAgIHZhciAkbGlzdEl0ZW0gID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpKSxcbiAgICAgICAgICAgICAgICAkaW1nICAgICAgID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKSksXG4gICAgICAgICAgICAgICAgJHBhcmFncmFwaCA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpKSxcbiAgICAgICAgICAgICAgICAkYSAgICAgICAgID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJykpO1xuXG4gICAgICAgICAgICAkaW1nLmF0dHIoJ3NyYycsIGV2dC5hdmF0YXIpO1xuXG4gICAgICAgICAgICAkYS5hdHRyKCd0YXJnZXQnLCAnX2JsYW5rJyk7XG5cbiAgICAgICAgICAgIGlmIChldnQudHlwZSA9PT0gJ0lzc3Vlc0V2ZW50Jykge1xuXG4gICAgICAgICAgICAgICAgJGFcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2hyZWYnLCBldnQucGF5bG9hZC5pc3N1ZS5odG1sX3VybClcbiAgICAgICAgICAgICAgICAgICAgLmh0bWwoYDxzcGFuIGNsYXNzPVwiYm9sZGVyXCI+aXNzdWUgJHtldnQucGF5bG9hZC5pc3N1ZS5udW1iZXJ9PC9zcGFuPmApO1xuXG4gICAgICAgICAgICAgICAgJHBhcmFncmFwaFxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKGA8c3BhbiBjbGFzcz1cImJvbGRlclwiPiR7ZXZ0LmFjdG9yfTwvc3Bhbj4gJHtldnQucGF5bG9hZC5hY3Rpb259IGApXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJGEpXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoYCBvbiAke2V2dC5kYXRlfTogXCIke2V2dC5wYXlsb2FkLmlzc3VlLnRpdGxlfVwiYCk7XG5cbiAgICAgICAgICAgICAgICAkbGlzdEl0ZW1cbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkaW1nKVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCRwYXJhZ3JhcGgpO1xuXG4gICAgICAgICAgICAgICAgJGxpc3RcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkbGlzdEl0ZW0pO1xuXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2dC50eXBlID09PSAnSXNzdWVDb21tZW50RXZlbnQnKSB7XG5cbiAgICAgICAgICAgICAgICAkYVxuICAgICAgICAgICAgICAgICAgICAuYXR0cignaHJlZicsIGV2dC5wYXlsb2FkLmNvbW1lbnQuaHRtbF91cmwpXG4gICAgICAgICAgICAgICAgICAgIC5odG1sKGA8c3BhbiBjbGFzcz1cImJvbGRlclwiPmlzc3VlICR7ZXZ0LnBheWxvYWQuaXNzdWUubnVtYmVyfTwvc3Bhbj5gKTtcblxuICAgICAgICAgICAgICAgICRwYXJhZ3JhcGhcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChgPHNwYW4gY2xhc3M9XCJib2xkZXJcIj4ke2V2dC5hY3Rvcn08L3NwYW4+IGNvbW1lbnRlZCBvbiBgKVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCRhKVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKGAgb24gJHtldnQuZGF0ZX06IFwiJHtldnQucGF5bG9hZC5jb21tZW50LmJvZHl9XCJgKTtcblxuICAgICAgICAgICAgICAgICRsaXN0SXRlbVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCRpbWcpXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJHBhcmFncmFwaCk7XG5cbiAgICAgICAgICAgICAgICAkbGlzdFxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCRsaXN0SXRlbSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vICAgICAgICAgICAgLy8gQ0FOJ1QgR0VUIEdIIFRPIFNFTkQgVVMgUFJPSkVDVC1SRUxBVEVEIEVWRU5UUyAtIFdURj9cbiAgICAgICAgICAgIC8vICAgICAgICAgICAgfSBlbHNlIGlmIChldnQudHlwZSA9PT0gJ1Byb2plY3RFdmVudCcpIHtcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgJGxpc3RcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKGA8bGk+XG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCIke2V2dC5hdmF0YXJ9XCI+XG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+JHtldnQuYWN0b3J9ICR7ZXZ0LnBheWxvYWQuYWN0aW9ufSAke2V2dC5wYXlsb2FkLnByb2plY3QubmFtZX0gb24gJHtldnQuZGF0ZX08L3A+XG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgdGFyZ2V0PVwiX2JsYW5rXCIgaHJlZj1cIiR7ZXZ0LnBheWxvYWQucHJvamVjdC51cmx9XCI+XG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7ZXZ0LnBheWxvYWQucHJvamVjdC5ib2R5fVxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+YCk7XG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgfSBlbHNlIGlmIChldnQudHlwZSA9PT0gJ1Byb2plY3RDYXJkRXZlbnQnKSB7XG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICRsaXN0XG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChgPGxpPlxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiJHtldnQuYXZhdGFyfVwiPlxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPiR7ZXZ0LmFjdG9yfSAke2V2dC5wYXlsb2FkLmFjdGlvbn0gXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgdGFyZ2V0PVwiX2JsYW5rXCIgaHJlZj1cIiR7ZXZ0LnBheWxvYWQucHJvamVjdF9jYXJkLnVybH1cIj5cbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtldnQucGF5bG9hZC5wcm9qZWN0X2NhcmQubm90ZX1cbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb24gJHtldnQuZGF0ZX08L3A+XG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPmApO1xuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZ0LnR5cGUgPT09ICdQcm9qZWN0Q29sdW1uRXZlbnQnKSB7XG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICRsaXN0XG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChgPGxpPlxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiJHtldnQuYXZhdGFyfVwiPlxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPiR7ZXZ0LmFjdG9yfSAke2V2dC5wYXlsb2FkLmFjdGlvbn0gXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgdGFyZ2V0PVwiX2JsYW5rXCIgaHJlZj1cIiR7ZXZ0LnBheWxvYWQucHJvamVjdF9jb2x1bW4udXJsfVwiPlxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2V2dC5wYXlsb2FkLnByb2plY3RfY29sdW1uLm5hbWV9XG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uICR7ZXZ0LmRhdGV9PC9wPlxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5gKTtcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgfVxuXG4gICAgICAgIH0pO1xuXG4gICAgICAgICRsaXN0XG4gICAgICAgICAgICAuYWRkQ2xhc3MoJ2NvbC1saXN0Jyk7XG5cbiAgICAgICAgJGNvbHVtblxuICAgICAgICAgICAgLmFkZENsYXNzKCdjb2wtMW9mMycpXG4gICAgICAgICAgICAuYXBwZW5kKGA8aDM+JHtlcy5sZW5ndGh9IFRvZG8tUmVsYXRlZCBFdmVudHM8L2gzPmApXG4gICAgICAgICAgICAuYXBwZW5kKCRsaXN0KTtcblxuICAgICAgICAkY29udGFpbmVyLmFwcGVuZCgkY29sdW1uKTtcblxuICAgIH1cblxuXG4gICAgLy8gcmVuZGVyIG1lcmdlIGV2ZW50c1xuICAgIGZ1bmN0aW9uIHJlbmRlck1lcmdlRXZlbnRzKGVzKSB7XG5cbiAgICAgICAgLy8gZ2V0cyBDcmVhdGVFdmVudCwgUHVsbFJlcXVlc3RFdmVudCwgUHVsbFJlcXVlc3RSZXZpZXdFdmVudFxuICAgICAgICAvLyAgIGFuZCBQdWxsUmVxdWVzdFJldmlld0NvbW1lbnRFdmVudFxuXG4gICAgICAgIHZhciAkY29sdW1uID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSksXG4gICAgICAgICAgICAkbGlzdCAgID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpKSxcbiAgICAgICAgICAgIGNsZWFuVXJsO1xuXG4gICAgICAgIGVzLmZvckVhY2goZnVuY3Rpb24gKGV2dCkge1xuXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhldnQpO1xuXG4gICAgICAgICAgICB2YXIgJGxpc3RJdGVtICA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKSksXG4gICAgICAgICAgICAgICAgJGltZyAgICAgICA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJykpLFxuICAgICAgICAgICAgICAgICRwYXJhZ3JhcGggPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKSksXG4gICAgICAgICAgICAgICAgJGEgICAgICAgICA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpKTtcblxuICAgICAgICAgICAgJGltZy5hdHRyKCdzcmMnLCBldnQuYXZhdGFyKTtcblxuICAgICAgICAgICAgJGEuYXR0cigndGFyZ2V0JywgJ19ibGFuaycpO1xuXG4gICAgICAgICAgICBpZiAoZXZ0LnR5cGUgPT09ICdDcmVhdGVFdmVudCcpIHtcblxuICAgICAgICAgICAgICAgICRwYXJhZ3JhcGhcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChbXG4gICAgICAgICAgICAgICAgICAgICAgICBgPHNwYW4gY2xhc3M9XCJib2xkZXJcIj4ke2V2dC5hY3Rvcn08L3NwYW4+YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICdjcmVhdGVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2dC5wYXlsb2FkLnJlZl90eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgYDxzcGFuIGNsYXNzPVwiYm9sZGVyXCI+JHtldnQucGF5bG9hZC5yZWZ9PC9zcGFuPmAsXG4gICAgICAgICAgICAgICAgICAgICAgICAnb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXZ0LmRhdGVcbiAgICAgICAgICAgICAgICAgICAgXS5qb2luKCcgJykpO1xuXG4gICAgICAgICAgICAgICAgJGxpc3RJdGVtXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJGltZylcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkcGFyYWdyYXBoKTtcblxuICAgICAgICAgICAgICAgICRsaXN0XG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJGxpc3RJdGVtKTtcblxuICAgICAgICAgICAgfSBlbHNlIGlmIChldnQudHlwZSA9PT0gJ1B1bGxSZXF1ZXN0RXZlbnQnKSB7XG5cbiAgICAgICAgICAgICAgICAvLyBmcm9tOiBodHRwczovL2FwaS5naXRodWIuY29tL3JlcG9zL2JlbGN1cnYvbWVlcmthdF9tb21lbnR1bS9wdWxscy8xMVxuICAgICAgICAgICAgICAgIC8vICAgdG86IGh0dHBzOi8vZ2l0aHViLmNvbS9iZWxjdXJ2L21lZXJrYXRfbW9tZW50dW0vcHVsbC8xMVxuXG4gICAgICAgICAgICAgICAgY2xlYW5VcmwgPSAoZXZ0LnBheWxvYWQucHVsbF9yZXF1ZXN0LnVybClcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlICdhcGkuJ1xuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFwvXFwvYXBpLi8sICdcXC9cXC8nKVxuICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgJ3JlcG9zLydcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcL3JlcG9zXFwvLywgJ1xcLycpXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlcGxhY2UgJ3B1bGxzJyB3aXRoICdwdWxsJ1xuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvcHVsbHMvLCAncHVsbCcpO1xuXG4gICAgICAgICAgICAgICAgJGFcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2hyZWYnLCBjbGVhblVybClcbiAgICAgICAgICAgICAgICAgICAgLmh0bWwoYDxzcGFuIGNsYXNzPVwiYm9sZGVyXCI+cHVsbCByZXF1ZXN0ICR7ZXZ0LnBheWxvYWQucHVsbF9yZXF1ZXN0Lm51bWJlcn08L3NwYW4+YCk7XG5cbiAgICAgICAgICAgICAgICAkcGFyYWdyYXBoXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoYDxzcGFuIGNsYXNzPVwiYm9sZGVyXCI+JHtldnQuYWN0b3J9PC9zcGFuPmApXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoYCAke2V2dC5wYXlsb2FkLmFjdGlvbn0gYClcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkYSlcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChgIG9uICR7ZXZ0LmRhdGV9YCk7XG5cbiAgICAgICAgICAgICAgICAkbGlzdEl0ZW1cbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkaW1nKVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCRwYXJhZ3JhcGgpO1xuXG4gICAgICAgICAgICAgICAgJGxpc3RcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkbGlzdEl0ZW0pO1xuXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2dC50eXBlID09PSAnUHVsbFJlcXVlc3RSZXZpZXdFdmVudCcpIHtcblxuICAgICAgICAgICAgICAgICRhXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdocmVmJywgZXZ0LnBheWxvYWQucHVsbF9yZXF1ZXN0Lmh0bWxfdXJsKVxuICAgICAgICAgICAgICAgICAgICAudGV4dChldnQucGF5bG9hZC5wdWxsX3JlcXVlc3QudGl0bGUpO1xuXG4gICAgICAgICAgICAgICAgJHBhcmFncmFwaFxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKFtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2dC5hY3RvcixcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2dC5wYXlsb2FkLmFjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICdyZXZpZXcgb2YgJ1xuICAgICAgICAgICAgICAgICAgICBdLmpvaW4oJyAnKSlcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkYSlcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgnIG9uJyArIGV2dC5kYXRlKTtcblxuICAgICAgICAgICAgICAgICRsaXN0SXRlbVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCRpbWcpXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJHBhcmFncmFwaCk7XG5cbiAgICAgICAgICAgICAgICAkbGlzdFxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCRsaXN0SXRlbSk7XG5cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZ0LnR5cGUgPT09ICdQdWxsUmVxdWVzdFJldmlld0NvbW1lbnRFdmVudCcpIHtcblxuICAgICAgICAgICAgICAgICRhXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdocmVmJywgZXZ0LnBheWxvYWQuY29tbWVudC5odG1sX3VybClcbiAgICAgICAgICAgICAgICAgICAgLnRleHQoZXZ0LnBheWxvYWQuY29tbWVudC5ib2R5KTtcblxuICAgICAgICAgICAgICAgICRwYXJhZ3JhcGhcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChbXG4gICAgICAgICAgICAgICAgICAgICAgICBgPHNwYW4gY2xhc3M9XCJib2xkZXJcIj4ke2V2dC5hY3Rvcn08L3NwYW4+YCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2dC5wYXlsb2FkLmFjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICdwdWxsIHJlcXVlc3QgY29tbWVudCAnXG4gICAgICAgICAgICAgICAgICAgIF0uam9pbignICcpKVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCRhKVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCcgb24nICsgZXZ0LmRhdGUpO1xuXG4gICAgICAgICAgICAgICAgJGxpc3RJdGVtXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJGltZylcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkcGFyYWdyYXBoKTtcblxuICAgICAgICAgICAgICAgICRsaXN0XG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJGxpc3RJdGVtKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9KTtcblxuICAgICAgICAkbGlzdFxuICAgICAgICAgICAgLmFkZENsYXNzKCdjb2wtbGlzdCcpO1xuXG4gICAgICAgICRjb2x1bW5cbiAgICAgICAgICAgIC5hZGRDbGFzcygnY29sLTFvZjMnKVxuICAgICAgICAgICAgLmFwcGVuZChgPGgzPiR7ZXMubGVuZ3RofSBNZXJnZS1SZWxhdGVkIEV2ZW50czwvaDM+YClcbiAgICAgICAgICAgIC5hcHBlbmQoJGxpc3QpO1xuXG4gICAgICAgICRjb250YWluZXIuYXBwZW5kKCRjb2x1bW4pO1xuXG4gICAgfVxuXG5cbiAgICAvLyByZXR1cm4gcHVibGljIG1ldGhvZFxuICAgIHJldHVybiB7XG4gICAgICAgIHJlbmRlcjogcmVuZGVyXG4gICAgfTtcblxufSgpKTsiXX0=
